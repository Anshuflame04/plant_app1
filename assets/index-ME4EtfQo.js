function $x(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MS={exports:{}},Dd={},VS={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=Symbol.for("react.element"),Wx=Symbol.for("react.portal"),Hx=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),Gx=Symbol.for("react.profiler"),Kx=Symbol.for("react.provider"),Qx=Symbol.for("react.context"),Yx=Symbol.for("react.forward_ref"),Xx=Symbol.for("react.suspense"),Jx=Symbol.for("react.memo"),Zx=Symbol.for("react.lazy"),xw=Symbol.iterator;function eN(t){return t===null||typeof t!="object"?null:(t=xw&&t[xw]||t["@@iterator"],typeof t=="function"?t:null)}var FS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},US=Object.assign,jS={};function aa(t,e,n){this.props=t,this.context=e,this.refs=jS,this.updater=n||FS}aa.prototype.isReactComponent={};aa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};aa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BS(){}BS.prototype=aa.prototype;function x_(t,e,n){this.props=t,this.context=e,this.refs=jS,this.updater=n||FS}var N_=x_.prototype=new BS;N_.constructor=x_;US(N_,aa.prototype);N_.isPureReactComponent=!0;var Nw=Array.isArray,$S=Object.prototype.hasOwnProperty,O_={current:null},zS={key:!0,ref:!0,__self:!0,__source:!0};function WS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$S.call(e,r)&&!zS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Iu,type:t,key:s,ref:o,props:i,_owner:O_.current}}function tN(t,e){return{$$typeof:Iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function D_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Iu}function nN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ow=/\/+/g;function Pp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nN(""+t.key):e.toString(36)}function Xc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Iu:case Wx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Pp(o,0):r,Nw(i)?(n="",t!=null&&(n=t.replace(Ow,"$&/")+"/"),Xc(i,e,n,"",function(c){return c})):i!=null&&(D_(i)&&(i=tN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ow,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Nw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Pp(s,a);o+=Xc(s,e,n,l,i)}else if(l=eN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Pp(s,a++),o+=Xc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tc(t,e,n){if(t==null)return t;var r=[],i=0;return Xc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Jc={transition:null},iN={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Jc,ReactCurrentOwner:O_};function HS(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Tc,forEach:function(t,e,n){Tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tc(t,function(){e++}),e},toArray:function(t){return Tc(t,function(e){return e})||[]},only:function(t){if(!D_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=aa;oe.Fragment=Hx;oe.Profiler=Gx;oe.PureComponent=x_;oe.StrictMode=qx;oe.Suspense=Xx;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iN;oe.act=HS;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=US({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=O_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$S.call(e,l)&&!zS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Iu,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:Qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kx,_context:t},t.Consumer=t};oe.createElement=WS;oe.createFactory=function(t){var e=WS.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:Yx,render:t}};oe.isValidElement=D_;oe.lazy=function(t){return{$$typeof:Zx,_payload:{_status:-1,_result:t},_init:rN}};oe.memo=function(t,e){return{$$typeof:Jx,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Jc.transition;Jc.transition={};try{t()}finally{Jc.transition=e}};oe.unstable_act=HS;oe.useCallback=function(t,e){return qt.current.useCallback(t,e)};oe.useContext=function(t){return qt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return qt.current.useEffect(t,e)};oe.useId=function(){return qt.current.useId()};oe.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return qt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};oe.useRef=function(t){return qt.current.useRef(t)};oe.useState=function(t){return qt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return qt.current.useTransition()};oe.version="18.3.1";VS.exports=oe;var V=VS.exports;const Lr=zx(V),xm=$x({__proto__:null,default:Lr},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN=V,oN=Symbol.for("react.element"),aN=Symbol.for("react.fragment"),lN=Object.prototype.hasOwnProperty,uN=sN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cN={key:!0,ref:!0,__self:!0,__source:!0};function qS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lN.call(e,r)&&!cN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oN,type:t,key:s,ref:o,props:i,_owner:uN.current}}Dd.Fragment=aN;Dd.jsx=qS;Dd.jsxs=qS;MS.exports=Dd;var P=MS.exports,Nm={},GS={exports:{}},vn={},KS={exports:{}},QS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Z){var re=H.length;H.push(Z);e:for(;0<re;){var Ve=re-1>>>1,we=H[Ve];if(0<i(we,Z))H[Ve]=Z,H[re]=we,re=Ve;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],re=H.pop();if(re!==Z){H[0]=re;e:for(var Ve=0,we=H.length,Ge=we>>>1;Ve<Ge;){var gr=2*(Ve+1)-1,_r=H[gr],yr=gr+1,vr=H[yr];if(0>i(_r,re))yr<we&&0>i(vr,_r)?(H[Ve]=vr,H[yr]=re,Ve=yr):(H[Ve]=_r,H[gr]=re,Ve=gr);else if(yr<we&&0>i(vr,re))H[Ve]=vr,H[yr]=re,Ve=yr;else break e}}return Z}function i(H,Z){var re=H.sortIndex-Z.sortIndex;return re!==0?re:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,y=!1,_=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=H)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function x(H){if(w=!1,I(H),!_)if(n(l)!==null)_=!0,ni(L);else{var Z=n(c);Z!==null&&mr(x,Z.startTime-H)}}function L(H,Z){_=!1,w&&(w=!1,T(v),v=-1),y=!0;var re=p;try{for(I(Z),d=n(l);d!==null&&(!(d.expirationTime>Z)||H&&!k());){var Ve=d.callback;if(typeof Ve=="function"){d.callback=null,p=d.priorityLevel;var we=Ve(d.expirationTime<=Z);Z=t.unstable_now(),typeof we=="function"?d.callback=we:d===n(l)&&r(l),I(Z)}else r(l);d=n(l)}if(d!==null)var Ge=!0;else{var gr=n(c);gr!==null&&mr(x,gr.startTime-Z),Ge=!1}return Ge}finally{d=null,p=re,y=!1}}var O=!1,C=null,v=-1,A=5,m=-1;function k(){return!(t.unstable_now()-m<A)}function N(){if(C!==null){var H=t.unstable_now();m=H;var Z=!0;try{Z=C(!0,H)}finally{Z?b():(O=!1,C=null)}}else O=!1}var b;if(typeof E=="function")b=function(){E(N)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Tn=ke.port2;ke.port1.onmessage=N,b=function(){Tn.postMessage(null)}}else b=function(){R(N,0)};function ni(H){C=H,O||(O=!0,b())}function mr(H,Z){v=R(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,ni(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var re=p;p=Z;try{return H()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=p;p=H;try{return Z()}finally{p=re}},t.unstable_scheduleCallback=function(H,Z,re){var Ve=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Ve+re:Ve):re=Ve,H){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=re+we,H={id:h++,callback:Z,priorityLevel:H,startTime:re,expirationTime:we,sortIndex:-1},re>Ve?(H.sortIndex=re,e(c,H),n(l)===null&&H===n(c)&&(w?(T(v),v=-1):w=!0,mr(x,re-Ve))):(H.sortIndex=we,e(l,H),_||y||(_=!0,ni(L))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var Z=p;return function(){var re=p;p=Z;try{return H.apply(this,arguments)}finally{p=re}}}})(QS);KS.exports=QS;var hN=KS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dN=V,yn=hN;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YS=new Set,Ll={};function js(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(Ll[t]=e,t=0;t<e.length;t++)YS.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,fN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dw={},Lw={};function pN(t){return Om.call(Lw,t)?!0:Om.call(Dw,t)?!1:fN.test(t)?Lw[t]=!0:(Dw[t]=!0,!1)}function mN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gN(t,e,n,r){if(e===null||typeof e>"u"||mN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var L_=/[\-:]([a-z])/g;function M_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L_,M_);Tt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L_,M_);Tt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L_,M_);Tt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function V_(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gN(e,n,i,r)&&(n=null),r||i===null?pN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=dN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sc=Symbol.for("react.element"),lo=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),F_=Symbol.for("react.strict_mode"),Dm=Symbol.for("react.profiler"),XS=Symbol.for("react.provider"),JS=Symbol.for("react.context"),U_=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Mm=Symbol.for("react.suspense_list"),j_=Symbol.for("react.memo"),ci=Symbol.for("react.lazy"),ZS=Symbol.for("react.offscreen"),Mw=Symbol.iterator;function Ua(t){return t===null||typeof t!="object"?null:(t=Mw&&t[Mw]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,bp;function nl(t){if(bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var xp=!1;function Np(t,e){if(!t||xp)return"";xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nl(t):""}function _N(t){switch(t.tag){case 5:return nl(t.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return t=Np(t.type,!1),t;case 11:return t=Np(t.type.render,!1),t;case 1:return t=Np(t.type,!0),t;default:return""}}function Vm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uo:return"Fragment";case lo:return"Portal";case Dm:return"Profiler";case F_:return"StrictMode";case Lm:return"Suspense";case Mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case JS:return(t.displayName||"Context")+".Consumer";case XS:return(t._context.displayName||"Context")+".Provider";case U_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j_:return e=t.displayName||null,e!==null?e:Vm(t.type)||"Memo";case ci:e=t._payload,t=t._init;try{return Vm(t(e))}catch{}}return null}function yN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vm(e);case 8:return e===F_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vN(t){var e=eC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cc(t){t._valueTracker||(t._valueTracker=vN(t))}function tC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fm(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nC(t,e){e=e.checked,e!=null&&V_(t,"checked",e,!1)}function Um(t,e){nC(t,e);var n=Vi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jm(t,e.type,n):e.hasOwnProperty("defaultValue")&&jm(t,e.type,Vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jm(t,e,n){(e!=="number"||Ih(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rl=Array.isArray;function Io(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(rl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vi(n)}}function rC(t,e){var n=Vi(e.value),r=Vi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $m(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,sC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wN=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){wN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function oC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function aC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var EN=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(t,e){if(e){if(EN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Wm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hm=null;function B_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qm=null,Ro=null,Ao=null;function Bw(t){if(t=ku(t)){if(typeof qm!="function")throw Error($(280));var e=t.stateNode;e&&(e=Ud(e),qm(t.stateNode,t.type,e))}}function lC(t){Ro?Ao?Ao.push(t):Ao=[t]:Ro=t}function uC(){if(Ro){var t=Ro,e=Ao;if(Ao=Ro=null,Bw(t),e)for(t=0;t<e.length;t++)Bw(e[t])}}function cC(t,e){return t(e)}function hC(){}var Op=!1;function dC(t,e,n){if(Op)return t(e,n);Op=!0;try{return cC(t,e,n)}finally{Op=!1,(Ro!==null||Ao!==null)&&(hC(),uC())}}function Vl(t,e){var n=t.stateNode;if(n===null)return null;var r=Ud(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Gm=!1;if(Br)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){Gm=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{Gm=!1}function TN(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ml=!1,Rh=null,Ah=!1,Km=null,SN={onError:function(t){ml=!0,Rh=t}};function CN(t,e,n,r,i,s,o,a,l){ml=!1,Rh=null,TN.apply(SN,arguments)}function IN(t,e,n,r,i,s,o,a,l){if(CN.apply(this,arguments),ml){if(ml){var c=Rh;ml=!1,Rh=null}else throw Error($(198));Ah||(Ah=!0,Km=c)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $w(t){if(Bs(t)!==t)throw Error($(188))}function RN(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $w(i),t;if(s===r)return $w(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function pC(t){return t=RN(t),t!==null?mC(t):null}function mC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mC(t);if(e!==null)return e;t=t.sibling}return null}var gC=yn.unstable_scheduleCallback,zw=yn.unstable_cancelCallback,AN=yn.unstable_shouldYield,kN=yn.unstable_requestPaint,Qe=yn.unstable_now,PN=yn.unstable_getCurrentPriorityLevel,$_=yn.unstable_ImmediatePriority,_C=yn.unstable_UserBlockingPriority,kh=yn.unstable_NormalPriority,bN=yn.unstable_LowPriority,yC=yn.unstable_IdlePriority,Ld=null,sr=null;function xN(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Ld,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:DN,NN=Math.log,ON=Math.LN2;function DN(t){return t>>>=0,t===0?32:31-(NN(t)/ON|0)|0}var Rc=64,Ac=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=il(a):(s&=o,s!==0&&(r=il(s)))}else o=n&~i,o!==0?r=il(o):s!==0&&(r=il(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$n(e),i=1<<n,r|=t[n],e&=~i;return r}function LN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-$n(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=LN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Qm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vC(){var t=Rc;return Rc<<=1,!(Rc&4194240)&&(Rc=64),t}function Dp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function VN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$n(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function z_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function wC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var EC,W_,TC,SC,CC,Ym=!1,kc=[],Ti=null,Si=null,Ci=null,Fl=new Map,Ul=new Map,di=[],FN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ww(t,e){switch(t){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":Fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(e.pointerId)}}function Ba(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ku(e),e!==null&&W_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UN(t,e,n,r,i){switch(e){case"focusin":return Ti=Ba(Ti,t,e,n,r,i),!0;case"dragenter":return Si=Ba(Si,t,e,n,r,i),!0;case"mouseover":return Ci=Ba(Ci,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fl.set(s,Ba(Fl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ul.set(s,Ba(Ul.get(s)||null,t,e,n,r,i)),!0}return!1}function IC(t){var e=fs(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=fC(n),e!==null){t.blockedOn=e,CC(t.priority,function(){TC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hm=r,n.target.dispatchEvent(r),Hm=null}else return e=ku(n),e!==null&&W_(e),t.blockedOn=n,!1;e.shift()}return!0}function Hw(t,e,n){Zc(t)&&n.delete(e)}function jN(){Ym=!1,Ti!==null&&Zc(Ti)&&(Ti=null),Si!==null&&Zc(Si)&&(Si=null),Ci!==null&&Zc(Ci)&&(Ci=null),Fl.forEach(Hw),Ul.forEach(Hw)}function $a(t,e){t.blockedOn===e&&(t.blockedOn=null,Ym||(Ym=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,jN)))}function jl(t){function e(i){return $a(i,t)}if(0<kc.length){$a(kc[0],t);for(var n=1;n<kc.length;n++){var r=kc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ti!==null&&$a(Ti,t),Si!==null&&$a(Si,t),Ci!==null&&$a(Ci,t),Fl.forEach(e),Ul.forEach(e),n=0;n<di.length;n++)r=di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<di.length&&(n=di[0],n.blockedOn===null);)IC(n),n.blockedOn===null&&di.shift()}var ko=Jr.ReactCurrentBatchConfig,bh=!0;function BN(t,e,n,r){var i=_e,s=ko.transition;ko.transition=null;try{_e=1,H_(t,e,n,r)}finally{_e=i,ko.transition=s}}function $N(t,e,n,r){var i=_e,s=ko.transition;ko.transition=null;try{_e=4,H_(t,e,n,r)}finally{_e=i,ko.transition=s}}function H_(t,e,n,r){if(bh){var i=Xm(t,e,n,r);if(i===null)Wp(t,e,r,xh,n),Ww(t,r);else if(UN(i,t,e,n,r))r.stopPropagation();else if(Ww(t,r),e&4&&-1<FN.indexOf(t)){for(;i!==null;){var s=ku(i);if(s!==null&&EC(s),s=Xm(t,e,n,r),s===null&&Wp(t,e,r,xh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wp(t,e,r,null,n)}}var xh=null;function Xm(t,e,n,r){if(xh=null,t=B_(r),t=fs(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xh=t,null}function RC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PN()){case $_:return 1;case _C:return 4;case kh:case bN:return 16;case yC:return 536870912;default:return 16}default:return 16}}var yi=null,q_=null,eh=null;function AC(){if(eh)return eh;var t,e=q_,n=e.length,r,i="value"in yi?yi.value:yi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return eh=i.slice(t,1<r?1-r:void 0)}function th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pc(){return!0}function qw(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pc:qw,this.isPropagationStopped=qw,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),e}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G_=wn(la),Au=je({},la,{view:0,detail:0}),zN=wn(Au),Lp,Mp,za,Md=je({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==za&&(za&&t.type==="mousemove"?(Lp=t.screenX-za.screenX,Mp=t.screenY-za.screenY):Mp=Lp=0,za=t),Lp)},movementY:function(t){return"movementY"in t?t.movementY:Mp}}),Gw=wn(Md),WN=je({},Md,{dataTransfer:0}),HN=wn(WN),qN=je({},Au,{relatedTarget:0}),Vp=wn(qN),GN=je({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),KN=wn(GN),QN=je({},la,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YN=wn(QN),XN=je({},la,{data:0}),Kw=wn(XN),JN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e2[t])?!!e[t]:!1}function K_(){return t2}var n2=je({},Au,{key:function(t){if(t.key){var e=JN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K_,charCode:function(t){return t.type==="keypress"?th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r2=wn(n2),i2=je({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qw=wn(i2),s2=je({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K_}),o2=wn(s2),a2=je({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),l2=wn(a2),u2=je({},Md,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c2=wn(u2),h2=[9,13,27,32],Q_=Br&&"CompositionEvent"in window,gl=null;Br&&"documentMode"in document&&(gl=document.documentMode);var d2=Br&&"TextEvent"in window&&!gl,kC=Br&&(!Q_||gl&&8<gl&&11>=gl),Yw=" ",Xw=!1;function PC(t,e){switch(t){case"keyup":return h2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var co=!1;function f2(t,e){switch(t){case"compositionend":return bC(e);case"keypress":return e.which!==32?null:(Xw=!0,Yw);case"textInput":return t=e.data,t===Yw&&Xw?null:t;default:return null}}function p2(t,e){if(co)return t==="compositionend"||!Q_&&PC(t,e)?(t=AC(),eh=q_=yi=null,co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kC&&e.locale!=="ko"?null:e.data;default:return null}}var m2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m2[t.type]:e==="textarea"}function xC(t,e,n,r){lC(r),e=Nh(e,"onChange"),0<e.length&&(n=new G_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _l=null,Bl=null;function g2(t){$C(t,0)}function Vd(t){var e=po(t);if(tC(e))return t}function _2(t,e){if(t==="change")return e}var NC=!1;if(Br){var Fp;if(Br){var Up="oninput"in document;if(!Up){var Zw=document.createElement("div");Zw.setAttribute("oninput","return;"),Up=typeof Zw.oninput=="function"}Fp=Up}else Fp=!1;NC=Fp&&(!document.documentMode||9<document.documentMode)}function eE(){_l&&(_l.detachEvent("onpropertychange",OC),Bl=_l=null)}function OC(t){if(t.propertyName==="value"&&Vd(Bl)){var e=[];xC(e,Bl,t,B_(t)),dC(g2,e)}}function y2(t,e,n){t==="focusin"?(eE(),_l=e,Bl=n,_l.attachEvent("onpropertychange",OC)):t==="focusout"&&eE()}function v2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vd(Bl)}function w2(t,e){if(t==="click")return Vd(e)}function E2(t,e){if(t==="input"||t==="change")return Vd(e)}function T2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:T2;function $l(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Om.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function tE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nE(t,e){var n=tE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tE(n)}}function DC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LC(){for(var t=window,e=Ih();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ih(t.document)}return e}function Y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S2(t){var e=LC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DC(n.ownerDocument.documentElement,n)){if(r!==null&&Y_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nE(n,s);var o=nE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C2=Br&&"documentMode"in document&&11>=document.documentMode,ho=null,Jm=null,yl=null,Zm=!1;function rE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zm||ho==null||ho!==Ih(r)||(r=ho,"selectionStart"in r&&Y_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yl&&$l(yl,r)||(yl=r,r=Nh(Jm,"onSelect"),0<r.length&&(e=new G_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ho)))}function bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fo={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},jp={},MC={};Br&&(MC=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Fd(t){if(jp[t])return jp[t];if(!fo[t])return t;var e=fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in MC)return jp[t]=e[n];return t}var VC=Fd("animationend"),FC=Fd("animationiteration"),UC=Fd("animationstart"),jC=Fd("transitionend"),BC=new Map,iE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){BC.set(t,e),js(e,[t])}for(var Bp=0;Bp<iE.length;Bp++){var $p=iE[Bp],I2=$p.toLowerCase(),R2=$p[0].toUpperCase()+$p.slice(1);Gi(I2,"on"+R2)}Gi(VC,"onAnimationEnd");Gi(FC,"onAnimationIteration");Gi(UC,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(jC,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A2=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function sE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IN(r,e,void 0,t),t.currentTarget=null}function $C(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;sE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;sE(i,a,c),s=l}}}if(Ah)throw t=Km,Ah=!1,Km=null,t}function be(t,e){var n=e[ig];n===void 0&&(n=e[ig]=new Set);var r=t+"__bubble";n.has(r)||(zC(e,t,2,!1),n.add(r))}function zp(t,e,n){var r=0;e&&(r|=4),zC(n,t,r,e)}var xc="_reactListening"+Math.random().toString(36).slice(2);function zl(t){if(!t[xc]){t[xc]=!0,YS.forEach(function(n){n!=="selectionchange"&&(A2.has(n)||zp(n,!1,t),zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xc]||(e[xc]=!0,zp("selectionchange",!1,e))}}function zC(t,e,n,r){switch(RC(e)){case 1:var i=BN;break;case 4:i=$N;break;default:i=H_}n=i.bind(null,e,n,t),i=void 0,!Gm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}dC(function(){var c=s,h=B_(n),d=[];e:{var p=BC.get(t);if(p!==void 0){var y=G_,_=t;switch(t){case"keypress":if(th(n)===0)break e;case"keydown":case"keyup":y=r2;break;case"focusin":_="focus",y=Vp;break;case"focusout":_="blur",y=Vp;break;case"beforeblur":case"afterblur":y=Vp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Gw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=HN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=o2;break;case VC:case FC:case UC:y=KN;break;case jC:y=l2;break;case"scroll":y=zN;break;case"wheel":y=c2;break;case"copy":case"cut":case"paste":y=YN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Qw}var w=(e&4)!==0,R=!w&&t==="scroll",T=w?p!==null?p+"Capture":null:p;w=[];for(var E=c,I;E!==null;){I=E;var x=I.stateNode;if(I.tag===5&&x!==null&&(I=x,T!==null&&(x=Vl(E,T),x!=null&&w.push(Wl(E,x,I)))),R)break;E=E.return}0<w.length&&(p=new y(p,_,null,n,h),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Hm&&(_=n.relatedTarget||n.fromElement)&&(fs(_)||_[$r]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=c,_=_?fs(_):null,_!==null&&(R=Bs(_),_!==R||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=c),y!==_)){if(w=Gw,x="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=Qw,x="onPointerLeave",T="onPointerEnter",E="pointer"),R=y==null?p:po(y),I=_==null?p:po(_),p=new w(x,E+"leave",y,n,h),p.target=R,p.relatedTarget=I,x=null,fs(h)===c&&(w=new w(T,E+"enter",_,n,h),w.target=I,w.relatedTarget=R,x=w),R=x,y&&_)t:{for(w=y,T=_,E=0,I=w;I;I=Xs(I))E++;for(I=0,x=T;x;x=Xs(x))I++;for(;0<E-I;)w=Xs(w),E--;for(;0<I-E;)T=Xs(T),I--;for(;E--;){if(w===T||T!==null&&w===T.alternate)break t;w=Xs(w),T=Xs(T)}w=null}else w=null;y!==null&&oE(d,p,y,w,!1),_!==null&&R!==null&&oE(d,R,_,w,!0)}}e:{if(p=c?po(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var L=_2;else if(Jw(p))if(NC)L=E2;else{L=v2;var O=y2}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=w2);if(L&&(L=L(t,c))){xC(d,L,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&jm(p,"number",p.value)}switch(O=c?po(c):window,t){case"focusin":(Jw(O)||O.contentEditable==="true")&&(ho=O,Jm=c,yl=null);break;case"focusout":yl=Jm=ho=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,rE(d,n,h);break;case"selectionchange":if(C2)break;case"keydown":case"keyup":rE(d,n,h)}var C;if(Q_)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else co?PC(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(kC&&n.locale!=="ko"&&(co||v!=="onCompositionStart"?v==="onCompositionEnd"&&co&&(C=AC()):(yi=h,q_="value"in yi?yi.value:yi.textContent,co=!0)),O=Nh(c,v),0<O.length&&(v=new Kw(v,t,null,n,h),d.push({event:v,listeners:O}),C?v.data=C:(C=bC(n),C!==null&&(v.data=C)))),(C=d2?f2(t,n):p2(t,n))&&(c=Nh(c,"onBeforeInput"),0<c.length&&(h=new Kw("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=C))}$C(d,e)})}function Wl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vl(t,n),s!=null&&r.unshift(Wl(t,s,i)),s=Vl(t,e),s!=null&&r.push(Wl(t,s,i))),t=t.return}return r}function Xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Vl(n,s),l!=null&&o.unshift(Wl(n,l,a))):i||(l=Vl(n,s),l!=null&&o.push(Wl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var k2=/\r\n?/g,P2=/\u0000|\uFFFD/g;function aE(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(P2,"")}function Nc(t,e,n){if(e=aE(e),aE(t)!==e&&n)throw Error($(425))}function Oh(){}var eg=null,tg=null;function ng(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rg=typeof setTimeout=="function"?setTimeout:void 0,b2=typeof clearTimeout=="function"?clearTimeout:void 0,lE=typeof Promise=="function"?Promise:void 0,x2=typeof queueMicrotask=="function"?queueMicrotask:typeof lE<"u"?function(t){return lE.resolve(null).then(t).catch(N2)}:rg;function N2(t){setTimeout(function(){throw t})}function Hp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jl(e)}function Ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ua=Math.random().toString(36).slice(2),tr="__reactFiber$"+ua,Hl="__reactProps$"+ua,$r="__reactContainer$"+ua,ig="__reactEvents$"+ua,O2="__reactListeners$"+ua,D2="__reactHandles$"+ua;function fs(t){var e=t[tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$r]||n[tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uE(t);t!==null;){if(n=t[tr])return n;t=uE(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[tr]||t[$r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Ud(t){return t[Hl]||null}var sg=[],mo=-1;function Ki(t){return{current:t}}function Oe(t){0>mo||(t.current=sg[mo],sg[mo]=null,mo--)}function Ae(t,e){mo++,sg[mo]=t.current,t.current=e}var Fi={},Lt=Ki(Fi),Zt=Ki(!1),Cs=Fi;function jo(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function en(t){return t=t.childContextTypes,t!=null}function Dh(){Oe(Zt),Oe(Lt)}function cE(t,e,n){if(Lt.current!==Fi)throw Error($(168));Ae(Lt,e),Ae(Zt,n)}function WC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,yN(t)||"Unknown",i));return je({},n,r)}function Lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,Cs=Lt.current,Ae(Lt,t),Ae(Zt,Zt.current),!0}function hE(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=WC(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,Oe(Zt),Oe(Lt),Ae(Lt,t)):Oe(Zt),Ae(Zt,n)}var Ir=null,jd=!1,qp=!1;function HC(t){Ir===null?Ir=[t]:Ir.push(t)}function L2(t){jd=!0,HC(t)}function Qi(){if(!qp&&Ir!==null){qp=!0;var t=0,e=_e;try{var n=Ir;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,jd=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),gC($_,Qi),i}finally{_e=e,qp=!1}}return null}var go=[],_o=0,Mh=null,Vh=0,Cn=[],In=0,Is=null,Pr=1,br="";function ls(t,e){go[_o++]=Vh,go[_o++]=Mh,Mh=t,Vh=e}function qC(t,e,n){Cn[In++]=Pr,Cn[In++]=br,Cn[In++]=Is,Is=t;var r=Pr;t=br;var i=32-$n(r)-1;r&=~(1<<i),n+=1;var s=32-$n(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pr=1<<32-$n(e)+i|n<<i|r,br=s+t}else Pr=1<<s|n<<i|r,br=t}function X_(t){t.return!==null&&(ls(t,1),qC(t,1,0))}function J_(t){for(;t===Mh;)Mh=go[--_o],go[_o]=null,Vh=go[--_o],go[_o]=null;for(;t===Is;)Is=Cn[--In],Cn[In]=null,br=Cn[--In],Cn[In]=null,Pr=Cn[--In],Cn[In]=null}var fn=null,cn=null,Me=!1,Fn=null;function GC(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,cn=Ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:Pr,overflow:br}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,cn=null,!0):!1;default:return!1}}function og(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ag(t){if(Me){var e=cn;if(e){var n=e;if(!dE(t,e)){if(og(t))throw Error($(418));e=Ii(n.nextSibling);var r=fn;e&&dE(t,e)?GC(r,n):(t.flags=t.flags&-4097|2,Me=!1,fn=t)}}else{if(og(t))throw Error($(418));t.flags=t.flags&-4097|2,Me=!1,fn=t}}}function fE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Oc(t){if(t!==fn)return!1;if(!Me)return fE(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ng(t.type,t.memoizedProps)),e&&(e=cn)){if(og(t))throw KC(),Error($(418));for(;e;)GC(t,e),e=Ii(e.nextSibling)}if(fE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cn=Ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=fn?Ii(t.stateNode.nextSibling):null;return!0}function KC(){for(var t=cn;t;)t=Ii(t.nextSibling)}function Bo(){cn=fn=null,Me=!1}function Z_(t){Fn===null?Fn=[t]:Fn.push(t)}var M2=Jr.ReactCurrentBatchConfig;function Wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Dc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pE(t){var e=t._init;return e(t._payload)}function QC(t){function e(T,E){if(t){var I=T.deletions;I===null?(T.deletions=[E],T.flags|=16):I.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function r(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function i(T,E){return T=Pi(T,E),T.index=0,T.sibling=null,T}function s(T,E,I){return T.index=I,t?(I=T.alternate,I!==null?(I=I.index,I<E?(T.flags|=2,E):I):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,E,I,x){return E===null||E.tag!==6?(E=Zp(I,T.mode,x),E.return=T,E):(E=i(E,I),E.return=T,E)}function l(T,E,I,x){var L=I.type;return L===uo?h(T,E,I.props.children,x,I.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ci&&pE(L)===E.type)?(x=i(E,I.props),x.ref=Wa(T,E,I),x.return=T,x):(x=lh(I.type,I.key,I.props,null,T.mode,x),x.ref=Wa(T,E,I),x.return=T,x)}function c(T,E,I,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=em(I,T.mode,x),E.return=T,E):(E=i(E,I.children||[]),E.return=T,E)}function h(T,E,I,x,L){return E===null||E.tag!==7?(E=ws(I,T.mode,x,L),E.return=T,E):(E=i(E,I),E.return=T,E)}function d(T,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Zp(""+E,T.mode,I),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sc:return I=lh(E.type,E.key,E.props,null,T.mode,I),I.ref=Wa(T,null,E),I.return=T,I;case lo:return E=em(E,T.mode,I),E.return=T,E;case ci:var x=E._init;return d(T,x(E._payload),I)}if(rl(E)||Ua(E))return E=ws(E,T.mode,I,null),E.return=T,E;Dc(T,E)}return null}function p(T,E,I,x){var L=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:a(T,E,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Sc:return I.key===L?l(T,E,I,x):null;case lo:return I.key===L?c(T,E,I,x):null;case ci:return L=I._init,p(T,E,L(I._payload),x)}if(rl(I)||Ua(I))return L!==null?null:h(T,E,I,x,null);Dc(T,I)}return null}function y(T,E,I,x,L){if(typeof x=="string"&&x!==""||typeof x=="number")return T=T.get(I)||null,a(E,T,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sc:return T=T.get(x.key===null?I:x.key)||null,l(E,T,x,L);case lo:return T=T.get(x.key===null?I:x.key)||null,c(E,T,x,L);case ci:var O=x._init;return y(T,E,I,O(x._payload),L)}if(rl(x)||Ua(x))return T=T.get(I)||null,h(E,T,x,L,null);Dc(E,x)}return null}function _(T,E,I,x){for(var L=null,O=null,C=E,v=E=0,A=null;C!==null&&v<I.length;v++){C.index>v?(A=C,C=null):A=C.sibling;var m=p(T,C,I[v],x);if(m===null){C===null&&(C=A);break}t&&C&&m.alternate===null&&e(T,C),E=s(m,E,v),O===null?L=m:O.sibling=m,O=m,C=A}if(v===I.length)return n(T,C),Me&&ls(T,v),L;if(C===null){for(;v<I.length;v++)C=d(T,I[v],x),C!==null&&(E=s(C,E,v),O===null?L=C:O.sibling=C,O=C);return Me&&ls(T,v),L}for(C=r(T,C);v<I.length;v++)A=y(C,T,v,I[v],x),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?v:A.key),E=s(A,E,v),O===null?L=A:O.sibling=A,O=A);return t&&C.forEach(function(k){return e(T,k)}),Me&&ls(T,v),L}function w(T,E,I,x){var L=Ua(I);if(typeof L!="function")throw Error($(150));if(I=L.call(I),I==null)throw Error($(151));for(var O=L=null,C=E,v=E=0,A=null,m=I.next();C!==null&&!m.done;v++,m=I.next()){C.index>v?(A=C,C=null):A=C.sibling;var k=p(T,C,m.value,x);if(k===null){C===null&&(C=A);break}t&&C&&k.alternate===null&&e(T,C),E=s(k,E,v),O===null?L=k:O.sibling=k,O=k,C=A}if(m.done)return n(T,C),Me&&ls(T,v),L;if(C===null){for(;!m.done;v++,m=I.next())m=d(T,m.value,x),m!==null&&(E=s(m,E,v),O===null?L=m:O.sibling=m,O=m);return Me&&ls(T,v),L}for(C=r(T,C);!m.done;v++,m=I.next())m=y(C,T,v,m.value,x),m!==null&&(t&&m.alternate!==null&&C.delete(m.key===null?v:m.key),E=s(m,E,v),O===null?L=m:O.sibling=m,O=m);return t&&C.forEach(function(N){return e(T,N)}),Me&&ls(T,v),L}function R(T,E,I,x){if(typeof I=="object"&&I!==null&&I.type===uo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Sc:e:{for(var L=I.key,O=E;O!==null;){if(O.key===L){if(L=I.type,L===uo){if(O.tag===7){n(T,O.sibling),E=i(O,I.props.children),E.return=T,T=E;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ci&&pE(L)===O.type){n(T,O.sibling),E=i(O,I.props),E.ref=Wa(T,O,I),E.return=T,T=E;break e}n(T,O);break}else e(T,O);O=O.sibling}I.type===uo?(E=ws(I.props.children,T.mode,x,I.key),E.return=T,T=E):(x=lh(I.type,I.key,I.props,null,T.mode,x),x.ref=Wa(T,E,I),x.return=T,T=x)}return o(T);case lo:e:{for(O=I.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){n(T,E.sibling),E=i(E,I.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=em(I,T.mode,x),E.return=T,T=E}return o(T);case ci:return O=I._init,R(T,E,O(I._payload),x)}if(rl(I))return _(T,E,I,x);if(Ua(I))return w(T,E,I,x);Dc(T,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(n(T,E.sibling),E=i(E,I),E.return=T,T=E):(n(T,E),E=Zp(I,T.mode,x),E.return=T,T=E),o(T)):n(T,E)}return R}var $o=QC(!0),YC=QC(!1),Fh=Ki(null),Uh=null,yo=null,ey=null;function ty(){ey=yo=Uh=null}function ny(t){var e=Fh.current;Oe(Fh),t._currentValue=e}function lg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Po(t,e){Uh=t,ey=yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(ey!==t)if(t={context:t,memoizedValue:e,next:null},yo===null){if(Uh===null)throw Error($(308));yo=t,Uh.dependencies={lanes:0,firstContext:t}}else yo=yo.next=t;return e}var ps=null;function ry(t){ps===null?ps=[t]:ps.push(t)}function XC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ry(e)):(n.next=i.next,i.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hi=!1;function iy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(t,n)}return i=r.interleaved,i===null?(e.next=e,ry(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(t,n)}function nh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,z_(t,n)}}function mE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jh(t,e,n,r){var i=t.updateQueue;hi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(p=e,y=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){d=_.call(y,d,p);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,p=typeof _=="function"?_.call(y,d,p):_,p==null)break e;d=je({},d,p);break e;case 2:hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=d):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);As|=o,t.lanes=o,t.memoizedState=d}}function gE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Pu={},or=Ki(Pu),ql=Ki(Pu),Gl=Ki(Pu);function ms(t){if(t===Pu)throw Error($(174));return t}function sy(t,e){switch(Ae(Gl,e),Ae(ql,t),Ae(or,Pu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$m(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$m(e,t)}Oe(or),Ae(or,e)}function zo(){Oe(or),Oe(ql),Oe(Gl)}function ZC(t){ms(Gl.current);var e=ms(or.current),n=$m(e,t.type);e!==n&&(Ae(ql,t),Ae(or,n))}function oy(t){ql.current===t&&(Oe(or),Oe(ql))}var Fe=Ki(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gp=[];function ay(){for(var t=0;t<Gp.length;t++)Gp[t]._workInProgressVersionPrimary=null;Gp.length=0}var rh=Jr.ReactCurrentDispatcher,Kp=Jr.ReactCurrentBatchConfig,Rs=0,Ue=null,it=null,ht=null,$h=!1,vl=!1,Kl=0,V2=0;function At(){throw Error($(321))}function ly(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function uy(t,e,n,r,i,s){if(Rs=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rh.current=t===null||t.memoizedState===null?B2:$2,t=n(r,i),vl){s=0;do{if(vl=!1,Kl=0,25<=s)throw Error($(301));s+=1,ht=it=null,e.updateQueue=null,rh.current=z2,t=n(r,i)}while(vl)}if(rh.current=zh,e=it!==null&&it.next!==null,Rs=0,ht=it=Ue=null,$h=!1,e)throw Error($(300));return t}function cy(){var t=Kl!==0;return Kl=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ue.memoizedState=ht=t:ht=ht.next=t,ht}function Nn(){if(it===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ht===null?Ue.memoizedState:ht.next;if(e!==null)ht=e,it=t;else{if(t===null)throw Error($(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ht===null?Ue.memoizedState=ht=t:ht=ht.next=t}return ht}function Ql(t,e){return typeof e=="function"?e(t):e}function Qp(t){var e=Nn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=it,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Rs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ue.lanes|=h,As|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ue.lanes|=s,As|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=Nn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eI(){}function tI(t,e){var n=Ue,r=Nn(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,Xt=!0),r=r.queue,hy(iI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Yl(9,rI.bind(null,n,r,i,e),void 0,null),ft===null)throw Error($(349));Rs&30||nI(n,e,i)}return i}function nI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rI(t,e,n,r){e.value=n,e.getSnapshot=r,sI(e)&&oI(t)}function iI(t,e,n){return n(function(){sI(e)&&oI(t)})}function sI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function oI(t){var e=zr(t,1);e!==null&&zn(e,t,1,-1)}function _E(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:t},e.queue=t,t=t.dispatch=j2.bind(null,Ue,t),[e.memoizedState,t]}function Yl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aI(){return Nn().memoizedState}function ih(t,e,n,r){var i=Jn();Ue.flags|=t,i.memoizedState=Yl(1|e,n,void 0,r===void 0?null:r)}function Bd(t,e,n,r){var i=Nn();r=r===void 0?null:r;var s=void 0;if(it!==null){var o=it.memoizedState;if(s=o.destroy,r!==null&&ly(r,o.deps)){i.memoizedState=Yl(e,n,s,r);return}}Ue.flags|=t,i.memoizedState=Yl(1|e,n,s,r)}function yE(t,e){return ih(8390656,8,t,e)}function hy(t,e){return Bd(2048,8,t,e)}function lI(t,e){return Bd(4,2,t,e)}function uI(t,e){return Bd(4,4,t,e)}function cI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hI(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4,4,cI.bind(null,e,t),n)}function dy(){}function dI(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ly(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fI(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ly(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pI(t,e,n){return Rs&21?(Hn(n,e)||(n=vC(),Ue.lanes|=n,As|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function F2(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Kp.transition;Kp.transition={};try{t(!1),e()}finally{_e=n,Kp.transition=r}}function mI(){return Nn().memoizedState}function U2(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gI(t))_I(e,n);else if(n=XC(t,e,n,r),n!==null){var i=Wt();zn(n,t,r,i),yI(n,e,r)}}function j2(t,e,n){var r=ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gI(t))_I(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(i.next=i,ry(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=XC(t,e,i,r),n!==null&&(i=Wt(),zn(n,t,r,i),yI(n,e,r))}}function gI(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function _I(t,e){vl=$h=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,z_(t,n)}}var zh={readContext:xn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},B2={readContext:xn,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:yE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,cI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=U2.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:_E,useDebugValue:dy,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=_E(!1),e=t[0];return t=F2.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,i=Jn();if(Me){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ft===null)throw Error($(349));Rs&30||nI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yE(iI.bind(null,r,s,t),[t]),r.flags|=2048,Yl(9,rI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jn(),e=ft.identifierPrefix;if(Me){var n=br,r=Pr;n=(r&~(1<<32-$n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=V2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$2={readContext:xn,useCallback:dI,useContext:xn,useEffect:hy,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:fI,useReducer:Qp,useRef:aI,useState:function(){return Qp(Ql)},useDebugValue:dy,useDeferredValue:function(t){var e=Nn();return pI(e,it.memoizedState,t)},useTransition:function(){var t=Qp(Ql)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1},z2={readContext:xn,useCallback:dI,useContext:xn,useEffect:hy,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:fI,useReducer:Yp,useRef:aI,useState:function(){return Yp(Ql)},useDebugValue:dy,useDeferredValue:function(t){var e=Nn();return it===null?e.memoizedState=t:pI(e,it.memoizedState,t)},useTransition:function(){var t=Yp(Ql)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ug(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $d={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wt(),i=ki(t),s=Mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,i),e!==null&&(zn(e,t,i,r),nh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wt(),i=ki(t),s=Mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,i),e!==null&&(zn(e,t,i,r),nh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),r=ki(t),i=Mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ri(t,i,r),e!==null&&(zn(e,t,r,n),nh(e,t,r))}};function vE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$l(n,r)||!$l(i,s):!0}function vI(t,e,n){var r=!1,i=Fi,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(i=en(e)?Cs:Lt.current,r=e.contextTypes,s=(r=r!=null)?jo(t,i):Fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$d,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$d.enqueueReplaceState(e,e.state,null)}function cg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},iy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xn(s):(s=en(e)?Cs:Lt.current,i.context=jo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ug(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$d.enqueueReplaceState(i,i.state,null),jh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e){try{var n="",r=e;do n+=_N(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function wI(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hh||(Hh=!0,Eg=r),hg(t,e)},n}function EI(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hg(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function EE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iO.bind(null,t,e,n),e.then(t,t))}function TE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function SE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,Ri(n,e,1))),n.lanes|=1),t)}var H2=Jr.ReactCurrentOwner,Xt=!1;function Bt(t,e,n,r){e.child=t===null?YC(e,null,n,r):$o(e,t.child,n,r)}function CE(t,e,n,r,i){n=n.render;var s=e.ref;return Po(e,i),r=uy(t,e,n,r,s,i),n=cy(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(Me&&n&&X_(e),e.flags|=1,Bt(t,e,r,i),e.child)}function IE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,TI(t,e,s,r,i)):(t=lh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$l,n(o,r)&&t.ref===e.ref)return Wr(t,e,i)}return e.flags|=1,t=Pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function TI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($l(s,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Wr(t,e,i)}return dg(t,e,n,r,i)}function SI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(wo,ln),ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(wo,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(wo,ln),ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(wo,ln),ln|=r;return Bt(t,e,i,n),e.child}function CI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dg(t,e,n,r,i){var s=en(n)?Cs:Lt.current;return s=jo(e,s),Po(e,i),n=uy(t,e,n,r,s,i),r=cy(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(Me&&r&&X_(e),e.flags|=1,Bt(t,e,n,i),e.child)}function RE(t,e,n,r,i){if(en(n)){var s=!0;Lh(e)}else s=!1;if(Po(e,i),e.stateNode===null)sh(t,e),vI(e,n,r),cg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=en(n)?Cs:Lt.current,c=jo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&wE(e,o,r,c),hi=!1;var p=e.memoizedState;o.state=p,jh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Zt.current||hi?(typeof h=="function"&&(ug(e,n,h,r),l=e.memoizedState),(a=hi||vE(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,JC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=en(n)?Cs:Lt.current,l=jo(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&wE(e,o,r,l),hi=!1,p=e.memoizedState,o.state=p,jh(e,r,o,i);var _=e.memoizedState;a!==d||p!==_||Zt.current||hi?(typeof y=="function"&&(ug(e,n,y,r),_=e.memoizedState),(c=hi||vE(e,n,c,r,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return fg(t,e,n,r,s,i)}function fg(t,e,n,r,i,s){CI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hE(e,n,!1),Wr(t,e,s);r=e.stateNode,H2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$o(e,t.child,null,s),e.child=$o(e,null,a,s)):Bt(t,e,a,s),e.memoizedState=r.state,i&&hE(e,n,!0),e.child}function II(t){var e=t.stateNode;e.pendingContext?cE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cE(t,e.context,!1),sy(t,e.containerInfo)}function AE(t,e,n,r,i){return Bo(),Z_(i),e.flags|=256,Bt(t,e,n,r),e.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function mg(t){return{baseLanes:t,cachePool:null,transitions:null}}function RI(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Fe,i&1),t===null)return ag(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hd(o,r,0,null),t=ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mg(n),e.memoizedState=pg,t):fy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return q2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?mg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=pg,r}return s=t.child,t=s.sibling,r=Pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fy(t,e){return e=Hd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lc(t,e,n,r){return r!==null&&Z_(r),$o(e,t.child,null,n),t=fy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xp(Error($(422))),Lc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hd({mode:"visible",children:r.children},i,0,null),s=ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$o(e,t.child,null,o),e.child.memoizedState=mg(o),e.memoizedState=pg,s);if(!(e.mode&1))return Lc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=Xp(s,r,void 0),Lc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xt||a){if(r=ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zr(t,i),zn(r,t,i,-1))}return vy(),r=Xp(Error($(421))),Lc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,cn=Ii(i.nextSibling),fn=e,Me=!0,Fn=null,t!==null&&(Cn[In++]=Pr,Cn[In++]=br,Cn[In++]=Is,Pr=t.id,br=t.overflow,Is=e),e=fy(e,r.children),e.flags|=4096,e)}function kE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lg(t.return,e,n)}function Jp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function AI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kE(t,n,e);else if(t.tag===19)kE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jp(e,!0,n,null,s);break;case"together":Jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function G2(t,e,n){switch(e.tag){case 3:II(e),Bo();break;case 5:ZC(e);break;case 1:en(e.type)&&Lh(e);break;case 4:sy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(Fh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?RI(t,e,n):(Ae(Fe,Fe.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);Ae(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return AI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,SI(t,e,n)}return Wr(t,e,n)}var kI,gg,PI,bI;kI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gg=function(){};PI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ms(or.current);var s=null;switch(n){case"input":i=Fm(t,i),r=Fm(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=Bm(t,i),r=Bm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oh)}zm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ll.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};bI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ha(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function K2(t,e,n){var r=e.pendingProps;switch(J_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return en(e.type)&&Dh(),kt(e),null;case 3:return r=e.stateNode,zo(),Oe(Zt),Oe(Lt),ay(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(Cg(Fn),Fn=null))),gg(t,e),kt(e),null;case 5:oy(e);var i=ms(Gl.current);if(n=e.type,t!==null&&e.stateNode!=null)PI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return kt(e),null}if(t=ms(or.current),Oc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tr]=e,r[Hl]=s,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(i=0;i<sl.length;i++)be(sl[i],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Vw(r,s),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},be("invalid",r);break;case"textarea":Uw(r,s),be("invalid",r)}zm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nc(r.textContent,a,t),i=["children",""+a]):Ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":Cc(r),Fw(r,s,!0);break;case"textarea":Cc(r),jw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Oh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tr]=e,t[Hl]=r,kI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wm(n,r),n){case"dialog":be("cancel",t),be("close",t),i=r;break;case"iframe":case"object":case"embed":be("load",t),i=r;break;case"video":case"audio":for(i=0;i<sl.length;i++)be(sl[i],t);i=r;break;case"source":be("error",t),i=r;break;case"img":case"image":case"link":be("error",t),be("load",t),i=r;break;case"details":be("toggle",t),i=r;break;case"input":Vw(t,r),i=Fm(t,r),be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),be("invalid",t);break;case"textarea":Uw(t,r),i=Bm(t,r),be("invalid",t);break;default:i=r}zm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ml(t,l):typeof l=="number"&&Ml(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&be("scroll",t):l!=null&&V_(t,s,l,o))}switch(n){case"input":Cc(t),Fw(t,r,!1);break;case"textarea":Cc(t),jw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Io(t,!!r.multiple,s,!1):r.defaultValue!=null&&Io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)bI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ms(Gl.current),ms(or.current),Oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[tr]=e,(s=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:Nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=e,e.stateNode=r}return kt(e),null;case 13:if(Oe(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&cn!==null&&e.mode&1&&!(e.flags&128))KC(),Bo(),e.flags|=98560,s=!1;else if(s=Oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[tr]=e}else Bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else Fn!==null&&(Cg(Fn),Fn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?at===0&&(at=3):vy())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return zo(),gg(t,e),t===null&&zl(e.stateNode.containerInfo),kt(e),null;case 10:return ny(e.type._context),kt(e),null;case 17:return en(e.type)&&Dh(),kt(e),null;case 19:if(Oe(Fe),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ha(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bh(t),o!==null){for(e.flags|=128,Ha(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>Ho&&(e.flags|=128,r=!0,Ha(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ha(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return kt(e),null}else 2*Qe()-s.renderingStartTime>Ho&&n!==1073741824&&(e.flags|=128,r=!0,Ha(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Fe.current,Ae(Fe,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return yy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Q2(t,e){switch(J_(e),e.tag){case 1:return en(e.type)&&Dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zo(),Oe(Zt),Oe(Lt),ay(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return oy(e),null;case 13:if(Oe(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Fe),null;case 4:return zo(),null;case 10:return ny(e.type._context),null;case 22:case 23:return yy(),null;case 24:return null;default:return null}}var Mc=!1,Nt=!1,Y2=typeof WeakSet=="function"?WeakSet:Set,G=null;function vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function _g(t,e,n){try{n()}catch(r){He(t,e,r)}}var PE=!1;function X2(t,e){if(eg=bh,t=LC(),Y_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)p=d,d=y;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(y=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tg={focusedElem:t,selectionRange:n},bh=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,R=_.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?w:Mn(e.type,w),R);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(x){He(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return _=PE,PE=!1,_}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_g(e,n,s)}i=i.next}while(i!==r)}}function zd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xI(t){var e=t.alternate;e!==null&&(t.alternate=null,xI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[Hl],delete e[ig],delete e[O2],delete e[D2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NI(t){return t.tag===5||t.tag===3||t.tag===4}function bE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oh));else if(r!==4&&(t=t.child,t!==null))for(vg(t,e,n),t=t.sibling;t!==null;)vg(t,e,n),t=t.sibling}function wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wg(t,e,n),t=t.sibling;t!==null;)wg(t,e,n),t=t.sibling}var gt=null,Vn=!1;function oi(t,e,n){for(n=n.child;n!==null;)OI(t,e,n),n=n.sibling}function OI(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:Nt||vo(n,e);case 6:var r=gt,i=Vn;gt=null,oi(t,e,n),gt=r,Vn=i,gt!==null&&(Vn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Vn?(t=gt,n=n.stateNode,t.nodeType===8?Hp(t.parentNode,n):t.nodeType===1&&Hp(t,n),jl(t)):Hp(gt,n.stateNode));break;case 4:r=gt,i=Vn,gt=n.stateNode.containerInfo,Vn=!0,oi(t,e,n),gt=r,Vn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_g(n,e,o),i=i.next}while(i!==r)}oi(t,e,n);break;case 1:if(!Nt&&(vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,oi(t,e,n),Nt=r):oi(t,e,n);break;default:oi(t,e,n)}}function xE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y2),e.forEach(function(r){var i=oO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Vn=!1;break e;case 3:gt=a.stateNode.containerInfo,Vn=!0;break e;case 4:gt=a.stateNode.containerInfo,Vn=!0;break e}a=a.return}if(gt===null)throw Error($(160));OI(s,o,i),gt=null,Vn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){He(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DI(e,t),e=e.sibling}function DI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Yn(t),r&4){try{wl(3,t,t.return),zd(3,t)}catch(w){He(t,t.return,w)}try{wl(5,t,t.return)}catch(w){He(t,t.return,w)}}break;case 1:Ln(e,t),Yn(t),r&512&&n!==null&&vo(n,n.return);break;case 5:if(Ln(e,t),Yn(t),r&512&&n!==null&&vo(n,n.return),t.flags&32){var i=t.stateNode;try{Ml(i,"")}catch(w){He(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nC(i,s),Wm(a,o);var c=Wm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?aC(i,d):h==="dangerouslySetInnerHTML"?sC(i,d):h==="children"?Ml(i,d):V_(i,h,d,c)}switch(a){case"input":Um(i,s);break;case"textarea":rC(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Io(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Io(i,!!s.multiple,s.defaultValue,!0):Io(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hl]=s}catch(w){He(t,t.return,w)}}break;case 6:if(Ln(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){He(t,t.return,w)}}break;case 3:if(Ln(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(e.containerInfo)}catch(w){He(t,t.return,w)}break;case 4:Ln(e,t),Yn(t);break;case 13:Ln(e,t),Yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gy=Qe())),r&4&&xE(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||h,Ln(e,t),Nt=c):Ln(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(d=G=h;G!==null;){switch(p=G,y=p.child,p.tag){case 0:case 11:case 14:case 15:wl(4,p,p.return);break;case 1:vo(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){He(r,n,w)}}break;case 5:vo(p,p.return);break;case 22:if(p.memoizedState!==null){OE(d);continue}}y!==null?(y.return=p,G=y):OE(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oC("display",o))}catch(w){He(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){He(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),Yn(t),r&4&&xE(t);break;case 21:break;default:Ln(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NI(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ml(i,""),r.flags&=-33);var s=bE(t);wg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bE(t);vg(t,a,o);break;default:throw Error($(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function J2(t,e,n){G=t,LI(t)}function LI(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Nt;a=Mc;var c=Nt;if(Mc=o,(Nt=l)&&!c)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?DE(i):l!==null?(l.return=o,G=l):DE(i);for(;s!==null;)G=s,LI(s),s=s.sibling;G=i,Mc=a,Nt=c}NE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):NE(t)}}function NE(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||zd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Nt||e.flags&512&&yg(e)}catch(p){He(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function OE(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function DE(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zd(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){He(e,i,l)}}var s=e.return;try{yg(e)}catch(l){He(e,s,l)}break;case 5:var o=e.return;try{yg(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var Z2=Math.ceil,Wh=Jr.ReactCurrentDispatcher,py=Jr.ReactCurrentOwner,kn=Jr.ReactCurrentBatchConfig,he=0,ft=null,et=null,wt=0,ln=0,wo=Ki(0),at=0,Xl=null,As=0,Wd=0,my=0,El=null,Qt=null,gy=0,Ho=1/0,Cr=null,Hh=!1,Eg=null,Ai=null,Vc=!1,vi=null,qh=0,Tl=0,Tg=null,oh=-1,ah=0;function Wt(){return he&6?Qe():oh!==-1?oh:oh=Qe()}function ki(t){return t.mode&1?he&2&&wt!==0?wt&-wt:M2.transition!==null?(ah===0&&(ah=vC()),ah):(t=_e,t!==0||(t=window.event,t=t===void 0?16:RC(t.type)),t):1}function zn(t,e,n,r){if(50<Tl)throw Tl=0,Tg=null,Error($(185));Ru(t,n,r),(!(he&2)||t!==ft)&&(t===ft&&(!(he&2)&&(Wd|=n),at===4&&fi(t,wt)),tn(t,r),n===1&&he===0&&!(e.mode&1)&&(Ho=Qe()+500,jd&&Qi()))}function tn(t,e){var n=t.callbackNode;MN(t,e);var r=Ph(t,t===ft?wt:0);if(r===0)n!==null&&zw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zw(n),e===1)t.tag===0?L2(LE.bind(null,t)):HC(LE.bind(null,t)),x2(function(){!(he&6)&&Qi()}),n=null;else{switch(wC(r)){case 1:n=$_;break;case 4:n=_C;break;case 16:n=kh;break;case 536870912:n=yC;break;default:n=kh}n=zI(n,MI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function MI(t,e){if(oh=-1,ah=0,he&6)throw Error($(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var r=Ph(t,t===ft?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gh(t,r);else{e=r;var i=he;he|=2;var s=FI();(ft!==t||wt!==e)&&(Cr=null,Ho=Qe()+500,vs(t,e));do try{nO();break}catch(a){VI(t,a)}while(!0);ty(),Wh.current=s,he=i,et!==null?e=0:(ft=null,wt=0,e=at)}if(e!==0){if(e===2&&(i=Qm(t),i!==0&&(r=i,e=Sg(t,i))),e===1)throw n=Xl,vs(t,0),fi(t,r),tn(t,Qe()),n;if(e===6)fi(t,r);else{if(i=t.current.alternate,!(r&30)&&!eO(i)&&(e=Gh(t,r),e===2&&(s=Qm(t),s!==0&&(r=s,e=Sg(t,s))),e===1))throw n=Xl,vs(t,0),fi(t,r),tn(t,Qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:us(t,Qt,Cr);break;case 3:if(fi(t,r),(r&130023424)===r&&(e=gy+500-Qe(),10<e)){if(Ph(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rg(us.bind(null,t,Qt,Cr),e);break}us(t,Qt,Cr);break;case 4:if(fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-$n(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z2(r/1960))-r,10<r){t.timeoutHandle=rg(us.bind(null,t,Qt,Cr),r);break}us(t,Qt,Cr);break;case 5:us(t,Qt,Cr);break;default:throw Error($(329))}}}return tn(t,Qe()),t.callbackNode===n?MI.bind(null,t):null}function Sg(t,e){var n=El;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Gh(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&Cg(e)),t}function Cg(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function eO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fi(t,e){for(e&=~my,e&=~Wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),r=1<<n;t[n]=-1,e&=~r}}function LE(t){if(he&6)throw Error($(327));bo();var e=Ph(t,0);if(!(e&1))return tn(t,Qe()),null;var n=Gh(t,e);if(t.tag!==0&&n===2){var r=Qm(t);r!==0&&(e=r,n=Sg(t,r))}if(n===1)throw n=Xl,vs(t,0),fi(t,e),tn(t,Qe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,Qt,Cr),tn(t,Qe()),null}function _y(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Ho=Qe()+500,jd&&Qi())}}function ks(t){vi!==null&&vi.tag===0&&!(he&6)&&bo();var e=he;he|=1;var n=kn.transition,r=_e;try{if(kn.transition=null,_e=1,t)return t()}finally{_e=r,kn.transition=n,he=e,!(he&6)&&Qi()}}function yy(){ln=wo.current,Oe(wo)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,b2(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(J_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dh();break;case 3:zo(),Oe(Zt),Oe(Lt),ay();break;case 5:oy(r);break;case 4:zo();break;case 13:Oe(Fe);break;case 19:Oe(Fe);break;case 10:ny(r.type._context);break;case 22:case 23:yy()}n=n.return}if(ft=t,et=t=Pi(t.current,null),wt=ln=e,at=0,Xl=null,my=Wd=As=0,Qt=El=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ps=null}return t}function VI(t,e){do{var n=et;try{if(ty(),rh.current=zh,$h){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$h=!1}if(Rs=0,ht=it=Ue=null,vl=!1,Kl=0,py.current=null,n===null||n.return===null){at=1,Xl=e,et=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=TE(o);if(y!==null){y.flags&=-257,SE(y,o,a,s,e),y.mode&1&&EE(s,c,e),e=y,l=c;var _=e.updateQueue;if(_===null){var w=new Set;w.add(l),e.updateQueue=w}else _.add(l);break e}else{if(!(e&1)){EE(s,c,e),vy();break e}l=Error($(426))}}else if(Me&&a.mode&1){var R=TE(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),SE(R,o,a,s,e),Z_(Wo(l,a));break e}}s=l=Wo(l,a),at!==4&&(at=2),El===null?El=[s]:El.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=wI(s,l,e);mE(s,T);break e;case 1:a=l;var E=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ai===null||!Ai.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=EI(s,a,e);mE(s,x);break e}}s=s.return}while(s!==null)}jI(n)}catch(L){e=L,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function FI(){var t=Wh.current;return Wh.current=zh,t===null?zh:t}function vy(){(at===0||at===3||at===2)&&(at=4),ft===null||!(As&268435455)&&!(Wd&268435455)||fi(ft,wt)}function Gh(t,e){var n=he;he|=2;var r=FI();(ft!==t||wt!==e)&&(Cr=null,vs(t,e));do try{tO();break}catch(i){VI(t,i)}while(!0);if(ty(),he=n,Wh.current=r,et!==null)throw Error($(261));return ft=null,wt=0,at}function tO(){for(;et!==null;)UI(et)}function nO(){for(;et!==null&&!AN();)UI(et)}function UI(t){var e=$I(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?jI(t):et=e,py.current=null}function jI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q2(n,e),n!==null){n.flags&=32767,et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,et=null;return}}else if(n=K2(n,e,ln),n!==null){et=n;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);at===0&&(at=5)}function us(t,e,n){var r=_e,i=kn.transition;try{kn.transition=null,_e=1,rO(t,e,n,r)}finally{kn.transition=i,_e=r}return null}function rO(t,e,n,r){do bo();while(vi!==null);if(he&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(VN(t,s),t===ft&&(et=ft=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vc||(Vc=!0,zI(kh,function(){return bo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kn.transition,kn.transition=null;var o=_e;_e=1;var a=he;he|=4,py.current=null,X2(t,n),DI(n,t),S2(tg),bh=!!eg,tg=eg=null,t.current=n,J2(n),kN(),he=a,_e=o,kn.transition=s}else t.current=n;if(Vc&&(Vc=!1,vi=t,qh=i),s=t.pendingLanes,s===0&&(Ai=null),xN(n.stateNode),tn(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hh)throw Hh=!1,t=Eg,Eg=null,t;return qh&1&&t.tag!==0&&bo(),s=t.pendingLanes,s&1?t===Tg?Tl++:(Tl=0,Tg=t):Tl=0,Qi(),null}function bo(){if(vi!==null){var t=wC(qh),e=kn.transition,n=_e;try{if(kn.transition=null,_e=16>t?16:t,vi===null)var r=!1;else{if(t=vi,vi=null,qh=0,he&6)throw Error($(331));var i=he;for(he|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:wl(8,h,s)}var d=h.child;if(d!==null)d.return=h,G=d;else for(;G!==null;){h=G;var p=h.sibling,y=h.return;if(xI(h),h===c){G=null;break}if(p!==null){p.return=y,G=p;break}G=y}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var R=w.sibling;w.sibling=null,w=R}while(w!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wl(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,G=T;break e}G=s.return}}var E=t.current;for(G=E;G!==null;){o=G;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,G=I;else e:for(o=E;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zd(9,a)}}catch(L){He(a,a.return,L)}if(a===o){G=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,G=x;break e}G=a.return}}if(he=i,Qi(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Ld,t)}catch{}r=!0}return r}finally{_e=n,kn.transition=e}}return!1}function ME(t,e,n){e=Wo(n,e),e=wI(t,e,1),t=Ri(t,e,1),e=Wt(),t!==null&&(Ru(t,1,e),tn(t,e))}function He(t,e,n){if(t.tag===3)ME(t,t,n);else for(;e!==null;){if(e.tag===3){ME(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=Wo(n,t),t=EI(e,t,1),e=Ri(e,t,1),t=Wt(),e!==null&&(Ru(e,1,t),tn(e,t));break}}e=e.return}}function iO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(wt&n)===n&&(at===4||at===3&&(wt&130023424)===wt&&500>Qe()-gy?vs(t,0):my|=n),tn(t,e)}function BI(t,e){e===0&&(t.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var n=Wt();t=zr(t,e),t!==null&&(Ru(t,e,n),tn(t,n))}function sO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BI(t,n)}function oO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),BI(t,n)}var $I;$I=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,G2(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,Me&&e.flags&1048576&&qC(e,Vh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sh(t,e),t=e.pendingProps;var i=jo(e,Lt.current);Po(e,n),i=uy(null,e,r,t,i,n);var s=cy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(r)?(s=!0,Lh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iy(e),i.updater=$d,e.stateNode=i,i._reactInternals=e,cg(e,r,t,n),e=fg(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&X_(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lO(r),t=Mn(r,t),i){case 0:e=dg(null,e,r,t,n);break e;case 1:e=RE(null,e,r,t,n);break e;case 11:e=CE(null,e,r,t,n);break e;case 14:e=IE(null,e,r,Mn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),dg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),RE(t,e,r,i,n);case 3:e:{if(II(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,JC(t,e),jh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wo(Error($(423)),e),e=AE(t,e,r,n,i);break e}else if(r!==i){i=Wo(Error($(424)),e),e=AE(t,e,r,n,i);break e}else for(cn=Ii(e.stateNode.containerInfo.firstChild),fn=e,Me=!0,Fn=null,n=YC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bo(),r===i){e=Wr(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return ZC(e),t===null&&ag(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ng(r,i)?o=null:s!==null&&ng(r,s)&&(e.flags|=32),CI(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&ag(e),null;case 13:return RI(t,e,n);case 4:return sy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),CE(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(Fh,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!Zt.current){e=Wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Po(e,n),i=xn(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=Mn(r,e.pendingProps),i=Mn(r.type,i),IE(t,e,r,i,n);case 15:return TI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),sh(t,e),e.tag=1,en(r)?(t=!0,Lh(e)):t=!1,Po(e,n),vI(e,r,i),cg(e,r,i,n),fg(null,e,r,!0,t,n);case 19:return AI(t,e,n);case 22:return SI(t,e,n)}throw Error($(156,e.tag))};function zI(t,e){return gC(t,e)}function aO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new aO(t,e,n,r)}function wy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lO(t){if(typeof t=="function")return wy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===U_)return 11;if(t===j_)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")wy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case uo:return ws(n.children,i,s,e);case F_:o=8,i|=8;break;case Dm:return t=An(12,n,e,i|2),t.elementType=Dm,t.lanes=s,t;case Lm:return t=An(13,n,e,i),t.elementType=Lm,t.lanes=s,t;case Mm:return t=An(19,n,e,i),t.elementType=Mm,t.lanes=s,t;case ZS:return Hd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case XS:o=10;break e;case JS:o=9;break e;case U_:o=11;break e;case j_:o=14;break e;case ci:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=An(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ws(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Hd(t,e,n,r){return t=An(22,t,r,e),t.elementType=ZS,t.lanes=n,t.stateNode={isHidden:!1},t}function Zp(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function em(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dp(0),this.expirationTimes=Dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ey(t,e,n,r,i,s,o,a,l){return t=new uO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=An(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iy(s),t}function cO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WI(t){if(!t)return Fi;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(en(n))return WC(t,n,e)}return e}function HI(t,e,n,r,i,s,o,a,l){return t=Ey(n,r,!0,t,i,s,o,a,l),t.context=WI(null),n=t.current,r=Wt(),i=ki(n),s=Mr(r,i),s.callback=e??null,Ri(n,s,i),t.current.lanes=i,Ru(t,i,r),tn(t,r),t}function qd(t,e,n,r){var i=e.current,s=Wt(),o=ki(i);return n=WI(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ri(i,e,o),t!==null&&(zn(t,i,o,s),nh(t,i,o)),o}function Kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ty(t,e){VE(t,e),(t=t.alternate)&&VE(t,e)}function hO(){return null}var qI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sy(t){this._internalRoot=t}Gd.prototype.render=Sy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));qd(t,e,null,null)};Gd.prototype.unmount=Sy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ks(function(){qd(null,t,null,null)}),e[$r]=null}};function Gd(t){this._internalRoot=t}Gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=SC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<di.length&&e!==0&&e<di[n].priority;n++);di.splice(n,0,t),n===0&&IC(t)}};function Cy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FE(){}function dO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Kh(o);s.call(c)}}var o=HI(e,r,t,0,null,!1,!1,"",FE);return t._reactRootContainer=o,t[$r]=o.current,zl(t.nodeType===8?t.parentNode:t),ks(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Kh(l);a.call(c)}}var l=Ey(t,0,!1,null,null,!1,!1,"",FE);return t._reactRootContainer=l,t[$r]=l.current,zl(t.nodeType===8?t.parentNode:t),ks(function(){qd(e,l,n,r)}),l}function Qd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Kh(o);a.call(l)}}qd(e,o,t,i)}else o=dO(n,e,t,i,r);return Kh(o)}EC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(z_(e,n|1),tn(e,Qe()),!(he&6)&&(Ho=Qe()+500,Qi()))}break;case 13:ks(function(){var r=zr(t,1);if(r!==null){var i=Wt();zn(r,t,1,i)}}),Ty(t,1)}};W_=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=Wt();zn(e,t,134217728,n)}Ty(t,134217728)}};TC=function(t){if(t.tag===13){var e=ki(t),n=zr(t,e);if(n!==null){var r=Wt();zn(n,t,e,r)}Ty(t,e)}};SC=function(){return _e};CC=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};qm=function(t,e,n){switch(e){case"input":if(Um(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ud(r);if(!i)throw Error($(90));tC(r),Um(r,i)}}}break;case"textarea":rC(t,n);break;case"select":e=n.value,e!=null&&Io(t,!!n.multiple,e,!1)}};cC=_y;hC=ks;var fO={usingClientEntryPoint:!1,Events:[ku,po,Ud,lC,uC,_y]},qa={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pO={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pC(t),t===null?null:t.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||hO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Ld=Fc.inject(pO),sr=Fc}catch{}}vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fO;vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cy(e))throw Error($(200));return cO(t,e,null,n)};vn.createRoot=function(t,e){if(!Cy(t))throw Error($(299));var n=!1,r="",i=qI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ey(t,1,!1,null,null,n,!1,r,i),t[$r]=e.current,zl(t.nodeType===8?t.parentNode:t),new Sy(e)};vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=pC(e),t=t===null?null:t.stateNode,t};vn.flushSync=function(t){return ks(t)};vn.hydrate=function(t,e,n){if(!Kd(e))throw Error($(200));return Qd(null,t,e,!0,n)};vn.hydrateRoot=function(t,e,n){if(!Cy(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=HI(e,null,t,1,n??null,i,!1,s,o),t[$r]=e.current,zl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gd(e)};vn.render=function(t,e,n){if(!Kd(e))throw Error($(200));return Qd(null,t,e,!1,n)};vn.unmountComponentAtNode=function(t){if(!Kd(t))throw Error($(40));return t._reactRootContainer?(ks(function(){Qd(null,null,t,!1,function(){t._reactRootContainer=null,t[$r]=null})}),!0):!1};vn.unstable_batchedUpdates=_y;vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kd(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Qd(t,e,n,!1,r)};vn.version="18.3.1-next-f1338f8080-20240426";function GI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GI)}catch(t){console.error(t)}}GI(),GS.exports=vn;var mO=GS.exports,UE=mO;Nm.createRoot=UE.createRoot,Nm.hydrateRoot=UE.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jl.apply(this,arguments)}var wi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wi||(wi={}));const jE="popstate";function gO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ig("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Qh(i)}return yO(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function KI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _O(){return Math.random().toString(36).substr(2,8)}function BE(t,e){return{usr:t.state,key:t.key,idx:e}}function Ig(t,e,n,r){return n===void 0&&(n=null),Jl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ca(e):e,{state:n,key:e&&e.key||r||_O()})}function Qh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=wi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Jl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=wi.Pop;let R=h(),T=R==null?null:R-c;c=R,l&&l({action:a,location:w.location,delta:T})}function p(R,T){a=wi.Push;let E=Ig(w.location,R,T);c=h()+1;let I=BE(E,c),x=w.createHref(E);try{o.pushState(I,"",x)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(x)}s&&l&&l({action:a,location:w.location,delta:1})}function y(R,T){a=wi.Replace;let E=Ig(w.location,R,T);c=h();let I=BE(E,c),x=w.createHref(E);o.replaceState(I,"",x),s&&l&&l({action:a,location:w.location,delta:0})}function _(R){let T=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof R=="string"?R:Qh(R);return E=E.replace(/ $/,"%20"),Ye(T,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,T)}let w={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jE,d),l=R,()=>{i.removeEventListener(jE,d),l=null}},createHref(R){return e(i,R)},createURL:_,encodeLocation(R){let T=_(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:y,go(R){return o.go(R)}};return w}var $E;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($E||($E={}));function vO(t,e,n){return n===void 0&&(n="/"),wO(t,e,n,!1)}function wO(t,e,n,r){let i=typeof e=="string"?ca(e):e,s=Iy(i.pathname||"/",n);if(s==null)return null;let o=QI(t);EO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=NO(s);a=bO(o[l],c,r)}return a}function QI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=bi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),QI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kO(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of YI(s.path))i(s,o,l)}),e}function YI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=YI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function EO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TO=/^:[\w-]+$/,SO=3,CO=2,IO=1,RO=10,AO=-2,zE=t=>t==="*";function kO(t,e){let n=t.split("/"),r=n.length;return n.some(zE)&&(r+=AO),e&&(r+=CO),n.filter(i=>!zE(i)).reduce((i,s)=>i+(TO.test(s)?SO:s===""?IO:RO),r)}function PO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bO(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=WE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=WE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:bi([s,d.pathname]),pathnameBase:MO(bi([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=bi([s,d.pathnameBase]))}return o}function WE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[d];return y&&!_?c[p]=void 0:c[p]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function xO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),KI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function NO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return KI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Iy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function OO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ca(t):t;return{pathname:n?n.startsWith("/")?n:DO(n,e):e,search:VO(r),hash:FO(i)}}function DO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ry(t,e){let n=LO(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ay(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ca(t):(i=Jl({},t),Ye(!i.pathname||!i.pathname.includes("?"),tm("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),tm("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),tm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=OO(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const bi=t=>t.join("/").replace(/\/\/+/g,"/"),MO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XI=["post","put","patch","delete"];new Set(XI);const jO=["get",...XI];new Set(jO);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zl.apply(this,arguments)}const ky=V.createContext(null),BO=V.createContext(null),Yi=V.createContext(null),Yd=V.createContext(null),Xi=V.createContext({outlet:null,matches:[],isDataRoute:!1}),JI=V.createContext(null);function $O(t,e){let{relative:n}=e===void 0?{}:e;ha()||Ye(!1);let{basename:r,navigator:i}=V.useContext(Yi),{hash:s,pathname:o,search:a}=eR(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:bi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ha(){return V.useContext(Yd)!=null}function da(){return ha()||Ye(!1),V.useContext(Yd).location}function ZI(t){V.useContext(Yi).static||V.useLayoutEffect(t)}function bu(){let{isDataRoute:t}=V.useContext(Xi);return t?tD():zO()}function zO(){ha()||Ye(!1);let t=V.useContext(ky),{basename:e,future:n,navigator:r}=V.useContext(Yi),{matches:i}=V.useContext(Xi),{pathname:s}=da(),o=JSON.stringify(Ry(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return ZI(()=>{a.current=!0}),V.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Ay(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:bi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function eR(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(Yi),{matches:i}=V.useContext(Xi),{pathname:s}=da(),o=JSON.stringify(Ry(i,r.v7_relativeSplatPath));return V.useMemo(()=>Ay(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function WO(t,e){return HO(t,e)}function HO(t,e,n,r){ha()||Ye(!1);let{navigator:i}=V.useContext(Yi),{matches:s}=V.useContext(Xi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=da(),h;if(e){var d;let R=typeof e=="string"?ca(e):e;l==="/"||(d=R.pathname)!=null&&d.startsWith(l)||Ye(!1),h=R}else h=c;let p=h.pathname||"/",y=p;if(l!=="/"){let R=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=vO(t,{pathname:y}),w=YO(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:bi([l,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:bi([l,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&w?V.createElement(Yd.Provider,{value:{location:Zl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:wi.Pop}},w):w}function qO(){let t=eD(),e=UO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const GO=V.createElement(qO,null);class KO extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Xi.Provider,{value:this.props.routeContext},V.createElement(JI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QO(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(ky);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Xi.Provider,{value:e},r)}function YO(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);h>=0||Ye(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:y}=n,_=d.route.loader&&p[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let y,_=!1,w=null,R=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||GO,l&&(c<0&&p===0?(_=!0,R=null):c===p&&(_=!0,R=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),E=()=>{let I;return y?I=w:_?I=R:d.route.Component?I=V.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=h,V.createElement(QO,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:I})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?V.createElement(KO,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}var tR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tR||{}),Yh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yh||{});function XO(t){let e=V.useContext(ky);return e||Ye(!1),e}function JO(t){let e=V.useContext(BO);return e||Ye(!1),e}function ZO(t){let e=V.useContext(Xi);return e||Ye(!1),e}function nR(t){let e=ZO(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function eD(){var t;let e=V.useContext(JI),n=JO(Yh.UseRouteError),r=nR(Yh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tD(){let{router:t}=XO(tR.UseNavigateStable),e=nR(Yh.UseNavigateStable),n=V.useRef(!1);return ZI(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Zl({fromRouteId:e},s)))},[t,e])}function HE(t){let{to:e,replace:n,state:r,relative:i}=t;ha()||Ye(!1);let{future:s,static:o}=V.useContext(Yi),{matches:a}=V.useContext(Xi),{pathname:l}=da(),c=bu(),h=Ay(e,Ry(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return V.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Sn(t){Ye(!1)}function nD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=wi.Pop,navigator:s,static:o=!1,future:a}=t;ha()&&Ye(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:s,static:o,future:Zl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ca(r));let{pathname:h="/",search:d="",hash:p="",state:y=null,key:_="default"}=r,w=V.useMemo(()=>{let R=Iy(h,l);return R==null?null:{location:{pathname:R,search:d,hash:p,state:y,key:_},navigationType:i}},[l,h,d,p,y,_,i]);return w==null?null:V.createElement(Yi.Provider,{value:c},V.createElement(Yd.Provider,{children:n,value:w}))}function rR(t){let{children:e,location:n}=t;return WO(Rg(e),n)}new Promise(()=>{});function Rg(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,Rg(r.props.children,s));return}r.type!==Sn&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ag(){return Ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ag.apply(this,arguments)}function rD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function iD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sD(t,e){return t.button===0&&(!e||e==="_self")&&!iD(t)}const oD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aD="6";try{window.__reactRouterVersion=aD}catch{}const lD="startTransition",qE=xm[lD];function uD(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=gO({window:i,v5Compat:!0}));let o=s.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=V.useCallback(d=>{c&&qE?qE(()=>l(d)):l(d)},[l,c]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.createElement(nD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const cD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rr=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=rD(e,oD),{basename:y}=V.useContext(Yi),_,w=!1;if(typeof c=="string"&&hD.test(c)&&(_=c,cD))try{let I=new URL(window.location.href),x=c.startsWith("//")?new URL(I.protocol+c):new URL(c),L=Iy(x.pathname,y);x.origin===I.origin&&L!=null?c=L+x.search+x.hash:w=!0}catch{}let R=$O(c,{relative:i}),T=dD(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function E(I){r&&r(I),I.defaultPrevented||T(I)}return V.createElement("a",Ag({},p,{href:_||R,onClick:w||s?r:E,ref:n,target:l}))});var GE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(GE||(GE={}));var KE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(KE||(KE={}));function dD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=bu(),c=da(),h=eR(t,{relative:o});return V.useCallback(d=>{if(sD(d,n)){d.preventDefault();let p=r!==void 0?r:Qh(c)===Qh(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var QE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw fa(e)},fa=function(t){return new Error("Firebase Database ("+iR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(n[h],n[d],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new pD;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oR=function(t){const e=sR(t);return Py.encodeByteArray(e,!0)},Xh=function(t){return oR(t).replace(/\./g,"")},Jh=function(t){try{return Py.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){return aR(void 0,t)}function aR(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!gD(n)||(t[n]=aR(t[n],e[n]));return t}function gD(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=()=>_D().__FIREBASE_DEFAULTS__,vD=()=>{if(typeof process>"u"||typeof QE>"u")return;const t=QE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jh(t[1]);return e&&JSON.parse(e)},Xd=()=>{try{return yD()||vD()||wD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lR=t=>{var e,n;return(n=(e=Xd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},by=t=>{const e=lR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uR=()=>{var t;return(t=Xd())===null||t===void 0?void 0:t.config},cR=t=>{var e;return(e=Xd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xh(JSON.stringify(n)),Xh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function ED(){var t;const e=(t=Xd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CD(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dR(){return iR.NODE_ADMIN===!0}function ID(){return!ED()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RD(){try{return typeof indexedDB=="object"}catch{return!1}}function AD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kD,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pr(i,a,r)}}function PD(t,e){return t.replace(bD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){return JSON.parse(t)}function st(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=eu(Jh(s[0])||""),n=eu(Jh(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},xD=function(t){const e=fR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ND=function(t){const e=fR(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zh(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ed(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(YE(s)&&YE(o)){if(!ed(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function YE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ol(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function al(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function DD(t,e){const n=new LD(t,e);return n.subscribe.bind(n)}class LD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=nm),i.error===void 0&&(i.error=nm),i.complete===void 0&&(i.complete=nm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nm(){}function pR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,z(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jd=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jD(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UD(t){return t===cs?void 0:t}function jD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const $D={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},zD=ae.INFO,WD={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},HD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=zD,this._logHandler=HD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$D[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const qD=(t,e)=>e.some(n=>t instanceof n);let XE,JE;function GD(){return XE||(XE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KD(){return JE||(JE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mR=new WeakMap,Pg=new WeakMap,gR=new WeakMap,rm=new WeakMap,Dy=new WeakMap;function QD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mR.set(n,t)}).catch(()=>{}),Dy.set(e,t),e}function YD(t){if(Pg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Pg.set(t,e)}let bg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XD(t){bg=t(bg)}function JD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(im(this),e,...n);return gR.set(r,e.sort?e.sort():[e]),xi(r)}:KD().includes(t)?function(...e){return t.apply(im(this),e),xi(mR.get(this))}:function(...e){return xi(t.apply(im(this),e))}}function ZD(t){return typeof t=="function"?JD(t):(t instanceof IDBTransaction&&YD(t),qD(t,GD())?new Proxy(t,bg):t)}function xi(t){if(t instanceof IDBRequest)return QD(t);if(rm.has(t))return rm.get(t);const e=ZD(t);return e!==t&&(rm.set(t,e),Dy.set(e,t)),e}const im=t=>Dy.get(t);function eL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xi(o.result),l.oldVersion,l.newVersion,xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const tL=["get","getKey","getAll","getAllKeys","count"],nL=["put","add","delete","clear"],sm=new Map;function ZE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return sm.set(e,s),s}XD(t=>({...t,get:(e,n,r)=>ZE(e,n)||t.get(e,n,r),has:(e,n)=>!!ZE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iL(t){const e=t.getComponent();return e?.type==="VERSION"}const xg="@firebase/app",e1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Zd("@firebase/app"),sL="@firebase/app-compat",oL="@firebase/analytics-compat",aL="@firebase/analytics",lL="@firebase/app-check-compat",uL="@firebase/app-check",cL="@firebase/auth",hL="@firebase/auth-compat",dL="@firebase/database",fL="@firebase/data-connect",pL="@firebase/database-compat",mL="@firebase/functions",gL="@firebase/functions-compat",_L="@firebase/installations",yL="@firebase/installations-compat",vL="@firebase/messaging",wL="@firebase/messaging-compat",EL="@firebase/performance",TL="@firebase/performance-compat",SL="@firebase/remote-config",CL="@firebase/remote-config-compat",IL="@firebase/storage",RL="@firebase/storage-compat",AL="@firebase/firestore",kL="@firebase/vertexai-preview",PL="@firebase/firestore-compat",bL="firebase",xL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="[DEFAULT]",NL={[xg]:"fire-core",[sL]:"fire-core-compat",[aL]:"fire-analytics",[oL]:"fire-analytics-compat",[uL]:"fire-app-check",[lL]:"fire-app-check-compat",[cL]:"fire-auth",[hL]:"fire-auth-compat",[dL]:"fire-rtdb",[fL]:"fire-data-connect",[pL]:"fire-rtdb-compat",[mL]:"fire-fn",[gL]:"fire-fn-compat",[_L]:"fire-iid",[yL]:"fire-iid-compat",[vL]:"fire-fcm",[wL]:"fire-fcm-compat",[EL]:"fire-perf",[TL]:"fire-perf-compat",[SL]:"fire-rc",[CL]:"fire-rc-compat",[IL]:"fire-gcs",[RL]:"fire-gcs-compat",[AL]:"fire-fst",[PL]:"fire-fst-compat",[kL]:"fire-vertex","fire-js":"fire-js",[bL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,OL=new Map,Og=new Map;function t1(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ui(t){const e=t.name;if(Og.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,t);for(const n of td.values())t1(n,t);for(const n of OL.values())t1(n,t);return!0}function Nu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new xu("app","Firebase",DL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=xL;function _R(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ng,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=uR()),!n)throw Ni.create("no-options");const s=td.get(i);if(s){if(ed(n,s.options)&&ed(r,s.config))return s;throw Ni.create("duplicate-app",{appName:i})}const o=new BD(i);for(const l of Og.values())o.addComponent(l);const a=new LL(n,r,o);return td.set(i,a),a}function ef(t=Ng){const e=td.get(t);if(!e&&t===Ng&&uR())return _R();if(!e)throw Ni.create("no-app",{appName:t});return e}function Pn(t,e,n){var r;let i=(r=NL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}Ui(new Hr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML="firebase-heartbeat-database",VL=1,tu="firebase-heartbeat-store";let om=null;function yR(){return om||(om=eL(ML,VL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),om}async function FL(t){try{const n=(await yR()).transaction(tu),r=await n.objectStore(tu).get(vR(t));return await n.done,r}catch(e){if(e instanceof pr)qr.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e?.message});qr.warn(n.message)}}}async function n1(t,e){try{const r=(await yR()).transaction(tu,"readwrite");await r.objectStore(tu).put(e,vR(t)),await r.done}catch(n){if(n instanceof pr)qr.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n?.message});qr.warn(r.message)}}}function vR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=1024,jL=30*24*60*60*1e3;class BL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=r1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=jL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r1(),{heartbeatsToSend:r,unsentEntries:i}=$L(this._heartbeatsCache.heartbeats),s=Xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return qr.warn(n),""}}}function r1(){return new Date().toISOString().substring(0,10)}function $L(t,e=UL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),i1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RD()?AD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i1(t){return Xh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){Ui(new Hr("platform-logger",e=>new rL(e),"PRIVATE")),Ui(new Hr("heartbeat",e=>new BL(e),"PRIVATE")),Pn(xg,e1,t),Pn(xg,e1,"esm2017"),Pn("fire-js","")}WL("");var HL="firebase",qL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(HL,qL,"app");function Ly(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GL=wR,ER=new xu("auth","Firebase",wR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Zd("@firebase/auth");function KL(t,...e){nd.logLevel<=ae.WARN&&nd.warn(`Auth (${Ji}): ${t}`,...e)}function uh(t,...e){nd.logLevel<=ae.ERROR&&nd.error(`Auth (${Ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw My(t,...e)}function ar(t,...e){return My(t,...e)}function TR(t,e,n){const r=Object.assign(Object.assign({},GL()),{[e]:n});return new xu("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return TR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function My(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ER.create(t,...e)}function X(t,e,...n){if(!t)throw My(e,...n)}function xr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uh(e),new Error(e)}function Gr(t,e){t||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QL(){return s1()==="http:"||s1()==="https:"}function s1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QL()||SD()||"connection"in navigator)?navigator.onLine:!0}function XL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=Oy()||hR()}get(){return YL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e){Gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new Ou(3e4,6e4);function Zi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function es(t,e,n,r,i={}){return CR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=pa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return TD()||(c.referrerPolicy="no-referrer"),SR.fetch()(IR(t,t.config.apiHost,n,a),c)})}async function CR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JL),e);try{const i=new tM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Uc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Uc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Uc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw TR(t,h,c);qn(t,h)}}catch(i){if(i instanceof pr)throw i;qn(t,"network-request-failed",{message:String(i)})}}async function Du(t,e,n,r,i={}){const s=await es(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function IR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Vy(t.config,i):`${t.config.apiScheme}://${i}`}function eM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),ZL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ar(t,e,r);return i.customData._tokenResponse=n,i}function o1(t){return t!==void 0&&t.enterprise!==void 0}class nM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function rM(t,e){return es(t,"GET","/v2/recaptchaConfig",Zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e){return es(t,"POST","/v1/accounts:delete",e)}async function RR(t,e){return es(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sM(t,e=!1){const n=Ce(t),r=await n.getIdToken(e),i=Fy(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Sl(am(i.auth_time)),issuedAtTime:Sl(am(i.iat)),expirationTime:Sl(am(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function am(t){return Number(t)*1e3}function Fy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jh(n);return i?JSON.parse(i):(uh("Failed to decode base64 JWT payload"),null)}catch(i){return uh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function a1(t){const e=Fy(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&oM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await nu(t,RR(n,{idToken:r}));X(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?AR(s.providerUserInfo):[],a=uM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!a?.length,h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function lM(t){const e=Ce(t);await rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AR(t){return t.map(e=>{var{providerId:n}=e,r=Ly(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e){const n=await CR(t,{},async()=>{const r=pa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=IR(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",SR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hM(t,e){return es(t,"POST","/v2/accounts:revokeToken",Zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=a1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await cM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xo;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ly(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sM(this,e)}reload(){return lM(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await nu(this,iM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:x,isAnonymous:L,providerData:O,stsTokenManager:C}=n;X(I&&C,e,"internal-error");const v=xo.fromJSON(this.name,C);X(typeof I=="string",e,"internal-error"),ai(d,e.name),ai(p,e.name),X(typeof x=="boolean",e,"internal-error"),X(typeof L=="boolean",e,"internal-error"),ai(y,e.name),ai(_,e.name),ai(w,e.name),ai(R,e.name),ai(T,e.name),ai(E,e.name);const A=new Nr({uid:I,auth:e,email:p,emailVerified:x,displayName:d,isAnonymous:L,photoURL:_,phoneNumber:y,tenantId:w,stsTokenManager:v,createdAt:T,lastLoginAt:E});return O&&Array.isArray(O)&&(A.providerData=O.map(m=>Object.assign({},m))),R&&(A._redirectEventId=R),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new xo;i.updateFromServerResponse(n);const s=new Nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];X(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?AR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new xo;a.updateFromIdToken(r);const l=new Nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Lg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Map;function Or(t){Gr(t instanceof Function,"Expected a class definition");let e=l1.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kR.type="NONE";const u1=kR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t,e,n){return`firebase:${t}:${e}:${n}`}class No{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ch(this.userKey,i.apiKey,s),this.fullPersistenceKey=ch("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new No(Or(u1),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Or(u1);const o=ch(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Nr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new No(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new No(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DR(e))return"Blackberry";if(LR(e))return"Webos";if(bR(e))return"Safari";if((e.includes("chrome/")||xR(e))&&!e.includes("edge/"))return"Chrome";if(OR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function PR(t=Mt()){return/firefox\//i.test(t)}function bR(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xR(t=Mt()){return/crios\//i.test(t)}function NR(t=Mt()){return/iemobile/i.test(t)}function OR(t=Mt()){return/android/i.test(t)}function DR(t=Mt()){return/blackberry/i.test(t)}function LR(t=Mt()){return/webos/i.test(t)}function Uy(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dM(t=Mt()){var e;return Uy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fM(){return CD()&&document.documentMode===10}function MR(t=Mt()){return Uy(t)||OR(t)||LR(t)||DR(t)||/windows phone/i.test(t)||NR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e=[]){let n;switch(t){case"Browser":n=c1(Mt());break;case"Worker":n=`${c1(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e={}){return es(t,"GET","/v2/passwordPolicy",Zi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=6;class _M{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h1(this),this.idTokenSubscription=new h1(this),this.beforeStateQueue=new pM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ER,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Or(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await RR(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(nr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Vr(this));const n=e?Ce(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mM(this),n=new _M(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Or(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&KL(`Error while retrieving App Check token: ${n.error}`),n?.token}}function $s(t){return Ce(t)}class h1{constructor(e){this.auth=e,this.observer=null,this.addObserver=DD(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vM(t){tf=t}function FR(t){return tf.loadJS(t)}function wM(){return tf.recaptchaEnterpriseScript}function EM(){return tf.gapiScript}function TM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SM="recaptcha-enterprise",CM="NO_RECAPTCHA";class IM{constructor(e){this.type=SM,this.auth=$s(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{rM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new nM(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;o1(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(CM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&o1(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wM();l.length!==0&&(l+=a),FR(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function d1(t,e,n,r=!1){const i=new IM(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Mg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await d1(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await d1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t,e){const n=Nu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ed(s,e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}function AM(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Or);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function kM(t,e,n){const r=$s(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=UR(e),{host:o,port:a}=PM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),bM()}function UR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PM(t){const e=UR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:f1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:f1(o)}}}function f1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,n){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function xM(t,e){return es(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e){return Du(t,"POST","/v1/accounts:signInWithPassword",Zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e){return Du(t,"POST","/v1/accounts:signInWithEmailLink",Zi(t,e))}async function DM(t,e){return Du(t,"POST","/v1/accounts:signInWithEmailLink",Zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends jy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ru(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ru(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,n,"signInWithPassword",NM);case"emailLink":return OM(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,r,"signUpPassword",xM);case"emailLink":return DM(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t,e){return Du(t,"POST","/v1/accounts:signInWithIdp",Zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="http://localhost";class Ps extends jy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ly(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ps(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:LM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VM(t){const e=ol(al(t)).link,n=e?ol(al(e)).deep_link_id:null,r=ol(al(t)).deep_link_id;return(r?ol(al(r)).link:null)||r||n||e||t}class By{constructor(e){var n,r,i,s,o,a;const l=ol(al(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=MM((i=l.mode)!==null&&i!==void 0?i:null);X(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=VM(e);try{return new By(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.providerId=ma.PROVIDER_ID}static credential(e,n){return ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=By.parseLink(n);return X(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}ma.PROVIDER_ID="password";ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends jR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Lu{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mi.credential(n,r)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Lu{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Lu{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _i.credential(n,r)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return Du(t,"POST","/v1/accounts:signUp",Zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nr._fromIdTokenResponse(e,r,i),o=p1(r);return new bs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=p1(r);return new bs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function p1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,id.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new id(e,n,r,i)}}function BR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?id._fromErrorAndOperation(t,s,e,r):s})}async function UM(t,e,n=!1){const r=await nu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(t,e,n=!1){const{auth:r}=t;if(nr(r.app))return Promise.reject(Vr(r));const i="reauthenticate";try{const s=await nu(t,BR(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=Fy(s.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),bs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e,n=!1){if(nr(t.app))return Promise.reject(Vr(t));const r="signIn",i=await BR(t,r,e),s=await bs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function BM(t,e){return $R($s(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t){const e=$s(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $M(t,e,n){if(nr(t.app))return Promise.reject(Vr(t));const r=$s(t),o=await Mg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&zR(t),l}),a=await bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function zM(t,e,n){return nr(t.app)?Promise.reject(Vr(t)):BM(Ce(t),ma.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zR(t),r})}function WM(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function HM(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function WR(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1e3,GM=10;class qR extends HR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);fM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,GM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qR.type="LOCAL";const KM=qR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR extends HR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GR.type="SESSION";const KR=GR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new nf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await QM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=$y("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function XM(t){lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function JM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZM(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function e4(){return QR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="firebaseLocalStorageDb",t4=1,od="firebaseLocalStorage",XR="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rf(t,e){return t.transaction([od],e?"readwrite":"readonly").objectStore(od)}function n4(){const t=indexedDB.deleteDatabase(YR);return new Mu(t).toPromise()}function Vg(){const t=indexedDB.open(YR,t4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(od,{keyPath:XR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(od)?e(r):(r.close(),await n4(),e(await Vg()))})})}async function m1(t,e,n){const r=rf(t,!0).put({[XR]:e,value:n});return new Mu(r).toPromise()}async function r4(t,e){const n=rf(t,!1).get(e),r=await new Mu(n).toPromise();return r===void 0?null:r.value}function g1(t,e){const n=rf(t,!0).delete(e);return new Mu(n).toPromise()}const i4=800,s4=3;class JR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>s4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(e4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await JM(),!this.activeServiceWorker)return;this.sender=new YM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await m1(e,sd,"1"),await g1(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>r4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=rf(i,!1).getAll();return new Mu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JR.type="LOCAL";const o4=JR;new Ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t,e){return e?Or(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends jy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function l4(t){return $R(t.auth,new zy(t),t.bypassAuthState)}function u4(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),jM(n,new zy(t),t.bypassAuthState)}async function c4(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),UM(n,new zy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l4;case"linkViaPopup":case"linkViaRedirect":return c4;case"reauthViaPopup":case"reauthViaRedirect":return u4;default:qn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Ou(2e3,1e4);class Eo extends ZR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=$y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h4.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="pendingRedirect",hh=new Map;class f4 extends ZR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hh.get(this.auth._key());if(!e){try{const r=await p4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hh.set(this.auth._key(),e)}return this.bypassAuthState||hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p4(t,e){const n=_4(e),r=g4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function m4(t,e){hh.set(t._key(),e)}function g4(t){return Or(t._redirectPersistence)}function _4(t){return ch(d4,t.config.apiKey,t.name)}async function y4(t,e,n=!1){if(nr(t.app))return Promise.reject(Vr(t));const r=$s(t),i=a4(r,e),o=await new f4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=10*60*1e3;class w4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ar(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v4&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function E4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e={}){return es(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C4=/^https?/;async function I4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T4(t);for(const n of e)try{if(R4(n))return}catch{}qn(t,"unauthorized-domain")}function R4(t){const e=Dg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!C4.test(n))return!1;if(S4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new Ou(3e4,6e4);function y1(){const t=lr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k4(t){return new Promise((e,n)=>{var r,i,s;function o(){y1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y1(),n(ar(t,"network-request-failed"))},timeout:A4.get()})}if(!((i=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lr().gapi)===null||s===void 0)&&s.load)o();else{const a=TM("iframefcb");return lr()[a]=()=>{gapi.load?o():n(ar(t,"network-request-failed"))},FR(`${EM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw dh=null,e})}let dh=null;function P4(t){return dh=dh||k4(t),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new Ou(5e3,15e3),x4="__/auth/iframe",N4="emulator/auth/iframe",O4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L4(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vy(e,N4):`https://${t.config.authDomain}/${x4}`,r={apiKey:e.apiKey,appName:t.name,v:Ji},i=D4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pa(r).slice(1)}`}async function M4(t){const e=await P4(t),n=lr().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:L4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ar(t,"network-request-failed"),a=lr().setTimeout(()=>{s(o)},b4.get());function l(){lr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F4=500,U4=600,j4="_blank",B4="http://localhost";class v1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $4(t,e,n,r=F4,i=U4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},V4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Mt().toLowerCase();n&&(a=xR(c)?j4:n),PR(c)&&(e=e||B4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,_])=>`${p}${y}=${_},`,"");if(dM(c)&&a!=="_self")return z4(e||"",a),new v1(null);const d=window.open(e||"",a,h);X(d,t,"popup-blocked");try{d.focus()}catch{}return new v1(d)}function z4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="__/auth/handler",H4="emulator/auth/handler",q4=encodeURIComponent("fac");async function w1(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ji,eventId:i};if(e instanceof jR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Lu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${q4}=${encodeURIComponent(l)}`:"";return`${G4(t)}?${pa(a).slice(1)}${c}`}function G4({config:t}){return t.emulator?Vy(t,H4):`https://${t.authDomain}/${W4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="webStorageSupport";class K4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KR,this._completeRedirectFn=y4,this._overrideRedirectResult=m4}async _openPopup(e,n,r,i){var s;Gr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await w1(e,n,r,Dg(),i);return $4(e,o,$y())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await w1(e,n,r,Dg(),i);return XM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await M4(e),r=new w4(e);return n.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lm,{type:lm},i=>{var s;const o=(s=i?.[0])===null||s===void 0?void 0:s[lm];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MR()||bR()||Uy()}}const Q4=K4;var E1="@firebase/auth",T1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J4(t){Ui(new Hr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VR(t)},c=new yM(r,i,s,l);return AM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ui(new Hr("auth-internal",e=>{const n=$s(e.getProvider("auth").getImmediate());return(r=>new Y4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(E1,T1,X4(t)),Pn(E1,T1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=5*60,eV=cR("authIdTokenMaxAge")||Z4;let S1=null;const tV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eV)return;const i=n?.token;S1!==i&&(S1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tA(t=ef()){const e=Nu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RM(t,{popupRedirectResolver:Q4,persistence:[o4,KM,KR]}),r=cR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=tV(s.toString());HM(n,o,()=>o(n.currentUser)),WM(n,a=>o(a))}}const i=lR("auth");return i&&kM(n,`http://${i}`),n}function nV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ar("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J4("Browser");var C1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,nA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,v){function A(){}A.prototype=v.prototype,C.D=v.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(m,k,N){for(var b=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)b[ke-2]=arguments[ke];return v.prototype[k].apply(m,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,A){A||(A=0);var m=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)m[k]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(k=0;16>k;++k)m[k]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=C.g[0],A=C.g[1],k=C.g[2];var N=C.g[3],b=v+(N^A&(k^N))+m[0]+3614090360&4294967295;v=A+(b<<7&4294967295|b>>>25),b=N+(k^v&(A^k))+m[1]+3905402710&4294967295,N=v+(b<<12&4294967295|b>>>20),b=k+(A^N&(v^A))+m[2]+606105819&4294967295,k=N+(b<<17&4294967295|b>>>15),b=A+(v^k&(N^v))+m[3]+3250441966&4294967295,A=k+(b<<22&4294967295|b>>>10),b=v+(N^A&(k^N))+m[4]+4118548399&4294967295,v=A+(b<<7&4294967295|b>>>25),b=N+(k^v&(A^k))+m[5]+1200080426&4294967295,N=v+(b<<12&4294967295|b>>>20),b=k+(A^N&(v^A))+m[6]+2821735955&4294967295,k=N+(b<<17&4294967295|b>>>15),b=A+(v^k&(N^v))+m[7]+4249261313&4294967295,A=k+(b<<22&4294967295|b>>>10),b=v+(N^A&(k^N))+m[8]+1770035416&4294967295,v=A+(b<<7&4294967295|b>>>25),b=N+(k^v&(A^k))+m[9]+2336552879&4294967295,N=v+(b<<12&4294967295|b>>>20),b=k+(A^N&(v^A))+m[10]+4294925233&4294967295,k=N+(b<<17&4294967295|b>>>15),b=A+(v^k&(N^v))+m[11]+2304563134&4294967295,A=k+(b<<22&4294967295|b>>>10),b=v+(N^A&(k^N))+m[12]+1804603682&4294967295,v=A+(b<<7&4294967295|b>>>25),b=N+(k^v&(A^k))+m[13]+4254626195&4294967295,N=v+(b<<12&4294967295|b>>>20),b=k+(A^N&(v^A))+m[14]+2792965006&4294967295,k=N+(b<<17&4294967295|b>>>15),b=A+(v^k&(N^v))+m[15]+1236535329&4294967295,A=k+(b<<22&4294967295|b>>>10),b=v+(k^N&(A^k))+m[1]+4129170786&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^k&(v^A))+m[6]+3225465664&4294967295,N=v+(b<<9&4294967295|b>>>23),b=k+(v^A&(N^v))+m[11]+643717713&4294967295,k=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(k^N))+m[0]+3921069994&4294967295,A=k+(b<<20&4294967295|b>>>12),b=v+(k^N&(A^k))+m[5]+3593408605&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^k&(v^A))+m[10]+38016083&4294967295,N=v+(b<<9&4294967295|b>>>23),b=k+(v^A&(N^v))+m[15]+3634488961&4294967295,k=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(k^N))+m[4]+3889429448&4294967295,A=k+(b<<20&4294967295|b>>>12),b=v+(k^N&(A^k))+m[9]+568446438&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^k&(v^A))+m[14]+3275163606&4294967295,N=v+(b<<9&4294967295|b>>>23),b=k+(v^A&(N^v))+m[3]+4107603335&4294967295,k=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(k^N))+m[8]+1163531501&4294967295,A=k+(b<<20&4294967295|b>>>12),b=v+(k^N&(A^k))+m[13]+2850285829&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^k&(v^A))+m[2]+4243563512&4294967295,N=v+(b<<9&4294967295|b>>>23),b=k+(v^A&(N^v))+m[7]+1735328473&4294967295,k=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(k^N))+m[12]+2368359562&4294967295,A=k+(b<<20&4294967295|b>>>12),b=v+(A^k^N)+m[5]+4294588738&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^k)+m[8]+2272392833&4294967295,N=v+(b<<11&4294967295|b>>>21),b=k+(N^v^A)+m[11]+1839030562&4294967295,k=N+(b<<16&4294967295|b>>>16),b=A+(k^N^v)+m[14]+4259657740&4294967295,A=k+(b<<23&4294967295|b>>>9),b=v+(A^k^N)+m[1]+2763975236&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^k)+m[4]+1272893353&4294967295,N=v+(b<<11&4294967295|b>>>21),b=k+(N^v^A)+m[7]+4139469664&4294967295,k=N+(b<<16&4294967295|b>>>16),b=A+(k^N^v)+m[10]+3200236656&4294967295,A=k+(b<<23&4294967295|b>>>9),b=v+(A^k^N)+m[13]+681279174&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^k)+m[0]+3936430074&4294967295,N=v+(b<<11&4294967295|b>>>21),b=k+(N^v^A)+m[3]+3572445317&4294967295,k=N+(b<<16&4294967295|b>>>16),b=A+(k^N^v)+m[6]+76029189&4294967295,A=k+(b<<23&4294967295|b>>>9),b=v+(A^k^N)+m[9]+3654602809&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^k)+m[12]+3873151461&4294967295,N=v+(b<<11&4294967295|b>>>21),b=k+(N^v^A)+m[15]+530742520&4294967295,k=N+(b<<16&4294967295|b>>>16),b=A+(k^N^v)+m[2]+3299628645&4294967295,A=k+(b<<23&4294967295|b>>>9),b=v+(k^(A|~N))+m[0]+4096336452&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~k))+m[7]+1126891415&4294967295,N=v+(b<<10&4294967295|b>>>22),b=k+(v^(N|~A))+m[14]+2878612391&4294967295,k=N+(b<<15&4294967295|b>>>17),b=A+(N^(k|~v))+m[5]+4237533241&4294967295,A=k+(b<<21&4294967295|b>>>11),b=v+(k^(A|~N))+m[12]+1700485571&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~k))+m[3]+2399980690&4294967295,N=v+(b<<10&4294967295|b>>>22),b=k+(v^(N|~A))+m[10]+4293915773&4294967295,k=N+(b<<15&4294967295|b>>>17),b=A+(N^(k|~v))+m[1]+2240044497&4294967295,A=k+(b<<21&4294967295|b>>>11),b=v+(k^(A|~N))+m[8]+1873313359&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~k))+m[15]+4264355552&4294967295,N=v+(b<<10&4294967295|b>>>22),b=k+(v^(N|~A))+m[6]+2734768916&4294967295,k=N+(b<<15&4294967295|b>>>17),b=A+(N^(k|~v))+m[13]+1309151649&4294967295,A=k+(b<<21&4294967295|b>>>11),b=v+(k^(A|~N))+m[4]+4149444226&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~k))+m[11]+3174756917&4294967295,N=v+(b<<10&4294967295|b>>>22),b=k+(v^(N|~A))+m[2]+718787259&4294967295,k=N+(b<<15&4294967295|b>>>17),b=A+(N^(k|~v))+m[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(k+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var A=v-this.blockSize,m=this.B,k=this.h,N=0;N<v;){if(k==0)for(;N<=A;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<v;)if(m[k++]=C.charCodeAt(N++),k==this.blockSize){i(this,m),k=0;break}}else for(;N<v;)if(m[k++]=C[N++],k==this.blockSize){i(this,m),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var A=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=A&255,A/=256;for(this.u(C),C=Array(16),v=A=0;4>v;++v)for(var m=0;32>m;m+=8)C[A++]=this.g[v]>>>m&255;return C};function s(C,v){var A=a;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=v(C)}function o(C,v){this.h=v;for(var A=[],m=!0,k=C.length-1;0<=k;k--){var N=C[k]|0;m&&N==v||(A[k]=N,m=!1)}this.g=A}var a={};function l(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return R(c(-C));for(var v=[],A=1,m=0;C>=A;m++)v[m]=C/A|0,A*=4294967296;return new o(v,0)}function h(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return R(h(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(v,8)),m=d,k=0;k<C.length;k+=8){var N=Math.min(8,C.length-k),b=parseInt(C.substring(k,k+N),v);8>N?(N=c(Math.pow(v,N)),m=m.j(N).add(c(b))):(m=m.j(A),m=m.add(c(b)))}return m}var d=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-R(this).m();for(var C=0,v=1,A=0;A<this.g.length;A++){var m=this.i(A);C+=(0<=m?m:4294967296+m)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(w(this))return"-"+R(this).toString(C);for(var v=c(Math.pow(C,6)),A=this,m="";;){var k=x(A,v).g;A=T(A,k.j(v));var N=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=k,_(A))return N+m;for(;6>N.length;)N="0"+N;m=N+m}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function _(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=T(this,C),w(C)?-1:_(C)?0:1};function R(C){for(var v=C.g.length,A=[],m=0;m<v;m++)A[m]=~C.g[m];return new o(A,~C.h).add(p)}t.abs=function(){return w(this)?R(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),A=[],m=0,k=0;k<=v;k++){var N=m+(this.i(k)&65535)+(C.i(k)&65535),b=(N>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);m=b>>>16,N&=65535,b&=65535,A[k]=b<<16|N}return new o(A,A[A.length-1]&-2147483648?-1:0)};function T(C,v){return C.add(R(v))}t.j=function(C){if(_(this)||_(C))return d;if(w(this))return w(C)?R(this).j(R(C)):R(R(this).j(C));if(w(C))return R(this.j(R(C)));if(0>this.l(y)&&0>C.l(y))return c(this.m()*C.m());for(var v=this.g.length+C.g.length,A=[],m=0;m<2*v;m++)A[m]=0;for(m=0;m<this.g.length;m++)for(var k=0;k<C.g.length;k++){var N=this.i(m)>>>16,b=this.i(m)&65535,ke=C.i(k)>>>16,Tn=C.i(k)&65535;A[2*m+2*k]+=b*Tn,E(A,2*m+2*k),A[2*m+2*k+1]+=N*Tn,E(A,2*m+2*k+1),A[2*m+2*k+1]+=b*ke,E(A,2*m+2*k+1),A[2*m+2*k+2]+=N*ke,E(A,2*m+2*k+2)}for(m=0;m<v;m++)A[m]=A[2*m+1]<<16|A[2*m];for(m=v;m<2*v;m++)A[m]=0;return new o(A,0)};function E(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function I(C,v){this.g=C,this.h=v}function x(C,v){if(_(v))throw Error("division by zero");if(_(C))return new I(d,d);if(w(C))return v=x(R(C),v),new I(R(v.g),R(v.h));if(w(v))return v=x(C,R(v)),new I(R(v.g),v.h);if(30<C.g.length){if(w(C)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var A=p,m=v;0>=m.l(C);)A=L(A),m=L(m);var k=O(A,1),N=O(m,1);for(m=O(m,2),A=O(A,2);!_(m);){var b=N.add(m);0>=b.l(C)&&(k=k.add(A),N=b),m=O(m,1),A=O(A,1)}return v=T(C,k.j(v)),new I(k,v)}for(k=d;0<=C.l(v);){for(A=Math.max(1,Math.floor(C.m()/v.m())),m=Math.ceil(Math.log(A)/Math.LN2),m=48>=m?1:Math.pow(2,m-48),N=c(A),b=N.j(v);w(b)||0<b.l(C);)A-=m,N=c(A),b=N.j(v);_(N)&&(N=p),k=k.add(N),C=T(C,b)}return new I(k,C)}t.A=function(C){return x(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),A=[],m=0;m<v;m++)A[m]=this.i(m)&C.i(m);return new o(A,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),A=[],m=0;m<v;m++)A[m]=this.i(m)|C.i(m);return new o(A,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),A=[],m=0;m<v;m++)A[m]=this.i(m)^C.i(m);return new o(A,this.h^C.h)};function L(C){for(var v=C.g.length+1,A=[],m=0;m<v;m++)A[m]=C.i(m)<<1|C.i(m-1)>>>31;return new o(A,C.h)}function O(C,v){var A=v>>5;v%=32;for(var m=C.g.length-A,k=[],N=0;N<m;N++)k[N]=0<v?C.i(N+A)>>>v|C.i(N+A+1)<<32-v:C.i(N+A);return new o(k,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Es=o}).apply(typeof C1<"u"?C1:typeof self<"u"?self:typeof window<"u"?window:{});var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rA,ll,iA,fh,Fg,sA,oA,aA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof jc=="object"&&jc];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var D=u[S];if(!(D in g))break e;g=g[D]}u=u[u.length-1],S=g[u],f=f(S),f!=S&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,S=!1,D={next:function(){if(!S&&g<u.length){var M=g++;return{value:f(M,u[M]),done:!1}}return S=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,S),u.apply(f,D)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function _(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,D,M){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return f.prototype[D].apply(S,W)}}function w(u){const f=u.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=u[S];return g}return[]}function R(u,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const D=u.length||0,M=S.length||0;u.length=D+M;for(let W=0;W<M;W++)u[D+W]=S[W]}else u.push(S)}}class T{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function E(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function x(u){return x[" "](u),u}x[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function O(u,f,g){for(const S in u)f.call(g,u[S],S,u)}function C(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function v(u){const f={};for(const g in u)f[g]=u[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function m(u,f){let g,S;for(let D=1;D<arguments.length;D++){S=arguments[D];for(g in S)u[g]=S[g];for(let M=0;M<A.length;M++)g=A[M],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function k(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function N(u){a.setTimeout(()=>{throw u},0)}function b(){var u=Z;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ke{constructor(){this.h=this.g=null}add(f,g){const S=Tn.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Tn=new T(()=>new ni,u=>u.reset());class ni{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let mr,H=!1,Z=new ke,re=()=>{const u=a.Promise.resolve(void 0);mr=()=>{u.then(Ve)}};var Ve=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(g){N(g)}var f=Tn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}H=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var gr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function _r(u,f){if(Ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(L){e:{try{x(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:yr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&_r.aa.h.call(this)}}_(_r,Ge);var yr={2:"touch",3:"pen",4:"mouse"};_r.prototype.h=function(){_r.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vr="closure_listenable_"+(1e6*Math.random()|0),hx=0;function dx(u,f,g,S,D){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=D,this.key=++hx,this.da=this.fa=!1}function ic(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sc(u){this.src=u,this.g={},this.h=0}sc.prototype.add=function(u,f,g,S,D){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var W=ap(u,f,S,D);return-1<W?(f=u[W],g||(f.fa=!1)):(f=new dx(f,this.src,M,!!S,D),f.fa=g,u.push(f)),f};function op(u,f){var g=f.type;if(g in u.g){var S=u.g[g],D=Array.prototype.indexOf.call(S,f,void 0),M;(M=0<=D)&&Array.prototype.splice.call(S,D,1),M&&(ic(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function ap(u,f,g,S){for(var D=0;D<u.length;++D){var M=u[D];if(!M.da&&M.listener==f&&M.capture==!!g&&M.ha==S)return D}return-1}var lp="closure_lm_"+(1e6*Math.random()|0),up={};function N0(u,f,g,S,D){if(Array.isArray(f)){for(var M=0;M<f.length;M++)N0(u,f[M],g,S,D);return null}return g=L0(g),u&&u[vr]?u.K(f,g,c(S)?!!S.capture:!!S,D):fx(u,f,g,!1,S,D)}function fx(u,f,g,S,D,M){if(!f)throw Error("Invalid event type");var W=c(D)?!!D.capture:!!D,Ee=hp(u);if(Ee||(u[lp]=Ee=new sc(u)),g=Ee.add(f,g,S,W,M),g.proxy)return g;if(S=px(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)gr||(D=W),D===void 0&&(D=!1),u.addEventListener(f.toString(),S,D);else if(u.attachEvent)u.attachEvent(D0(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function px(){function u(g){return f.call(u.src,u.listener,g)}const f=mx;return u}function O0(u,f,g,S,D){if(Array.isArray(f))for(var M=0;M<f.length;M++)O0(u,f[M],g,S,D);else S=c(S)?!!S.capture:!!S,g=L0(g),u&&u[vr]?(u=u.i,f=String(f).toString(),f in u.g&&(M=u.g[f],g=ap(M,g,S,D),-1<g&&(ic(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete u.g[f],u.h--)))):u&&(u=hp(u))&&(f=u.g[f.toString()],u=-1,f&&(u=ap(f,g,S,D)),(g=-1<u?f[u]:null)&&cp(g))}function cp(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[vr])op(f.i,u);else{var g=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(g,S,u.capture):f.detachEvent?f.detachEvent(D0(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=hp(f))?(op(g,u),g.h==0&&(g.src=null,f[lp]=null)):ic(u)}}}function D0(u){return u in up?up[u]:up[u]="on"+u}function mx(u,f){if(u.da)u=!0;else{f=new _r(f,this);var g=u.listener,S=u.ha||u.src;u.fa&&cp(u),u=g.call(S,f)}return u}function hp(u){return u=u[lp],u instanceof sc?u:null}var dp="__closure_events_fn_"+(1e9*Math.random()>>>0);function L0(u){return typeof u=="function"?u:(u[dp]||(u[dp]=function(f){return u.handleEvent(f)}),u[dp])}function Ct(){we.call(this),this.i=new sc(this),this.M=this,this.F=null}_(Ct,we),Ct.prototype[vr]=!0,Ct.prototype.removeEventListener=function(u,f,g,S){O0(this,u,f,g,S)};function Vt(u,f){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new Ge(f,u);else if(f instanceof Ge)f.target=f.target||u;else{var D=f;f=new Ge(S,u),m(f,D)}if(D=!0,g)for(var M=g.length-1;0<=M;M--){var W=f.g=g[M];D=oc(W,S,!0,f)&&D}if(W=f.g=u,D=oc(W,S,!0,f)&&D,D=oc(W,S,!1,f)&&D,g)for(M=0;M<g.length;M++)W=f.g=g[M],D=oc(W,S,!1,f)&&D}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],S=0;S<g.length;S++)ic(g[S]);delete u.g[f],u.h--}}this.F=null},Ct.prototype.K=function(u,f,g,S){return this.i.add(String(u),f,!1,g,S)},Ct.prototype.L=function(u,f,g,S){return this.i.add(String(u),f,!0,g,S)};function oc(u,f,g,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,M=0;M<f.length;++M){var W=f[M];if(W&&!W.da&&W.capture==g){var Ee=W.listener,mt=W.ha||W.src;W.fa&&op(u.i,W),D=Ee.call(mt,S)!==!1&&D}}return D&&!S.defaultPrevented}function M0(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function V0(u){u.g=M0(()=>{u.g=null,u.i&&(u.i=!1,V0(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class gx extends we{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:V0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(u){we.call(this),this.h=u,this.g={}}_(Ra,we);var F0=[];function U0(u){O(u.g,function(f,g){this.g.hasOwnProperty(g)&&cp(f)},u),u.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),U0(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fp=a.JSON.stringify,_x=a.JSON.parse,yx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function pp(){}pp.prototype.h=null;function j0(u){return u.h||(u.h=u.i())}function B0(){}var Aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mp(){Ge.call(this,"d")}_(mp,Ge);function gp(){Ge.call(this,"c")}_(gp,Ge);var is={},$0=null;function ac(){return $0=$0||new Ct}is.La="serverreachability";function z0(u){Ge.call(this,is.La,u)}_(z0,Ge);function ka(u){const f=ac();Vt(f,new z0(f))}is.STAT_EVENT="statevent";function W0(u,f){Ge.call(this,is.STAT_EVENT,u),this.stat=f}_(W0,Ge);function Ft(u){const f=ac();Vt(f,new W0(f,u))}is.Ma="timingevent";function H0(u,f){Ge.call(this,is.Ma,u),this.size=f}_(H0,Ge);function Pa(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ba(){this.g=!0}ba.prototype.xa=function(){this.g=!1};function vx(u,f,g,S,D,M){u.info(function(){if(u.g)if(M)for(var W="",Ee=M.split("&"),mt=0;mt<Ee.length;mt++){var de=Ee[mt].split("=");if(1<de.length){var It=de[0];de=de[1];var Rt=It.split("_");W=2<=Rt.length&&Rt[1]=="type"?W+(It+"="+de+"&"):W+(It+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+S+") [attempt "+D+"]: "+f+`
`+g+`
`+W})}function wx(u,f,g,S,D,M,W){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+D+"]: "+f+`
`+g+`
`+M+" "+W})}function Gs(u,f,g,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Tx(u,g)+(S?" "+S:"")})}function Ex(u,f){u.info(function(){return"TIMEOUT: "+f})}ba.prototype.info=function(){};function Tx(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var D=S[1];if(Array.isArray(D)&&!(1>D.length)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return fp(g)}catch{return f}}var lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},q0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_p;function uc(){}_(uc,pp),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},_p=new uc;function ri(u,f,g,S){this.j=u,this.i=f,this.l=g,this.R=S||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new G0}function G0(){this.i=null,this.g="",this.h=!1}var K0={},yp={};function vp(u,f,g){u.L=1,u.v=fc(wr(f)),u.m=g,u.P=!0,Q0(u,null)}function Q0(u,f){u.F=Date.now(),cc(u),u.A=wr(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),uw(g.i,"t",S),u.C=0,g=u.j.J,u.h=new G0,u.g=Aw(u.j,g?f:null,!u.m),0<u.O&&(u.M=new gx(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,S=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(F0[0]=D.toString()),D=F0);for(var M=0;M<D.length;M++){var W=N0(g,D[M],S||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),ka(),vx(u.i,u.u,u.A,u.l,u.R,u.m)}ri.prototype.ca=function(u){u=u.target;const f=this.M;f&&Er(u)==3?f.j():this.Y(u)},ri.prototype.Y=function(u){try{if(u==this.g)e:{const Rt=Er(this.g);var f=this.g.Ba();const Ys=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||gw(this.g)))){this.J||Rt!=4||f==7||(f==8||0>=Ys?ka(3):ka(2)),wp(this);var g=this.g.Z();this.X=g;t:if(Y0(this)){var S=gw(this.g);u="";var D=S.length,M=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),xa(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(M&&f==D-1)});S.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,wx(this.i,this.u,this.A,this.l,this.R,Rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,mt=this.g;if((Ee=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ee)){var de=Ee;break t}}de=null}if(g=de)Gs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ep(this,g);else{this.o=!1,this.s=3,Ft(12),ss(this),xa(this);break e}}if(this.P){g=!0;let Dn;for(;!this.J&&this.C<W.length;)if(Dn=Sx(this,W),Dn==yp){Rt==4&&(this.s=4,Ft(14),g=!1),Gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==K0){this.s=4,Ft(15),Gs(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else Gs(this.i,this.l,Dn,null),Ep(this,Dn);if(Y0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||W.length!=0||this.h.h||(this.s=1,Ft(16),g=!1),this.o=this.o&&g,!g)Gs(this.i,this.l,W,"[Invalid Chunked Response]"),ss(this),xa(this);else if(0<W.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Ap(It),It.M=!0,Ft(11))}}else Gs(this.i,this.l,W,null),Ep(this,W);Rt==4&&ss(this),this.o&&!this.J&&(Rt==4?Sw(this.j,this):(this.o=!1,cc(this)))}else jx(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),ss(this),xa(this)}}}catch{}finally{}};function Y0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Sx(u,f){var g=u.C,S=f.indexOf(`
`,g);return S==-1?yp:(g=Number(f.substring(g,S)),isNaN(g)?K0:(S+=1,S+g>f.length?yp:(f=f.slice(S,S+g),u.C=S+g,f)))}ri.prototype.cancel=function(){this.J=!0,ss(this)};function cc(u){u.S=Date.now()+u.I,X0(u,u.I)}function X0(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pa(p(u.ba,u),f)}function wp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ri.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ex(this.i,this.A),this.L!=2&&(ka(),Ft(17)),ss(this),this.s=2,xa(this)):X0(this,this.S-u)};function xa(u){u.j.G==0||u.J||Sw(u.j,u)}function ss(u){wp(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,U0(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ep(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Tp(g.h,u))){if(!u.K&&Tp(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var D=S;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)vc(g),_c(g);else break e;Rp(g),Ft(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=Pa(p(g.Za,g),6e3));if(1>=ew(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else as(g,11)}else if((u.K||g.g==u)&&vc(g),!E(f))for(D=g.Da.g.parse(f),f=0;f<D.length;f++){let de=D[f];if(g.T=de[0],de=de[1],g.G==2)if(de[0]=="c"){g.K=de[1],g.ia=de[2];const It=de[3];It!=null&&(g.la=It,g.j.info("VER="+g.la));const Rt=de[4];Rt!=null&&(g.Aa=Rt,g.j.info("SVER="+g.Aa));const Ys=de[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(S=1.5*Ys,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Dn=u.g;if(Dn){const Ec=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ec){var M=S.h;M.g||Ec.indexOf("spdy")==-1&&Ec.indexOf("quic")==-1&&Ec.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Sp(M,M.h),M.h=null))}if(S.D){const kp=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;kp&&(S.ya=kp,Pe(S.I,S.D,kp))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var W=u;if(S.qa=Rw(S,S.J?S.ia:null,S.W),W.K){tw(S.h,W);var Ee=W,mt=S.L;mt&&(Ee.I=mt),Ee.B&&(wp(Ee),cc(Ee)),S.g=W}else Ew(S);0<g.i.length&&yc(g)}else de[0]!="stop"&&de[0]!="close"||as(g,7);else g.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?as(g,7):Ip(g):de[0]!="noop"&&g.l&&g.l.ta(de),g.v=0)}}ka(4)}catch{}}var Cx=class{constructor(u,f){this.g=u,this.map=f}};function J0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Z0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ew(u){return u.h?1:u.g?u.g.size:0}function Tp(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Sp(u,f){u.g?u.g.add(f):u.h=f}function tw(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}J0.prototype.cancel=function(){if(this.i=nw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return w(u.i)}function Ix(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,S=0;S<g;S++)f.push(u[S]);return f}f=[],g=0;for(S in u)f[g++]=u[S];return f}function Rx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const S in u)f[g++]=S;return f}}}function rw(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=Rx(u),S=Ix(u),D=S.length,M=0;M<D;M++)f.call(void 0,S[M],g&&g[M],u)}var iw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ax(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),D=null;if(0<=S){var M=u[g].substring(0,S);D=u[g].substring(S+1)}else M=u[g];f(M,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function os(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof os){this.h=u.h,hc(this,u.j),this.o=u.o,this.g=u.g,dc(this,u.s),this.l=u.l;var f=u.i,g=new Da;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),sw(this,g),this.m=u.m}else u&&(f=String(u).match(iw))?(this.h=!1,hc(this,f[1]||"",!0),this.o=Na(f[2]||""),this.g=Na(f[3]||"",!0),dc(this,f[4]),this.l=Na(f[5]||"",!0),sw(this,f[6]||"",!0),this.m=Na(f[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}os.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Oa(f,ow,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Oa(f,ow,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Oa(g,g.charAt(0)=="/"?bx:Px,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Oa(g,Nx)),u.join("")};function wr(u){return new os(u)}function hc(u,f,g){u.j=g?Na(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function dc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function sw(u,f,g){f instanceof Da?(u.i=f,Ox(u.i,u.h)):(g||(f=Oa(f,xx)),u.i=new Da(f,u.h))}function Pe(u,f,g){u.i.set(f,g)}function fc(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Na(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oa(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,kx),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ow=/[#\/\?@]/g,Px=/[#\?:]/g,bx=/[#\?]/g,xx=/[#\?@]/g,Nx=/#/g;function Da(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function ii(u){u.g||(u.g=new Map,u.h=0,u.i&&Ax(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Da.prototype,t.add=function(u,f){ii(this),this.i=null,u=Ks(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function aw(u,f){ii(u),f=Ks(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function lw(u,f){return ii(u),f=Ks(u,f),u.g.has(f)}t.forEach=function(u,f){ii(this),this.g.forEach(function(g,S){g.forEach(function(D){u.call(f,D,S,this)},this)},this)},t.na=function(){ii(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const D=u[S];for(let M=0;M<D.length;M++)g.push(f[S])}return g},t.V=function(u){ii(this);let f=[];if(typeof u=="string")lw(this,u)&&(f=f.concat(this.g.get(Ks(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return ii(this),this.i=null,u=Ks(this,u),lw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function uw(u,f,g){aw(u,f),0<g.length&&(u.i=null,u.g.set(Ks(u,f),w(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const M=encodeURIComponent(String(S)),W=this.V(S);for(S=0;S<W.length;S++){var D=M;W[S]!==""&&(D+="="+encodeURIComponent(String(W[S]))),u.push(D)}}return this.i=u.join("&")};function Ks(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Ox(u,f){f&&!u.j&&(ii(u),u.i=null,u.g.forEach(function(g,S){var D=S.toLowerCase();S!=D&&(aw(this,S),uw(this,D,g))},u)),u.j=f}function Dx(u,f){const g=new ba;if(a.Image){const S=new Image;S.onload=y(si,g,"TestLoadImage: loaded",!0,f,S),S.onerror=y(si,g,"TestLoadImage: error",!1,f,S),S.onabort=y(si,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=y(si,g,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function Lx(u,f){const g=new ba,S=new AbortController,D=setTimeout(()=>{S.abort(),si(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(M=>{clearTimeout(D),M.ok?si(g,"TestPingServer: ok",!0,f):si(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),si(g,"TestPingServer: error",!1,f)})}function si(u,f,g,S,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),S(g)}catch{}}function Mx(){this.g=new yx}function Vx(u,f,g){const S=g||"";try{rw(u,function(D,M){let W=D;c(D)&&(W=fp(D)),f.push(S+M+"="+encodeURIComponent(W))})}catch(D){throw f.push(S+"type="+encodeURIComponent("_badmap")),D}}function pc(u){this.l=u.Ub||null,this.j=u.eb||!1}_(pc,pp),pc.prototype.g=function(){return new mc(this.l,this.j)},pc.prototype.i=function(u){return function(){return u}}({});function mc(u,f){Ct.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(mc,Ct),t=mc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ma(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function cw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?La(this):Ma(this),this.readyState==3&&cw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,La(this))},t.Qa=function(u){this.g&&(this.response=u,La(this))},t.ga=function(){this.g&&La(this)};function La(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ma(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Ma(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hw(u){let f="";return O(u,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Cp(u,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=hw(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Pe(u,f,g))}function $e(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_($e,Ct);var Fx=/^https?$/i,Ux=["POST","PUT"];t=$e.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_p.g(),this.v=this.o?j0(this.o):j0(_p),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){dw(this,M);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var D in S)g.set(D,S[D]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const M of S.keys())g.set(M,S.get(M));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ux,f,void 0))||S||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,W]of g)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mw(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){dw(this,M)}};function dw(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,fw(u),gc(u)}function fw(u){u.A||(u.A=!0,Vt(u,"complete"),Vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Vt(this,"complete"),Vt(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pw(this):this.bb())},t.bb=function(){pw(this)};function pw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)M0(u.Ea,0,u);else if(Vt(u,"readystatechange"),Er(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=W===0){var D=String(u.D).match(iw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),S=!Fx.test(D?D.toLowerCase():"")}g=S}if(g)Vt(u,"complete"),Vt(u,"success");else{u.m=6;try{var M=2<Er(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",fw(u)}}finally{gc(u)}}}}function gc(u,f){if(u.g){mw(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Vt(u,"ready");try{g.onreadystatechange=S}catch{}}}function mw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),_x(f)}};function gw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function jx(u){const f={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(E(u[S]))continue;var g=k(u[S]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=f[D]||[];f[D]=M,M.push(g)}C(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function _w(u){this.Aa=0,this.i=[],this.j=new ba,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,u),this.cb=Va("retryDelaySeedMs",1e4,u),this.Wa=Va("forwardChannelMaxRetries",2,u),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new J0(u&&u.concurrentRequestLimit),this.Da=new Mx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_w.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,S){Ft(0),this.W=u,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Rw(this,null,this.W),yc(this)};function Ip(u){if(yw(u),u.G==3){var f=u.U++,g=wr(u.I);if(Pe(g,"SID",u.K),Pe(g,"RID",f),Pe(g,"TYPE","terminate"),Fa(u,g),f=new ri(u,u.j,f),f.L=2,f.v=fc(wr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Aw(f.j,null),f.g.ea(f.v)),f.F=Date.now(),cc(f)}Iw(u)}function _c(u){u.g&&(Ap(u),u.g.cancel(),u.g=null)}function yw(u){_c(u),u.u&&(a.clearTimeout(u.u),u.u=null),vc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function yc(u){if(!Z0(u.h)&&!u.s){u.s=!0;var f=u.Ga;mr||re(),H||(mr(),H=!0),Z.add(f,u),u.B=0}}function Bx(u,f){return ew(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pa(p(u.Ga,u,f),Cw(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new ri(this,this.j,u);let M=this.o;if(this.S&&(M?(M=v(M),m(M,this.S)):M=this.S),this.m!==null||this.O||(D.H=M,M=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=ww(this,D,f),g=wr(this.I),Pe(g,"RID",u),Pe(g,"CVER",22),this.D&&Pe(g,"X-HTTP-Session-Id",this.D),Fa(this,g),M&&(this.O?f="headers="+encodeURIComponent(String(hw(M)))+"&"+f:this.m&&Cp(g,this.m,M)),Sp(this.h,D),this.Ua&&Pe(g,"TYPE","init"),this.P?(Pe(g,"$req",f),Pe(g,"SID","null"),D.T=!0,vp(D,g,null)):vp(D,g,f),this.G=2}}else this.G==3&&(u?vw(this,u):this.i.length==0||Z0(this.h)||vw(this))};function vw(u,f){var g;f?g=f.l:g=u.U++;const S=wr(u.I);Pe(S,"SID",u.K),Pe(S,"RID",g),Pe(S,"AID",u.T),Fa(u,S),u.m&&u.o&&Cp(S,u.m,u.o),g=new ri(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=ww(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Sp(u.h,g),vp(g,S,f)}function Fa(u,f){u.H&&O(u.H,function(g,S){Pe(f,S,g)}),u.l&&rw({},function(g,S){Pe(f,S,g)})}function ww(u,f,g){g=Math.min(u.i.length,g);var S=u.l?p(u.l.Na,u.l,u):null;e:{var D=u.i;let M=-1;for(;;){const W=["count="+g];M==-1?0<g?(M=D[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Ee=!0;for(let mt=0;mt<g;mt++){let de=D[mt].g;const It=D[mt].map;if(de-=M,0>de)M=Math.max(0,D[mt].g-100),Ee=!1;else try{Vx(It,W,"req"+de+"_")}catch{S&&S(It)}}if(Ee){S=W.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,S}function Ew(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;mr||re(),H||(mr(),H=!0),Z.add(f,u),u.v=0}}function Rp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pa(p(u.Fa,u),Cw(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Tw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pa(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),_c(this),Tw(this))};function Ap(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Tw(u){u.g=new ri(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=wr(u.qa);Pe(f,"RID","rpc"),Pe(f,"SID",u.K),Pe(f,"AID",u.T),Pe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(f,"TO",u.ja),Pe(f,"TYPE","xmlhttp"),Fa(u,f),u.m&&u.o&&Cp(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=fc(wr(f)),g.m=null,g.P=!0,Q0(g,u)}t.Za=function(){this.C!=null&&(this.C=null,_c(this),Rp(this),Ft(19))};function vc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Sw(u,f){var g=null;if(u.g==f){vc(u),Ap(u),u.g=null;var S=2}else if(Tp(u.h,f))g=f.D,tw(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var D=u.B;S=ac(),Vt(S,new H0(S,g)),yc(u)}else Ew(u);else if(D=f.s,D==3||D==0&&0<f.X||!(S==1&&Bx(u,f)||S==2&&Rp(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),D){case 1:as(u,5);break;case 4:as(u,10);break;case 3:as(u,6);break;default:as(u,2)}}}function Cw(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function as(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),S=u.Xa;const D=!S;S=new os(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hc(S,"https"),fc(S),D?Dx(S.toString(),g):Lx(S.toString(),g)}else Ft(2);u.G=0,u.l&&u.l.sa(f),Iw(u),yw(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Iw(u){if(u.G=0,u.ka=[],u.l){const f=nw(u.h);(f.length!=0||u.i.length!=0)&&(R(u.ka,f),R(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function Rw(u,f,g){var S=g instanceof os?wr(g):new os(g);if(S.g!="")f&&(S.g=f+"."+S.g),dc(S,S.s);else{var D=a.location;S=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var M=new os(null);S&&hc(M,S),f&&(M.g=f),D&&dc(M,D),g&&(M.l=g),S=M}return g=u.D,f=u.ya,g&&f&&Pe(S,g,f),Pe(S,"VER",u.la),Fa(u,S),S}function Aw(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new $e(new pc({eb:g})):new $e(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kw(){}t=kw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wc(){}wc.prototype.g=function(u,f){return new an(u,f)};function an(u,f){Ct.call(this),this.g=new _w(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!E(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Qs(this)}_(an,Ct),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ip(this.g)},an.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=fp(u),u=g);f.i.push(new Cx(f.Ya++,u)),f.G==3&&yc(f)},an.prototype.N=function(){this.g.l=null,delete this.j,Ip(this.g),delete this.g,an.aa.N.call(this)};function Pw(u){mp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}_(Pw,mp);function bw(){gp.call(this),this.status=1}_(bw,gp);function Qs(u){this.g=u}_(Qs,kw),Qs.prototype.ua=function(){Vt(this.g,"a")},Qs.prototype.ta=function(u){Vt(this.g,new Pw(u))},Qs.prototype.sa=function(u){Vt(this.g,new bw)},Qs.prototype.ra=function(){Vt(this.g,"b")},wc.prototype.createWebChannel=wc.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,aA=function(){return new wc},oA=function(){return ac()},sA=is,Fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lc.NO_ERROR=0,lc.TIMEOUT=8,lc.HTTP_ERROR=6,fh=lc,q0.COMPLETE="complete",iA=q0,B0.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,ll=B0,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,rA=$e}).apply(typeof jc<"u"?jc:typeof self<"u"?self:typeof window<"u"?window:{});const I1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Zd("@firebase/firestore");function Ga(){return xs.logLevel}function K(t,...e){if(xs.logLevel<=ae.DEBUG){const n=e.map(Wy);xs.debug(`Firestore (${ga}): ${t}`,...n)}}function Kr(t,...e){if(xs.logLevel<=ae.ERROR){const n=e.map(Wy);xs.error(`Firestore (${ga}): ${t}`,...n)}}function Go(t,...e){if(xs.logLevel<=ae.WARN){const n=e.map(Wy);xs.warn(`Firestore (${ga}): ${t}`,...n)}}function Wy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function ye(t,e){t||J()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class iV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sV{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new lA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new xt(e)}}class oV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new oV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new lV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function Ko(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new lt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new lt(0,0))}static max(){return new ee(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return iu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof iu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends iu{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const hV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends iu{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return hV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ne.fromString(e))}static fromName(e){return new Q(Ne.fromString(e).popFirst(5))}static empty(){return new Q(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ne(e.slice()))}}function dV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new ji(i,Q.empty(),e)}function fV(t){return new ji(t.readTime,t.key,-1)}class ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ji(ee.min(),Q.empty(),-1)}static max(){return new ji(ee.max(),Q.empty(),-1)}}function pV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==mV)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function _V(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hy.oe=-1;function sf(t){return t==null}function ad(t){return t===0&&1/t==-1/0}function yV(t){return typeof t=="number"&&Number.isInteger(t)&&!ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nt=class Ug{constructor(e,n){this.comparator=e,this.root=n||Oi.EMPTY}insert(e,n){return new Ug(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new Ug(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}},Bc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Oi=class Sr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Sr.RED,this.left=i??Sr.EMPTY,this.right=s??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Sr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Sr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1;Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Oi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A1(this.data.getIterator())}getIteratorFrom(e){return new A1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class A1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new Et(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hA("Invalid base64 string: "+s):s}}(e);return new St(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const vV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(ye(!!t),typeof t=="string"){let e=0;const n=vV.exec(t);if(ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gy(t){const e=t.mapValue.fields.__previous_value__;return qy(e)?Gy(e):e}function su(t){const e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ou{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qy(t)?4:TV(t)?9007199254740991:EV(t)?10:11:J()}function dr(t,e){if(t===e)return!0;const n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return su(t).isEqual(su(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bi(i.timestampValue),a=Bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ns(i.bytesValue).isEqual(Ns(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?ad(o)===ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ko(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(R1(o)!==R1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!dr(o[l],a[l])))return!1;return!0}(t,e);default:return J()}}function au(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function Qo(t,e){if(t===e)return 0;const n=Os(t),r=Os(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return k1(t.timestampValue,e.timestampValue);case 4:return k1(su(t),su(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ns(s),l=Ns(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=fe(a[c],l[c]);if(h!==0)return h}return fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=fe(Ke(s.latitude),Ke(o.latitude));return a!==0?a:fe(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return P1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=fe(((c=y?.values)===null||c===void 0?void 0:c.length)||0,((h=_?.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:P1(y,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$c.mapValue&&o===$c.mapValue)return 0;if(s===$c.mapValue)return 1;if(o===$c.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=fe(l[d],h[d]);if(p!==0)return p;const y=Qo(a[l[d]],c[h[d]]);if(y!==0)return y}return fe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function k1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Bi(t),r=Bi(e),i=fe(n.seconds,r.seconds);return i!==0?i:fe(n.nanos,r.nanos)}function P1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Qo(n[i],r[i]);if(s)return s}return fe(n.length,r.length)}function Yo(t){return jg(t)}function jg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=jg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${jg(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function b1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bg(t){return!!t&&"integerValue"in t}function Ky(t){return!!t&&"arrayValue"in t}function x1(t){return!!t&&"nullValue"in t}function N1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ph(t){return!!t&&"mapValue"in t}function EV(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Cl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ph(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=vt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Cl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ph(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ph(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yt(Cl(this.value))}}function dA(t){const e=[];return zs(t.fields,(n,r)=>{const i=new vt([n]);if(ph(r)){const s=dA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ot(e,0,ee.min(),ee.min(),ee.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ot(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new Ot(e,2,n,ee.min(),ee.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,ee.min(),ee.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.position=e,this.inclusive=n}}function O1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Qo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function D1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function SV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{}class tt extends fA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IV(e,n,r):n==="array-contains"?new kV(e,r):n==="in"?new PV(e,r):n==="not-in"?new bV(e,r):n==="array-contains-any"?new xV(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RV(e,r):new AV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qo(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends fA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return pA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pA(t){return t.op==="and"}function mA(t){return CV(t)&&pA(t)}function CV(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function $g(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Yo(t.value);if(mA(t))return t.filters.map(e=>$g(e)).join(",");{const e=t.filters.map(n=>$g(n)).join(",");return`${t.op}(${e})`}}function gA(t,e){return t instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(t,e):t instanceof Gn?function(r,i){return i instanceof Gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gA(o,i.filters[a]),!0):!1}(t,e):void J()}function _A(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(_A).join(" ,")+"}"}(t):"Filter"}class IV extends tt{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class RV extends tt{constructor(e,n){super(e,"in",n),this.keys=yA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AV extends tt{constructor(e,n){super(e,"not-in",n),this.keys=yA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class kV extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ky(n)&&au(n.arrayValue,this.value)}}class PV extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class bV extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!au(this.value.arrayValue,n)}}class xV extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ky(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function L1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new NV(t,e,n,r,i,s,o)}function Qy(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$g(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yo(r)).join(",")),e.ue=n}return e.ue}function Yy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!D1(t.startAt,e.startAt)&&D1(t.endAt,e.endAt)}function zg(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OV(t,e,n,r,i,s,o,a){return new _a(t,e,n,r,i,s,o,a)}function Xy(t){return new _a(t)}function M1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vA(t){return t.collectionGroup!==null}function Il(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et(vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new lu(s,r))}),n.has(vt.keyField().canonicalString())||e.ce.push(new lu(vt.keyField(),r))}return e.ce}function ur(t){const e=te(t);return e.le||(e.le=DV(e,Il(t))),e.le}function DV(t,e){if(t.limitType==="F")return L1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lu(i.field,s)});const n=t.endAt?new ld(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ld(t.startAt.position,t.startAt.inclusive):null;return L1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wg(t,e){const n=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ud(t,e,n){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function of(t,e){return Yy(ur(t),ur(e))&&t.limitType===e.limitType}function wA(t){return`${Qy(ur(t))}|lt:${t.limitType}`}function so(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_A(i)).join(", ")}]`),sf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Yo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Yo(i)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function af(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Il(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=O1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Il(r),i)||r.endAt&&!function(o,a,l){const c=O1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Il(r),i))}(t,e)}function LV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EA(t){return(e,n)=>{let r=!1;for(const i of Il(t)){const s=MV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MV(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Qo(l,c):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return cA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new nt(Q.comparator);function Qr(){return VV}const TA=new nt(Q.comparator);function ul(...t){let e=TA;for(const n of t)e=e.insert(n.key,n);return e}function SA(t){let e=TA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Rl()}function CA(){return Rl()}function Rl(){return new ya(t=>t.toString(),(t,e)=>t.isEqual(e))}const FV=new nt(Q.comparator),UV=new Et(Q.comparator);function le(...t){let e=UV;for(const n of t)e=e.add(n);return e}const jV=new Et(fe);function BV(){return jV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function IA(t){return{integerValue:""+t}}function $V(t,e){return yV(e)?IA(e):Jy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function zV(t,e,n){return t instanceof uu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qy(s)&&(s=Gy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cu?AA(t,e):t instanceof hu?kA(t,e):function(i,s){const o=RA(i,s),a=V1(o)+V1(i.Pe);return Bg(o)&&Bg(i.Pe)?IA(a):Jy(i.serializer,a)}(t,e)}function WV(t,e,n){return t instanceof cu?AA(t,e):t instanceof hu?kA(t,e):n}function RA(t,e){return t instanceof cd?function(r){return Bg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class uu extends lf{}class cu extends lf{constructor(e){super(),this.elements=e}}function AA(t,e){const n=PA(e);for(const r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class hu extends lf{constructor(e){super(),this.elements=e}}function kA(t,e){let n=PA(e);for(const r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}class cd extends lf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function V1(t){return Ke(t.integerValue||t.doubleValue)}function PA(t){return Ky(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n){this.field=e,this.transform=n}}function qV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cu&&i instanceof cu||r instanceof hu&&i instanceof hu?Ko(r.elements,i.elements,dr):r instanceof cd&&i instanceof cd?dr(r.Pe,i.Pe):r instanceof uu&&i instanceof uu}(t.transform,e.transform)}class GV{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uf{}function bA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zy(t.key,bn.none()):new Uu(t.key,t.data,bn.none());{const n=t.data,r=Yt.empty();let i=new Et(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ts(t.key,r,new hn(i.toArray()),bn.none())}}function KV(t,e,n){t instanceof Uu?function(i,s,o){const a=i.value.clone(),l=U1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ts?function(i,s,o){if(!mh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=U1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(xA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Al(t,e,n,r){return t instanceof Uu?function(s,o,a,l){if(!mh(s.precondition,o))return a;const c=s.value.clone(),h=j1(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ts?function(s,o,a,l){if(!mh(s.precondition,o))return a;const c=j1(s.fieldTransforms,l,o),h=o.data;return h.setAll(xA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return mh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function QV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=RA(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function F1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ko(r,i,(s,o)=>qV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uu extends uf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ts extends uf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U1(t,e,n){const r=new Map;ye(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,WV(o,a,n[i]))}return r}function j1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,zV(s,o,e))}return r}class Zy extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YV extends uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Al(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Al(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=bA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,(n,r)=>F1(n,r))&&Ko(this.baseMutations,e.baseMutations,(n,r)=>F1(n,r))}}class ev{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length);let i=function(){return FV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ev(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,ce;function eF(t){switch(t){default:return J();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function NA(t){if(t===void 0)return Kr("GRPC error has no .code"),j.UNKNOWN;switch(t){case Je.OK:return j.OK;case Je.CANCELLED:return j.CANCELLED;case Je.UNKNOWN:return j.UNKNOWN;case Je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Je.INTERNAL:return j.INTERNAL;case Je.UNAVAILABLE:return j.UNAVAILABLE;case Je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Je.NOT_FOUND:return j.NOT_FOUND;case Je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Je.ABORTED:return j.ABORTED;case Je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Je.DATA_LOSS:return j.DATA_LOSS;default:return J()}}(ce=Je||(Je={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=new Es([4294967295,4294967295],0);function B1(t){const e=tF().encode(t),n=new nA;return n.update(e),new Uint8Array(n.digest())}function $1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Es([n,r],0),new Es([i,s],0)]}class tv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cl(`Invalid padding: ${n}`);if(r<0)throw new cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Es.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Es.fromNumber(r)));return i.compare(nF)===1&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B1(e),[r,i]=$1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=B1(e),[r,i]=$1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cf(ee.min(),i,new nt(fe),Qr(),le())}}class ju{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ju(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class OA{constructor(e,n){this.targetId=e,this.me=n}}class DA{constructor(e,n,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class z1{constructor(){this.fe=0,this.ge=H1(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new ju(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=H1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rF{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=W1(),this.Qe=new nt(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(zg(s))if(r===0){const o=new Q(s.path);this.Ue(n,o,Ot.newNoDocument(o,ee.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ns(r).toUint8Array()}catch(l){if(l instanceof hA)return Go("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tv(o,i,s)}catch(l){return Go(l instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&zg(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ot.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new cf(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=W1(),this.Qe=new nt(fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new z1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function W1(){return new nt(Q.comparator)}function H1(){return new nt(Q.comparator)}const iF={asc:"ASCENDING",desc:"DESCENDING"},sF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oF={and:"AND",or:"OR"};class aF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hg(t,e){return t.useProto3Json||sf(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lF(t,e){return hd(t,e.toTimestamp())}function cr(t){return ye(!!t),ee.fromTimestamp(function(n){const r=Bi(n);return new lt(r.seconds,r.nanos)}(t))}function nv(t,e){return qg(t,e).canonicalString()}function qg(t,e){const n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MA(t){const e=Ne.fromString(t);return ye(BA(e)),e}function Gg(t,e){return nv(t.databaseId,e.path)}function um(t,e){const n=MA(e);if(n.get(1)!==t.databaseId.projectId)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(FA(n))}function VA(t,e){return nv(t.databaseId,e)}function uF(t){const e=MA(t);return e.length===4?Ne.emptyPath():FA(e)}function Kg(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FA(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function q1(t,e,n){return{name:Gg(t,e),fields:n.value.mapValue.fields}}function cF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ye(h===void 0||typeof h=="string"),St.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array),St.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:NA(c.code);return new q(h,c.message||"")}(o);n=new DA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=um(t,r.document.name),s=cr(r.document.updateTime),o=r.document.createTime?cr(r.document.createTime):ee.min(),a=new Yt({mapValue:{fields:r.document.fields}}),l=Ot.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new gh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=um(t,r.document),s=r.readTime?cr(r.readTime):ee.min(),o=Ot.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=um(t,r.document),s=r.removedTargetIds||[];n=new gh([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ZV(i,s),a=r.targetId;n=new OA(a,o)}}return n}function hF(t,e){let n;if(e instanceof Uu)n={update:q1(t,e.key,e.value)};else if(e instanceof Zy)n={delete:Gg(t,e.key)};else if(e instanceof ts)n={update:q1(t,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof YV))return J();n={verify:Gg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof uu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:lF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function dF(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cr(i.updateTime):cr(s);return o.isEqual(ee.min())&&(o=cr(s)),new GV(o,i.transformResults||[])}(n,e))):[]}function fF(t,e){return{documents:[VA(t,e.path)]}}function pF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VA(t,i);const s=function(c){if(c.length!==0)return jA(Gn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:oo(p.field),direction:_F(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function mF(t){let e=uF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=UA(d);return p instanceof Gn&&mA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new lu(ao(_.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,sf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,y=d.values||[];return new ld(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,y=d.values||[];return new ld(y,p)}(n.endAt)),OV(e,i,o,s,a,"F",l,c)}function gF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ao(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ao(n.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ao(n.unaryFilter.field);return tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ao(n.unaryFilter.field);return tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(ao(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(r=>UA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function _F(t){return iF[t]}function yF(t){return sF[t]}function vF(t){return oF[t]}function oo(t){return{fieldPath:t.canonicalString()}}function ao(t){return vt.fromServerFormat(t.fieldPath)}function jA(t){return t instanceof tt?function(n){if(n.op==="=="){if(N1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(x1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(N1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(x1(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:yF(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const r=n.getFilters().map(i=>jA(i));return r.length===1?r[0]:{compositeFilter:{op:vF(n.op),filters:r}}}(t):J()}function wF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.ct=e}}function TF(t){const e=mF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.un=new CF}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ji.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class CF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xo(0)}static kn(){return new Xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.changes=new ya(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Al(r.mutation,i,hn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ul();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Qr();const o=Rl(),a=function(){return Rl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ts)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Al(h.mutation,c,h.mutation.getFieldMask(),lt.now())):o.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new RF(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Rl();let i=new nt((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||hn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=CA();h.forEach(p=>{if(!s.has(p)){const y=bA(n.get(p),r.get(p));y!==null&&d.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(gs());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,le())).next(h=>({batchId:a,changes:SA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=ul();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ul();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(d,p){return new _a(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ot.newInvalidDocument(h)))});let a=ul();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Al(h.mutation,c,hn.empty(),lt.now()),af(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:TF(i.bundledQuery),readTime:cr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.overlays=new nt(Q.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=gs(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new nt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=gs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=gs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JV(n,r));let s=this.Ir.get(n);s===void 0&&(s=le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.Tr=new Et(ct.Er),this.dr=new Et(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Ne([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Ne([])),r=new ct(n,e),i=new ct(n,e+1);let s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(ct.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new XV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(fe);return n.forEach(i=>{const s=new ct(i,0),o=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new ct(new Q(s),0);let a=new Et(fe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ct(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.Mr=e,this.docs=function(){return new nt(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ot.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qr();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||pV(fV(h),r)<=0||(i.has(h.key)||af(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OF(this)}getSize(e){return B.resolve(this.size)}}class OF extends IF{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.persistence=e,this.Nr=new ya(n=>Qy(n),Yy),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rv,this.targetCount=0,this.kr=Xo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Hy(0),this.Kr=!1,this.Kr=!0,this.$r=new bF,this.referenceDelegate=e(this),this.Ur=new DF(this),this.indexManager=new SF,this.remoteDocumentCache=function(i){return new NF(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new EF(n),this.Gr=new kF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new xF(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new MF(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class MF extends gV{constructor(e){super(),this.currentSequenceNumber=e}}class iv{constructor(e){this.persistence=e,this.Jr=new rv,this.Yr=null}static Zr(e){return new iv(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ID()?8:_V(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new VF;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ga()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Ga()<=ae.DEBUG&&K("QueryEngine","Query:",so(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ga()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):B.resolve())}Yi(e,n){if(M1(n))return B.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ud(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,ud(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return M1(n)||i.isEqual(ee.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?B.resolve(null):(Ga()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),so(n)),this.rs(e,o,n,dV(i,-1)).next(a=>a))})}ts(e,n){let r=new Et(EA(e));return n.forEach((i,s)=>{af(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ga()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",so(n)),this.Ji.getDocumentsMatchingQuery(e,n,ji.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new nt(fe),this._s=new ya(s=>Qy(s),Yy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jF(t,e,n,r){return new UF(t,e,n,r)}async function $A(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=le();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function BF(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let y=B.resolve();return p.forEach(_=>{y=y.next(()=>h.getEntry(l,_)).next(w=>{const R=c.docVersions.get(_);ye(R!==null),w.version.compareTo(R)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zA(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $F(t,e){const n=te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(St.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(d,y),function(w,R,T){return w.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let l=Qr(),c=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(zF(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function zF(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function WF(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HF(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Qg(t,e,n){const r=te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fu(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function G1(t,e,n){const r=te(t);let i=ee.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=te(l),p=d._s.get(h);return p!==void 0?B.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:le())).next(a=>(qF(r,LV(e),a),{documents:a,Ts:s})))}function qF(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class K1{constructor(){this.activeTargetIds=BV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GF{constructor(){this.so=new K1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function cm(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class XF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=cm(),l=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Go("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=QF[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=cm();return new Promise((o,a)=>{const l=new rA;l.setWithCredentials(!0),l.listenOnce(iA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fh.NO_ERROR:const h=l.getResponseJson();K(Pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case fh.TIMEOUT:K(Pt,`RPC '${e}' ${s} timed out`),a(new q(j.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const d=l.getStatus();if(K(Pt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p?.error;if(y&&y.status&&y.message){const _=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(y.status);a(new q(_,y.message))}else a(new q(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(j.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{K(Pt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(Pt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=cm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aA(),a=oA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");K(Pt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,y=!1;const _=new YF({Io:R=>{y?K(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(K(Pt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),K(Pt,`RPC '${e}' stream ${i} sending:`,R),d.send(R))},To:()=>d.close()}),w=(R,T,E)=>{R.listen(T,I=>{try{E(I)}catch(x){setTimeout(()=>{throw x},0)}})};return w(d,ll.EventType.OPEN,()=>{y||(K(Pt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),w(d,ll.EventType.CLOSE,()=>{y||(y=!0,K(Pt,`RPC '${e}' stream ${i} transport closed`),_.So())}),w(d,ll.EventType.ERROR,R=>{y||(y=!0,Go(Pt,`RPC '${e}' stream ${i} transport errored:`,R),_.So(new q(j.UNAVAILABLE,"The operation could not be completed")))}),w(d,ll.EventType.MESSAGE,R=>{var T;if(!y){const E=R.data[0];ye(!!E);const I=E,x=I.error||((T=I[0])===null||T===void 0?void 0:T.error);if(x){K(Pt,`RPC '${e}' stream ${i} received error:`,x);const L=x.status;let O=function(A){const m=Je[A];if(m!==void 0)return NA(m)}(L),C=x.message;O===void 0&&(O=j.INTERNAL,C="Unknown error status: "+L+" with message "+x.message),y=!0,_.So(new q(O,C)),d.close()}else K(Pt,`RPC '${e}' stream ${i} received:`,E),_.bo(E)}}),w(a,sA.STAT_EVENT,R=>{R.stat===Fg.PROXY?K(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Fg.NOPROXY&&K(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){return new aF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new WA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JF extends HA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=cF(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?cr(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Kg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=zg(l)?{documents:fF(s,l)}:{query:pF(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=LA(s,o.resumeToken);const c=Hg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=hd(s,o.snapshotVersion.toTimestamp());const c=Hg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=gF(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Kg(this.serializer),n.removeTarget=e,this.a_(n)}}class ZF extends HA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=dF(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Kg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>hF(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,qg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,qg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kr(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=te(l);c.L_.add(4),await Bu(c),c.q_.set("Unknown"),c.L_.delete(4),await df(c)}(this))})}),this.q_=new tU(r,i)}}async function df(t){if(Ws(t))for(const e of t.B_)await e(!0)}async function Bu(t){for(const e of t.B_)await e(!1)}function qA(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),uv(n)?lv(n):va(n).r_()&&av(n,e))}function ov(t,e){const n=te(t),r=va(n);n.N_.delete(e),r.r_()&&GA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ws(n)&&n.q_.set("Unknown"))}function av(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}va(t).A_(e)}function GA(t,e){t.Q_.xe(e),va(t).R_(e)}function lv(t){t.Q_=new rF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),va(t).start(),t.q_.v_()}function uv(t){return Ws(t)&&!va(t).n_()&&t.N_.size>0}function Ws(t){return te(t).L_.size===0}function KA(t){t.Q_=void 0}async function rU(t){t.q_.set("Online")}async function iU(t){t.N_.forEach((e,n)=>{av(t,e)})}async function sU(t,e){KA(t),uv(t)?(t.q_.M_(e),lv(t)):t.q_.set("Unknown")}async function oU(t,e,n){if(t.q_.set("Online"),e instanceof DA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dd(t,r)}else if(e instanceof gh?t.Q_.Ke(e):e instanceof OA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await zA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(St.EMPTY_BYTE_STRING,h.snapshotVersion)),GA(s,l);const d=new Ei(h.target,l,c,h.sequenceNumber);av(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await dd(t,r)}}async function dd(t,e,n){if(!Fu(e))throw e;t.L_.add(1),await Bu(t),t.q_.set("Offline"),n||(n=()=>zA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await df(t)})}function QA(t,e){return e().catch(n=>dd(t,n,e))}async function ff(t){const e=te(t),n=$i(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aU(e);)try{const i=await WF(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,lU(e,i)}catch(i){await dd(e,i)}YA(e)&&XA(e)}function aU(t){return Ws(t)&&t.O_.length<10}function lU(t,e){t.O_.push(e);const n=$i(t);n.r_()&&n.V_&&n.m_(e.mutations)}function YA(t){return Ws(t)&&!$i(t).n_()&&t.O_.length>0}function XA(t){$i(t).start()}async function uU(t){$i(t).p_()}async function cU(t){const e=$i(t);for(const n of t.O_)e.m_(n.mutations)}async function hU(t,e,n){const r=t.O_.shift(),i=ev.from(r,e,n);await QA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ff(t)}async function dU(t,e){e&&$i(t).V_&&await async function(r,i){if(function(o){return eF(o)&&o!==j.ABORTED}(i.code)){const s=r.O_.shift();$i(r).s_(),await QA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ff(r)}}(t,e),YA(t)&&XA(t)}async function Y1(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.L_.add(3),await Bu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await df(n)}async function fU(t,e){const n=te(t);e?(n.L_.delete(2),await df(n)):e||(n.L_.add(2),await Bu(n),n.q_.set("Unknown"))}function va(t){return t.K_||(t.K_=function(n,r,i){const s=te(n);return s.w_(),new JF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:rU.bind(null,t),Ro:iU.bind(null,t),mo:sU.bind(null,t),d_:oU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),uv(t)?lv(t):t.q_.set("Unknown")):(await t.K_.stop(),KA(t))})),t.K_}function $i(t){return t.U_||(t.U_=function(n,r,i){const s=te(n);return s.w_(),new ZF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uU.bind(null,t),mo:dU.bind(null,t),f_:cU.bind(null,t),g_:hU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ff(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new cv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hv(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),Fu(t))return new q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new Do(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Do;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.W_=new nt(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Jo{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Jo(e,n,Do.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mU{constructor(){this.queries=J1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=J1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(j.ABORTED,"Firestore shutting down"))}}function J1(){return new ya(t=>wA(t),of)}async function JA(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new pU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=hv(o,`Initialization of query '${so(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&dv(n)}async function ZA(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gU(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&dv(n)}function _U(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function dv(t){t.Y_.forEach(e=>{e.next()})}var Yg,Z1;(Z1=Yg||(Yg={})).ea="default",Z1.Cache="cache";class ek{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.key=e}}class nk{constructor(e){this.key=e}}class yU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=EA(e),this.Ra=new Do(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new X1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),y=af(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;p&&y?p.data.isEqual(y.data)?_!==w&&(r.track({type:3,doc:y}),R=!0):this.ga(p,y)||(r.track({type:2,doc:y}),R=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),R=!0):p&&!y&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(y?(o=o.add(y),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,_){const w=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return w(y)-w(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Jo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new X1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new nk(r))}),this.da.forEach(r=>{e.has(r)||n.push(new tk(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class vU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wU{constructor(e){this.key=e,this.va=!1}}class EU{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ya(a=>wA(a),of),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(Q.comparator),this.Na=new Map,this.La=new rv,this.Ba={},this.ka=new Map,this.qa=Xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TU(t,e,n=!0){const r=lk(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await rk(r,e,n,!0),i}async function SU(t,e){const n=lk(t);await rk(n,e,!0,!1)}async function rk(t,e,n,r){const i=await HF(t.localStore,ur(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await CU(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&qA(t.remoteStore,i),a}async function CU(t,e,n,r,i){t.Ka=(d,p,y)=>async function(w,R,T,E){let I=R.view.ma(T);I.ns&&(I=await G1(w.localStore,R.query,!1).then(({documents:C})=>R.view.ma(C,I)));const x=E&&E.targetChanges.get(R.targetId),L=E&&E.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(I,w.isPrimaryClient,x,L);return tT(w,R.targetId,O.wa),O.snapshot}(t,d,p,y);const s=await G1(t.localStore,e,!0),o=new yU(e,s.Ts),a=o.ma(s.documents),l=ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);tT(t,n,c.wa);const h=new vU(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function IU(t,e,n){const r=te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!of(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ov(r.remoteStore,i.targetId),Xg(r,i.targetId)}).catch(Vu)):(Xg(r,i.targetId),await Qg(r.localStore,i.targetId,!0))}async function RU(t,e){const n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ov(n.remoteStore,r.targetId))}async function AU(t,e,n){const r=DU(t);try{const i=await function(o,a){const l=te(o),c=lt.now(),h=a.reduce((y,_)=>y.add(_.key),le());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Qr(),w=le();return l.cs.getEntries(y,h).next(R=>{_=R,_.forEach((T,E)=>{E.isValidDocument()||(w=w.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(R=>{d=R;const T=[];for(const E of a){const I=QV(E,d.get(E.key).overlayedDocument);I!=null&&T.push(new ts(E.key,I,dA(I.value.mapValue),bn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,T,a)}).next(R=>{p=R;const T=R.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(y,R.batchId,T)})}).then(()=>({batchId:p.batchId,changes:SA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new nt(fe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await $u(r,i.changes),await ff(r.remoteStore)}catch(i){const s=hv(i,"Failed to persist write");n.reject(s)}}async function ik(t,e){const n=te(t);try{const r=await $F(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ye(o.va):i.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await $u(n,r,e)}catch(r){await Vu(r)}}function eT(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&dv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kU(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new nt(Q.comparator);o=o.insert(s,Ot.newNoDocument(s,ee.min()));const a=le().add(s),l=new cf(ee.min(),new Map,new nt(fe),o,a);await ik(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),fv(r)}else await Qg(r.localStore,e,!1).then(()=>Xg(r,e,n)).catch(Vu)}async function PU(t,e){const n=te(t),r=e.batch.batchId;try{const i=await BF(n.localStore,e);ok(n,r,null),sk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $u(n,i)}catch(i){await Vu(i)}}async function bU(t,e,n){const r=te(t);try{const i=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ye(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);ok(r,e,n),sk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $u(r,i)}catch(i){await Vu(i)}}function sk(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ok(t,e,n){const r=te(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ak(t,r)})}function ak(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ov(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fv(t))}function tT(t,e,n){for(const r of n)r instanceof tk?(t.La.addReference(r.key,e),xU(t,r)):r instanceof nk?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ak(t,r.key)):J()}function xU(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),fv(t))}function fv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new wU(n)),t.Oa=t.Oa.insert(n,r),qA(t.remoteStore,new Ei(ur(Xy(n.path)),r,"TargetPurposeLimboResolution",Hy.oe))}}async function $u(t,e,n){const r=te(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=sv.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>B.forEach(c,p=>B.forEach(p.$i,y=>h.persistence.referenceDelegate.addReference(d,p.targetId,y)).next(()=>B.forEach(p.Ui,y=>h.persistence.referenceDelegate.removeReference(d,p.targetId,y)))))}catch(d){if(!Fu(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const y=h.os.get(p),_=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,w)}}}(r.localStore,s))}async function NU(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await $A(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $u(n,r.hs)}}function OU(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function lk(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ik.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kU.bind(null,e),e.Ca.d_=gU.bind(null,e.eventManager),e.Ca.$a=_U.bind(null,e.eventManager),e}function DU(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bU.bind(null,e),e}class fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return jF(this.persistence,new FF,e.initialUser,this.serializer)}Ga(e){return new LF(iv.Zr,this.serializer)}Wa(e){return new GF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fd.provider={build:()=>new fd};class Jg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NU.bind(null,this.syncEngine),await fU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mU}()}createDatastore(e){const n=hf(e.databaseInfo.databaseId),r=function(s){return new XF(s)}(e.databaseInfo);return function(s,o,a,l){return new eU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new nU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>eT(this.syncEngine,n,0),function(){return Q1.D()?new Q1:new KF}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new EU(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Bu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jg.provider={build:()=>new Jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=uA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dm(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $A(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MU(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Y1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Y1(e.remoteStore,i)),t._onlineComponents=e}async function MU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await dm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),await dm(t,new fd)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await dm(t,new fd);return t._offlineComponents}async function ck(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await nT(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await nT(t,new Jg))),t._onlineComponents}function VU(t){return ck(t).then(e=>e.syncEngine)}async function hk(t){const e=await ck(t),n=e.eventManager;return n.onListen=TU.bind(null,e.syncEngine),n.onUnlisten=IU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RU.bind(null,e.syncEngine),n}function FU(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new uk({next:p=>{h.Za(),o.enqueueAndForget(()=>ZA(s,d));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new ek(Xy(a.path),h,{includeMetadataChanges:!0,_a:!0});return JA(s,d)}(await hk(t),t.asyncQueue,e,n,r)),r.promise}function UU(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new uk({next:p=>{h.Za(),o.enqueueAndForget(()=>ZA(s,d)),p.fromCache&&l.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new ek(a,h,{includeMetadataChanges:!0,_a:!0});return JA(s,d)}(await hk(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t,e,n){if(!n)throw new q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jU(t,e,n,r){if(e===!0&&r===!0)throw new q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iT(t){if(!Q.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sT(t){if(Q.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pf(t);throw new q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rV;switch(r.type){case"firstParty":return new aV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rT.get(n);r&&(K("ComponentProvider","Removing Datastore"),rT.delete(n),r.terminate())}(this),Promise.resolve()}}function BU(t,e,n,r={}){var i;const s=(t=Kn(t,mf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=xt.MOCK_USER;else{a=Ny(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new xt(c)}t._authCredentials=new iV(new lA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class Di extends ns{constructor(e,n,r){super(e,n,Xy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Q(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function Zo(t,e,...n){if(t=Ce(t),fk("collection","path",e),t instanceof mf){const r=Ne.fromString(e,...n);return sT(r),new Di(t,null,r)}{if(!(t instanceof Ht||t instanceof Di))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return sT(r),new Di(t.firestore,null,r)}}function rr(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=uA.newId()),fk("doc","path",e),t instanceof mf){const r=Ne.fromString(e,...n);return iT(r),new Ht(t,null,new Q(r))}{if(!(t instanceof Ht||t instanceof Di))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return iT(r),new Ht(t.firestore,t instanceof Di?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new WA(this,"async_queue_retry"),this.Vu=()=>{const r=hm();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fu(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=cv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Hs extends mf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new aT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aT(e),this._firestoreClient=void 0,await e}}}function $U(t,e){const n=typeof t=="object"?t:ef(),r=typeof t=="string"?t:"(default)",i=Nu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=by("firestore");s&&BU(i,...s)}return i}function pv(t){if(t._terminated)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zU(t),t._firestoreClient}function zU(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new wV(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new LU(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(St.fromBase64String(e))}catch(n){throw new q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ea(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=/^__.*__$/;class HU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uu(e,this.data,n,this.fieldTransforms)}}class pk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class _v{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mk(this.Cu)&&WU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class qU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hf(e)}Qu(e,n,r,i=!1){return new _v({Cu:e,methodName:n,qu:r,path:vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(t){const e=t._freezeSettings(),n=hf(t._databaseId);return new qU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gk(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);vv("Data must be an object, but it was:",o,r);const a=_k(r,o);let l,c;if(s.merge)l=new hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Zg(e,d,n);if(!o.contains(p))throw new q(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vk(h,p)||h.push(p)}l=new hn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new HU(new Yt(a),l,c)}class vf extends _f{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}class yv extends _f{_toFieldTransform(e){return new HV(e.path,new uu)}isEqual(e){return e instanceof yv}}function GU(t,e,n,r){const i=t.Qu(1,e,n);vv("Data must be an object, but it was:",i,r);const s=[],o=Yt.empty();zs(r,(l,c)=>{const h=wv(e,l,n);c=Ce(c);const d=i.Nu(h);if(c instanceof vf)s.push(h);else{const p=zu(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new hn(s);return new pk(o,a,i.fieldTransforms)}function KU(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Zg(e,r,n)],l=[i];if(s.length%2!=0)throw new q(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Zg(e,s[p])),l.push(s[p+1]);const c=[],h=Yt.empty();for(let p=a.length-1;p>=0;--p)if(!vk(c,a[p])){const y=a[p];let _=l[p];_=Ce(_);const w=o.Nu(y);if(_ instanceof vf)c.push(y);else{const R=zu(_,w);R!=null&&(c.push(y),h.set(y,R))}}const d=new hn(c);return new pk(h,d,o.fieldTransforms)}function QU(t,e,n,r=!1){return zu(n,t.Qu(r?4:3,e))}function zu(t,e){if(yk(t=Ce(t)))return vv("Unsupported field value:",e,t),_k(t,e);if(t instanceof _f)return function(r,i){if(!mk(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=zu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $V(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:hd(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(i.serializer,s)}}if(r instanceof mv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:LA(i.serializer,r._byteString)};if(r instanceof Ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Jy(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${pf(r)}`)}(t,e)}function _k(t,e){const n={};return cA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(t,(r,i)=>{const s=zu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function yk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof mv||t instanceof ea||t instanceof Ht||t instanceof _f||t instanceof gv)}function vv(t,e,n){if(!yk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=pf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Zg(t,e,n){if((e=Ce(e))instanceof gf)return e._internalPath;if(typeof e=="string")return wv(t,e);throw pd("Field path arguments must be of type string or ",t,!1,void 0,n)}const YU=new RegExp("[~\\*/\\[\\]]");function wv(t,e,n){if(e.search(YU)>=0)throw pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gf(...e.split("."))._internalPath}catch{throw pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(j.INVALID_ARGUMENT,a+t+l)}function vk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XU extends wk{data(){return super.data()}}function wf(t,e){return typeof e=="string"?wv(t,e):e instanceof gf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ev{}class Tv extends Ev{}function Ek(t,e,...n){let r=[];e instanceof Ev&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Sv).length,a=s.filter(l=>l instanceof Ef).length;if(o>1||o>0&&a>0)throw new q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ef extends Tv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ef(e,n,r)}_apply(e){const n=this._parse(e);return Tk(e._query,n),new ns(e.firestore,e.converter,Wg(e._query,n))}_parse(e){const n=yf(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){uT(d,h);const y=[];for(const _ of d)y.push(lT(l,s,_));p={arrayValue:{values:y}}}else p=lT(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||uT(d,h),p=QU(a,o,d,h==="in"||h==="not-in");return tt.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ZU(t,e,n){const r=e,i=wf("where",t);return Ef._create(i,r,n)}class Sv extends Ev{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Tk(o,l),o=Wg(o,l)}(e._query,n),new ns(e.firestore,e.converter,Wg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cv extends Tv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(s,o)}(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new _a(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function e3(t,e="asc"){const n=e,r=wf("orderBy",t);return Cv._create(r,n)}class Iv extends Tv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Iv(e,n,r)}_apply(e){return new ns(e.firestore,e.converter,ud(e._query,this._limit,this._limitType))}}function t3(t){return Iv._create("limit",t,"F")}function lT(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vA(e)&&n.indexOf("/")!==-1)throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!Q.isDocumentKey(r))throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return b1(t,new Q(r))}if(n instanceof Ht)return b1(t,n._key);throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(n)}.`)}function uT(t,e){if(!Array.isArray(t)||t.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tk(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class n3{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ke(o.doubleValue));return new gv(s)}convertGeoPoint(e){return new mv(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const n=Bi(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);ye(BA(r));const i=new ou(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||Kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ck extends wk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _h extends Ck{data(e={}){return super.data(e)}}class r3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _h(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new _h(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new _h(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:i3(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function i3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){t=Kn(t,Ht);const e=Kn(t.firestore,Hs);return FU(pv(e),t._key).then(n=>a3(e,t,n))}class Ik extends n3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function e_(t){t=Kn(t,ns);const e=Kn(t.firestore,Hs),n=pv(e),r=new Ik(e);return JU(t._query),UU(n,t._query).then(i=>new r3(e,r,t,i))}function s3(t,e,n){t=Kn(t,Ht);const r=Kn(t.firestore,Hs),i=Sk(t.converter,e);return Sf(r,[gk(yf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,bn.none())])}function t_(t,e,n,...r){t=Kn(t,Ht);const i=Kn(t.firestore,Hs),s=yf(i);let o;return o=typeof(e=Ce(e))=="string"||e instanceof gf?KU(s,"updateDoc",t._key,e,n,r):GU(s,"updateDoc",t._key,e),Sf(i,[o.toMutation(t._key,bn.exists(!0))])}function o3(t){return Sf(Kn(t.firestore,Hs),[new Zy(t._key,bn.none())])}function Rv(t,e){const n=Kn(t.firestore,Hs),r=rr(t),i=Sk(t.converter,e);return Sf(n,[gk(yf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function Sf(t,e){return function(r,i){const s=new Fr;return r.asyncQueue.enqueueAndForget(async()=>AU(await VU(r),i,s)),s.promise}(pv(t),e)}function a3(t,e,n){const r=n.docs.get(e._key),i=new Ik(t);return new Ck(t,i,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function l3(){return new yv("serverTimestamp")}(function(e,n=!0){(function(i){ga=i})(Ji),Ui(new Hr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Hs(new sV(r.getProvider("auth-internal")),new uV(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pn(I1,"4.7.3",e),Pn(I1,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="firebasestorage.googleapis.com",Ak="storageBucket",u3=2*60*1e3,c3=10*60*1e3,h3=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends pr{constructor(e,n,r=0){super(fm(e),`Firebase Storage: ${n} (${fm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function fm(t){return"storage/"+t}function Av(){const t="An unknown error occurred, please check the error payload for server response.";return new Be(De.UNKNOWN,t)}function d3(t){return new Be(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function f3(t){return new Be(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function p3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(De.UNAUTHENTICATED,t)}function m3(){return new Be(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function g3(t){return new Be(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function kk(){return new Be(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Pk(){return new Be(De.CANCELED,"User canceled the upload/download.")}function _3(t){return new Be(De.INVALID_URL,"Invalid URL '"+t+"'.")}function y3(t){return new Be(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function v3(){return new Be(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ak+"' property when initializing the app?")}function bk(){return new Be(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function w3(){return new Be(De.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function E3(){return new Be(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function T3(t){return new Be(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function n_(t){return new Be(De.INVALID_ARGUMENT,t)}function xk(){return new Be(De.APP_DELETED,"The Firebase app was deleted.")}function S3(t){return new Be(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kl(t,e){return new Be(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ka(t){throw new Be(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(r.path==="")return r;throw y3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},w=n===Rk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",T=new RegExp(`^https?://${w}/${i}/${R}`,"i"),I=[{regex:a,indices:l,postModify:s},{regex:y,indices:_,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<I.length;x++){const L=I[x],O=L.regex.exec(e);if(O){const C=O[L.indices.bucket];let v=O[L.indices.path];v||(v=""),r=new dn(C,v),L.postModify(r);break}}if(r==null)throw _3(e);return r}}class C3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...R){c||(c=!0,e.apply(null,R))}function d(R){i=setTimeout(()=>{i=null,t(y,l())},R)}function p(){s&&clearTimeout(s)}function y(R,...T){if(c){p();return}if(R){p(),h.call(null,R,...T);return}if(l()||o){p(),h.call(null,R,...T);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,d(I)}let _=!1;function w(R){_||(_=!0,p(),!c&&(i!==null?(R||(a=2),clearTimeout(i),d(0)):R||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function R3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(t){return t!==void 0}function k3(t){return typeof t=="function"}function P3(t){return typeof t=="object"&&!Array.isArray(t)}function Cf(t){return typeof t=="string"||t instanceof String}function cT(t){return kv()&&t instanceof Blob}function kv(){return typeof Blob<"u"}function hT(t,e,n,r){if(r<e)throw n_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw n_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Nk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ts;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ts||(Ts={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r,i,s,o,a,l,c,h,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,_)=>{this.resolve_=y,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Wc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ts.NO_ERROR,l=s.getStatus();if(!a||Ok(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ts.ABORT;r(!1,new Wc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Wc(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());A3(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Av();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?xk():Pk();o(l)}else{const l=kk();o(l)}};this.canceled_?n(!1,new Wc(!1,null,!0)):this.backoffId_=I3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&R3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function x3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function N3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function D3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function L3(t,e,n,r,i,s,o=!0){const a=Nk(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return O3(c,e),x3(c,n),N3(c,s),D3(c,r),new b3(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function V3(...t){const e=M3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kv())return new Blob(t);throw new Be(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function F3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){if(typeof atob>"u")throw T3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pm{constructor(e,n){this.data=e,this.contentType=n||null}}function j3(t,e){switch(t){case ir.RAW:return new pm(Dk(e));case ir.BASE64:case ir.BASE64URL:return new pm(Lk(t,e));case ir.DATA_URL:return new pm($3(e),z3(e))}throw Av()}function Dk(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function B3(t){let e;try{e=decodeURIComponent(t)}catch{throw kl(ir.DATA_URL,"Malformed data URL.")}return Dk(e)}function Lk(t,e){switch(t){case ir.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw kl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ir.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw kl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=U3(e)}catch(i){throw i.message.includes("polyfill")?i:kl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Mk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw kl(ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=W3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $3(t){const e=new Mk(t);return e.base64?Lk(ir.BASE64,e.rest):B3(e.rest)}function z3(t){return new Mk(t).contentType}function W3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){let r=0,i="";cT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(cT(this.data_)){const r=this.data_,i=F3(r,e,n);return i===null?null:new Ar(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ar(r,!0)}}static getBlob(...e){if(kv()){const n=e.map(r=>r instanceof Ar?r.data_:r);return new Ar(V3.apply(null,n))}else{const n=e.map(o=>Cf(o)?j3(ir.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ar(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){let e;try{e=JSON.parse(t)}catch{return null}return P3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function q3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Fk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t,e){return e}class Ut{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||G3}}let Hc=null;function K3(t){return!Cf(t)||t.length<2?t:Fk(t)}function Pv(){if(Hc)return Hc;const t=[];t.push(new Ut("bucket")),t.push(new Ut("generation")),t.push(new Ut("metageneration")),t.push(new Ut("name","fullPath",!0));function e(s,o){return K3(o)}const n=new Ut("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ut("size");return i.xform=r,t.push(i),t.push(new Ut("timeCreated")),t.push(new Ut("updated")),t.push(new Ut("md5Hash",null,!0)),t.push(new Ut("cacheControl",null,!0)),t.push(new Ut("contentDisposition",null,!0)),t.push(new Ut("contentEncoding",null,!0)),t.push(new Ut("contentLanguage",null,!0)),t.push(new Ut("contentType",null,!0)),t.push(new Ut("metadata","customMetadata",!0)),Hc=t,Hc}function Q3(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new dn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Y3(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Q3(r,t),r}function Uk(t,e,n){const r=Vk(e);return r===null?null:Y3(t,r,n)}function X3(t,e,n,r){const i=Vk(e);if(i===null||!Cf(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),y=Wu(p,n,r),_=Nk({alt:"media",token:c});return y+_})[0]}function jk(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class wa{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t){if(!t)throw Av()}function bv(t,e){function n(r,i){const s=Uk(t,i,e);return Ur(s!==null),s}return n}function J3(t,e){function n(r,i){const s=Uk(t,i,e);return Ur(s!==null),X3(s,i,t.host,t._protocol)}return n}function Hu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=m3():i=p3():n.getStatus()===402?i=f3(t.bucket):n.getStatus()===403?i=g3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Bk(t){const e=Hu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=d3(t.path)),s.serverResponse=i.serverResponse,s}return n}function Z3(t,e,n){const r=e.fullServerUrl(),i=Wu(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wa(i,s,bv(t,n),o);return a.errorHandler=Bk(e),a}function e5(t,e,n){const r=e.fullServerUrl(),i=Wu(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wa(i,s,J3(t,n),o);return a.errorHandler=Bk(e),a}function t5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function $k(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=t5(null,e)),r}function zk(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let x=0;x<2;x++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=$k(e,r,i),h=jk(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",y=Ar.getBlob(d,r,p);if(y===null)throw bk();const _={name:c.fullPath},w=Wu(s,t.host,t._protocol),R="POST",T=t.maxUploadRetryTime,E=new wa(w,R,bv(t,n),T);return E.urlParams=_,E.headers=o,E.body=y.uploadData(),E.errorHandler=Hu(e),E}class md{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function xv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ur(!1)}return Ur(!!n&&(e||["active"]).indexOf(n)!==-1),n}function n5(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=$k(e,r,i),a={name:o.fullPath},l=Wu(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=jk(o,n),p=t.maxUploadRetryTime;function y(w){xv(w);let R;try{R=w.getResponseHeader("X-Goog-Upload-URL")}catch{Ur(!1)}return Ur(Cf(R)),R}const _=new wa(l,c,y,p);return _.urlParams=a,_.headers=h,_.body=d,_.errorHandler=Hu(e),_}function r5(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=xv(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ur(!1)}d||Ur(!1);const p=Number(d);return Ur(!isNaN(p)),new md(p,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new wa(n,o,s,a);return l.headers=i,l.errorHandler=Hu(e),l}const dT=256*1024;function i5(t,e,n,r,i,s,o,a){const l=new md(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw w3();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const d=l.current,p=d+h;let y="";h===0?y="finalize":c===h?y="upload, finalize":y="upload";const _={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},w=r.slice(d,p);if(w===null)throw bk();function R(x,L){const O=xv(x,["active","final"]),C=l.current+h,v=r.size();let A;return O==="final"?A=bv(e,s)(x,L):A=null,new md(C,v,O==="final",A)}const T="POST",E=e.maxUploadRetryTime,I=new wa(n,T,R,E);return I.headers=_,I.body=w.uploadData(),I.progressCallback=a||null,I.errorHandler=Hu(t),I}const Kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mm(t){switch(t){case"running":case"pausing":case"canceling":return Kt.RUNNING;case"paused":return Kt.PAUSED;case"success":return Kt.SUCCESS;case"canceled":return Kt.CANCELED;case"error":return Kt.ERROR;default:return Kt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,r){if(k3(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class o5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ts.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ts.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ts.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ka("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ka("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ka("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ka("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ka("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class a5 extends o5{initXhr(){this.xhr_.responseType="text"}}function ds(){return new a5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Pv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(De.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Ok(i.status,[]))if(s)i=kk();else{this.sleepTime=Math.max(this.sleepTime*2,h3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(De.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=n5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ds,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=r5(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ds,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=dT*this._chunkMultiplier,n=new md(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=i5(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ds,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){dT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Z3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ds,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=zk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ds,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Pk(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=mm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new s5(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(mm(this._state)){case Kt.SUCCESS:Js(this._resolve.bind(null,this.snapshot))();break;case Kt.CANCELED:case Kt.ERROR:const n=this._reject;Js(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(mm(this._state)){case Kt.RUNNING:case Kt.PAUSED:e.next&&Js(e.next.bind(e,this.snapshot))();break;case Kt.SUCCESS:e.complete&&Js(e.complete.bind(e))();break;case Kt.CANCELED:case Kt.ERROR:e.error&&Js(e.error.bind(e,this._error))();break;default:e.error&&Js(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ds(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fk(this._location.path)}get storage(){return this._service}get parent(){const e=H3(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new Ds(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw S3(e)}}function u5(t,e,n){t._throwIfRoot("uploadBytes");const r=zk(t.storage,t._location,Pv(),new Ar(e,!0),n);return t.storage.makeRequestWithTokens(r,ds).then(i=>({metadata:i,ref:t}))}function c5(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new l5(t,new Ar(e),n)}function h5(t){t._throwIfRoot("getDownloadURL");const e=e5(t.storage,t._location,Pv());return t.storage.makeRequestWithTokens(e,ds).then(n=>{if(n===null)throw E3();return n})}function d5(t,e){const n=q3(t._location.path,e),r=new dn(t._location.bucket,n);return new Ds(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(t){return/^[A-Za-z]+:\/\//.test(t)}function p5(t,e){return new Ds(t,e)}function Wk(t,e){if(t instanceof Nv){const n=t;if(n._bucket==null)throw v3();const r=new Ds(n,n._bucket);return e!=null?Wk(r,e):r}else return e!==void 0?d5(t,e):t}function m5(t,e){if(e&&f5(e)){if(t instanceof Nv)return p5(t,e);throw n_("To use ref(service, url), the first argument must be a Storage instance.")}else return Wk(t,e)}function fT(t,e){const n=e?.[Ak];return n==null?null:dn.makeFromBucketSpec(n,t)}function g5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ny(i,t.app.options.projectId))}class Nv{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=u3,this._maxUploadRetryTime=c3,this._requests=new Set,i!=null?this._bucket=dn.makeFromBucketSpec(i,this._host):this._bucket=fT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=fT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ds(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new C3(xk());{const o=L3(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const pT="@firebase/storage",mT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="storage";function _5(t,e,n){return t=Ce(t),u5(t,e,n)}function y5(t,e,n){return t=Ce(t),c5(t,e,n)}function qk(t){return t=Ce(t),h5(t)}function Ov(t,e){return t=Ce(t),m5(t,e)}function v5(t=ef(),e){t=Ce(t);const r=Nu(t,Hk).getImmediate({identifier:e}),i=by("storage");return i&&w5(r,...i),r}function w5(t,e,n,r={}){g5(t,e,n,r)}function E5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Nv(n,r,i,e,Ji)}function T5(){Ui(new Hr(Hk,E5,"PUBLIC").setMultipleInstances(!0)),Pn(pT,mT,""),Pn(pT,mT,"esm2017")}T5();const S5={apiKey:"AIzaSyARIjQ4Ex4l7juv8hQLQV9xf71BB3djlV0",authDomain:"plant-app1.firebaseapp.com",projectId:"plant-app1",storageBucket:"plant-app1.appspot.com",messagingSenderId:"1035431173693",appId:"1:1035431173693:web:7d5b0f0d48b60c47c4bc30"},Dv=_R(S5),fr=tA(Dv),$t=$U(Dv),Lv=v5(Dv),Gk=()=>{const t=bu(),[e,n]=V.useState(!1),[r,i]=V.useState({name:"",number:"",gender:"Male",age:"",username:"",password:"",confirmPassword:""}),[s,o]=V.useState(""),[a,l]=V.useState(""),c=p=>{const{name:y,value:_}=p.target;i({...r,[y]:_})},h=async p=>{if(p.preventDefault(),l(""),e&&r.password!==r.confirmPassword){l("Passwords do not match.");return}try{if(e){const _=(await $M(fr,r.username,r.password)).user,w=rr($t,"users",_.uid),R={name:r.name,number:r.number,gender:r.gender,age:r.age,email:r.username,pwd:r.password};await s3(w,R),localStorage.setItem("userDetails",JSON.stringify(R)),o("Signup successful! Welcome!"),t("/home")}else{const _=(await zM(fr,r.username,r.password)).user,w=rr($t,"users",_.uid),R=await Tf(w);if(R.exists()){const T=R.data();localStorage.setItem("userDetails",JSON.stringify(T)),t("/home")}else l("No user details found.")}}catch(y){console.error("Error:",y.message),l("Error: "+y.message)}},d=()=>{t("/home")};return P.jsxs("div",{className:"login-container",children:[P.jsx("h1",{className:"login-title",children:"Flaming Ice"}),P.jsx("h2",{className:"login-subtitle",children:e?"Sign Up":"Login to your Account"}),P.jsxs("form",{onSubmit:h,className:"login-form",children:[e&&P.jsxs(P.Fragment,{children:[P.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:c,required:!0,className:"input-field"}),P.jsx("input",{type:"tel",name:"number",placeholder:"Phone Number",value:r.number,onChange:c,required:!0,className:"input-field"}),P.jsxs("select",{name:"gender",value:r.gender,onChange:c,className:"input-field",children:[P.jsx("option",{value:"Male",children:"Male"}),P.jsx("option",{value:"Female",children:"Female"}),P.jsx("option",{value:"Other",children:"Other"})]}),P.jsx("input",{type:"number",name:"age",placeholder:"Age",value:r.age,onChange:c,required:!0,className:"input-field"})]}),P.jsx("input",{type:"email",name:"username",placeholder:e?"Email":"Email or Phone",value:r.username,onChange:c,required:!0,className:"input-field"}),P.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:c,required:!0,className:"input-field"}),e&&P.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Enter Password again",value:r.confirmPassword,onChange:c,required:!0,className:"input-field"}),P.jsx("button",{type:"submit",className:"submit-button",children:e?"Sign Up":"Login"}),P.jsx("button",{type:"button",onClick:d,className:"skip-button",children:"Skip"})]}),a&&P.jsx("p",{className:"error-message",children:a}),s&&P.jsx("p",{className:"success-message",children:s}),P.jsx("button",{onClick:()=>n(!e),className:"toggle-button",children:e?"Already have an account? Login":"Dont have an account? Sign Up"})]})},C5="Left",I5="Right",R5="Up",A5="Down",To={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},r_={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},gT="mousemove",_T="mouseup",k5="touchend",P5="touchmove",b5="touchstart";function x5(t,e,n,r){return t>e?n>0?I5:C5:r>0?A5:R5}function yT(t,e){if(e===0)return t;const n=Math.PI/180*e,r=t[0]*Math.cos(n)+t[1]*Math.sin(n),i=t[1]*Math.cos(n)-t[0]*Math.sin(n);return[r,i]}function N5(t,e){const n=h=>{const d="touches"in h;d&&h.touches.length>1||t((p,y)=>{y.trackMouse&&!d&&(document.addEventListener(gT,r),document.addEventListener(_T,o));const{clientX:_,clientY:w}=d?h.touches[0]:h,R=yT([_,w],y.rotationAngle);return y.onTouchStartOrOnMouseDown&&y.onTouchStartOrOnMouseDown({event:h}),Object.assign(Object.assign(Object.assign({},p),r_),{initial:R.slice(),xy:R,start:h.timeStamp||0})})},r=h=>{t((d,p)=>{const y="touches"in h;if(y&&h.touches.length>1)return d;if(h.timeStamp-d.start>p.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:_,clientY:w}=y?h.touches[0]:h,[R,T]=yT([_,w],p.rotationAngle),E=R-d.xy[0],I=T-d.xy[1],x=Math.abs(E),L=Math.abs(I),O=(h.timeStamp||0)-d.start,C=Math.sqrt(x*x+L*L)/(O||1),v=[E/(O||1),I/(O||1)],A=x5(x,L,E,I),m=typeof p.delta=="number"?p.delta:p.delta[A.toLowerCase()]||To.delta;if(x<m&&L<m&&!d.swiping)return d;const k={absX:x,absY:L,deltaX:E,deltaY:I,dir:A,event:h,first:d.first,initial:d.initial,velocity:C,vxvy:v};k.first&&p.onSwipeStart&&p.onSwipeStart(k),p.onSwiping&&p.onSwiping(k);let N=!1;return(p.onSwiping||p.onSwiped||p[`onSwiped${A}`])&&(N=!0),N&&p.preventScrollOnSwipe&&p.trackTouch&&h.cancelable&&h.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:k,swiping:!0})})},i=h=>{t((d,p)=>{let y;if(d.swiping&&d.eventData){if(h.timeStamp-d.start<p.swipeDuration){y=Object.assign(Object.assign({},d.eventData),{event:h}),p.onSwiped&&p.onSwiped(y);const _=p[`onSwiped${y.dir}`];_&&_(y)}}else p.onTap&&p.onTap({event:h});return p.onTouchEndOrOnMouseUp&&p.onTouchEndOrOnMouseUp({event:h}),Object.assign(Object.assign(Object.assign({},d),r_),{eventData:y})})},s=()=>{document.removeEventListener(gT,r),document.removeEventListener(_T,o)},o=h=>{s(),i(h)},a=(h,d)=>{let p=()=>{};if(h&&h.addEventListener){const y=Object.assign(Object.assign({},To.touchEventOptions),d.touchEventOptions),_=[[b5,n,y],[P5,r,Object.assign(Object.assign({},y),d.preventScrollOnSwipe?{passive:!1}:{})],[k5,i,y]];_.forEach(([w,R,T])=>h.addEventListener(w,R,T)),p=()=>_.forEach(([w,R])=>h.removeEventListener(w,R))}return p},c={ref:h=>{h!==null&&t((d,p)=>{if(d.el===h)return d;const y={};return d.el&&d.el!==h&&d.cleanUpTouch&&(d.cleanUpTouch(),y.cleanUpTouch=void 0),p.trackTouch&&h&&(y.cleanUpTouch=a(h,p)),Object.assign(Object.assign(Object.assign({},d),{el:h}),y)})}};return e.trackMouse&&(c.onMouseDown=n),[c,a]}function O5(t,e,n,r){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})}function D5(t){const{trackMouse:e}=t,n=V.useRef(Object.assign({},r_)),r=V.useRef(Object.assign({},To)),i=V.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},To),t);let s;for(s in To)r.current[s]===void 0&&(r.current[s]=To[s]);const[o,a]=V.useMemo(()=>N5(l=>n.current=l(n.current,r.current),{trackMouse:e}),[e]);return n.current=O5(n.current,r.current,i.current,a),o}const If=V.createContext(),L5=({children:t})=>{const[e,n]=V.useState(!1);V.useEffect(()=>{const i=localStorage.getItem("theme");i&&n(i==="dark")},[]),V.useEffect(()=>{localStorage.setItem("theme",e?"dark":"light"),document.body.classList.toggle("dark-mode",e),document.body.classList.toggle("light-mode",!e)},[e]);const r=()=>{n(i=>!i)};return P.jsx(If.Provider,{value:{isDarkMode:e,toggleTheme:r},children:t})},M5="/assets/HomePlant-BvP1lFZa.jpg",V5=()=>{const[t,e]=V.useState("");return V.useEffect(()=>{(async()=>{const r=fr.currentUser;if(r){const i=rr($t,"users",r.uid),s=await Tf(i);if(s.exists()){const o=s.data();e(o.name)}}})()},[]),P.jsxs("div",{className:"home-container",children:[P.jsx("h3",{children:"by @AnshuFlame"}),P.jsxs("div",{className:"image-container",children:[P.jsx("img",{src:M5,alt:"Plant Disease Detection",className:"centered-image"})," "]}),P.jsxs("p",{className:"welcome-text",children:["Welcome, ",t.split(" ")[0],"!"]})," ",P.jsx("p",{className:"benefits-paragraph",children:"This application helps farmers and gardeners identify plant diseases accurately and quickly. By utilizing machine learning algorithms, users can receive real-time insights about their crops, enabling them to take timely actions for prevention and treatment. The benefits include increased crop yield, reduced pesticide use, and sustainable farming practices."})]})};function Kk(t,e){return function(){return t.apply(e,arguments)}}const{toString:F5}=Object.prototype,{getPrototypeOf:Mv}=Object,Rf=(t=>e=>{const n=F5.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qn=t=>(t=t.toLowerCase(),e=>Rf(e)===t),Af=t=>e=>typeof e===t,{isArray:Ea}=Array,du=Af("undefined");function U5(t){return t!==null&&!du(t)&&t.constructor!==null&&!du(t.constructor)&&pn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Qk=Qn("ArrayBuffer");function j5(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Qk(t.buffer),e}const B5=Af("string"),pn=Af("function"),Yk=Af("number"),kf=t=>t!==null&&typeof t=="object",$5=t=>t===!0||t===!1,yh=t=>{if(Rf(t)!=="object")return!1;const e=Mv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z5=Qn("Date"),W5=Qn("File"),H5=Qn("Blob"),q5=Qn("FileList"),G5=t=>kf(t)&&pn(t.pipe),K5=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pn(t.append)&&((e=Rf(t))==="formdata"||e==="object"&&pn(t.toString)&&t.toString()==="[object FormData]"))},Q5=Qn("URLSearchParams"),[Y5,X5,J5,Z5]=["ReadableStream","Request","Response","Headers"].map(Qn),e6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ea(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function Xk(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const _s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jk=t=>!du(t)&&t!==_s;function i_(){const{caseless:t}=Jk(this)&&this||{},e={},n=(r,i)=>{const s=t&&Xk(e,i)||i;yh(e[s])&&yh(r)?e[s]=i_(e[s],r):yh(r)?e[s]=i_({},r):Ea(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&qu(arguments[r],n);return e}const t6=(t,e,n,{allOwnKeys:r}={})=>(qu(e,(i,s)=>{n&&pn(i)?t[s]=Kk(i,n):t[s]=i},{allOwnKeys:r}),t),n6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),r6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},i6=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Mv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},s6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},o6=t=>{if(!t)return null;if(Ea(t))return t;let e=t.length;if(!Yk(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},a6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Mv(Uint8Array)),l6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},u6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},c6=Qn("HTMLFormElement"),h6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),vT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),d6=Qn("RegExp"),Zk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};qu(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},f6=t=>{Zk(t,(e,n)=>{if(pn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(pn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},p6=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ea(t)?r(t):r(String(t).split(e)),n},m6=()=>{},g6=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,gm="abcdefghijklmnopqrstuvwxyz",wT="0123456789",eP={DIGIT:wT,ALPHA:gm,ALPHA_DIGIT:gm+gm.toUpperCase()+wT},_6=(t=16,e=eP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function y6(t){return!!(t&&pn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const v6=t=>{const e=new Array(10),n=(r,i)=>{if(kf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Ea(r)?[]:{};return qu(r,(o,a)=>{const l=n(o,i+1);!du(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},w6=Qn("AsyncFunction"),E6=t=>t&&(kf(t)||pn(t))&&pn(t.then)&&pn(t.catch),tP=((t,e)=>t?setImmediate:e?((n,r)=>(_s.addEventListener("message",({source:i,data:s})=>{i===_s&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),_s.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pn(_s.postMessage)),T6=typeof queueMicrotask<"u"?queueMicrotask.bind(_s):typeof process<"u"&&process.nextTick||tP,F={isArray:Ea,isArrayBuffer:Qk,isBuffer:U5,isFormData:K5,isArrayBufferView:j5,isString:B5,isNumber:Yk,isBoolean:$5,isObject:kf,isPlainObject:yh,isReadableStream:Y5,isRequest:X5,isResponse:J5,isHeaders:Z5,isUndefined:du,isDate:z5,isFile:W5,isBlob:H5,isRegExp:d6,isFunction:pn,isStream:G5,isURLSearchParams:Q5,isTypedArray:a6,isFileList:q5,forEach:qu,merge:i_,extend:t6,trim:e6,stripBOM:n6,inherits:r6,toFlatObject:i6,kindOf:Rf,kindOfTest:Qn,endsWith:s6,toArray:o6,forEachEntry:l6,matchAll:u6,isHTMLForm:c6,hasOwnProperty:vT,hasOwnProp:vT,reduceDescriptors:Zk,freezeMethods:f6,toObjectSet:p6,toCamelCase:h6,noop:m6,toFiniteNumber:g6,findKey:Xk,global:_s,isContextDefined:Jk,ALPHABET:eP,generateString:_6,isSpecCompliantForm:y6,toJSONObject:v6,isAsyncFn:w6,isThenable:E6,setImmediate:tP,asap:T6};function ne(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}F.inherits(ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const nP=ne.prototype,rP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{rP[t]={value:t}});Object.defineProperties(ne,rP);Object.defineProperty(nP,"isAxiosError",{value:!0});ne.from=(t,e,n,r,i,s)=>{const o=Object.create(nP);return F.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ne.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const S6=null;function s_(t){return F.isPlainObject(t)||F.isArray(t)}function iP(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function ET(t,e,n){return t?t.concat(e).map(function(i,s){return i=iP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function C6(t){return F.isArray(t)&&!t.some(s_)}const I6=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Pf(t,e,n){if(!F.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=F.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,R){return!F.isUndefined(R[w])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(i))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(F.isDate(_))return _.toISOString();if(!l&&F.isBlob(_))throw new ne("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(_)||F.isTypedArray(_)?l&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,w,R){let T=_;if(_&&!R&&typeof _=="object"){if(F.endsWith(w,"{}"))w=r?w:w.slice(0,-2),_=JSON.stringify(_);else if(F.isArray(_)&&C6(_)||(F.isFileList(_)||F.endsWith(w,"[]"))&&(T=F.toArray(_)))return w=iP(w),T.forEach(function(I,x){!(F.isUndefined(I)||I===null)&&e.append(o===!0?ET([w],x,s):o===null?w:w+"[]",c(I))}),!1}return s_(_)?!0:(e.append(ET(R,w,s),c(_)),!1)}const d=[],p=Object.assign(I6,{defaultVisitor:h,convertValue:c,isVisitable:s_});function y(_,w){if(!F.isUndefined(_)){if(d.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(_),F.forEach(_,function(T,E){(!(F.isUndefined(T)||T===null)&&i.call(e,T,F.isString(E)?E.trim():E,w,p))===!0&&y(T,w?w.concat(E):[E])}),d.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return y(t),e}function TT(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Vv(t,e){this._pairs=[],t&&Pf(t,this,e)}const sP=Vv.prototype;sP.append=function(e,n){this._pairs.push([e,n])};sP.toString=function(e){const n=e?function(r){return e.call(this,r,TT)}:TT;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function R6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oP(t,e,n){if(!e)return t;const r=n&&n.encode||R6,i=n&&n.serialize;let s;if(i?s=i(e,n):s=F.isURLSearchParams(e)?e.toString():new Vv(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class ST{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(r){r!==null&&e(r)})}}const aP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},A6=typeof URLSearchParams<"u"?URLSearchParams:Vv,k6=typeof FormData<"u"?FormData:null,P6=typeof Blob<"u"?Blob:null,b6={isBrowser:!0,classes:{URLSearchParams:A6,FormData:k6,Blob:P6},protocols:["http","https","file","blob","url","data"]},Fv=typeof window<"u"&&typeof document<"u",o_=typeof navigator=="object"&&navigator||void 0,x6=Fv&&(!o_||["ReactNative","NativeScript","NS"].indexOf(o_.product)<0),N6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",O6=Fv&&window.location.href||"http://localhost",D6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fv,hasStandardBrowserEnv:x6,hasStandardBrowserWebWorkerEnv:N6,navigator:o_,origin:O6},Symbol.toStringTag,{value:"Module"})),nn={...D6,...b6};function L6(t,e){return Pf(t,new nn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return nn.isNode&&F.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function M6(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function V6(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function lP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&F.isArray(i)?i.length:o,l?(F.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!F.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&F.isArray(i[o])&&(i[o]=V6(i[o])),!a)}if(F.isFormData(t)&&F.isFunction(t.entries)){const n={};return F.forEachEntry(t,(r,i)=>{e(M6(r),i,n,0)}),n}return null}function F6(t,e,n){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Gu={transitional:aP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=F.isObject(e);if(s&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return i?JSON.stringify(lP(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return L6(e,this.formSerializer).toString();if((a=F.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Pf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),F6(e)):e}],transformResponse:[function(e){const n=this.transitional||Gu.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ne.from(a,ne.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{Gu.headers[t]={}});const U6=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),j6=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&U6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},CT=Symbol("internals");function Qa(t){return t&&String(t).trim().toLowerCase()}function vh(t){return t===!1||t==null?t:F.isArray(t)?t.map(vh):String(t)}function B6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const $6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _m(t,e,n,r,i){if(F.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!F.isString(e)){if(F.isString(r))return e.indexOf(r)!==-1;if(F.isRegExp(r))return r.test(e)}}function z6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function W6(t,e){const n=F.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class rn{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=Qa(l);if(!h)throw new Error("header name must be a non-empty string");const d=F.findKey(i,h);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=vh(a))}const o=(a,l)=>F.forEach(a,(c,h)=>s(c,h,l));if(F.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(F.isString(e)&&(e=e.trim())&&!$6(e))o(j6(e),n);else if(F.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Qa(e),e){const r=F.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return B6(i);if(F.isFunction(n))return n.call(this,i,r);if(F.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qa(e),e){const r=F.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||_m(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Qa(o),o){const a=F.findKey(r,o);a&&(!n||_m(r,r[a],a,n))&&(delete r[a],i=!0)}}return F.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||_m(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return F.forEach(this,(i,s)=>{const o=F.findKey(r,s);if(o){n[o]=vh(i),delete n[s];return}const a=e?z6(s):String(s).trim();a!==s&&delete n[s],n[a]=vh(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return F.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&F.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[CT]=this[CT]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Qa(o);r[a]||(W6(i,o),r[a]=!0)}return F.isArray(e)?e.forEach(s):s(e),this}}rn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(rn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});F.freezeMethods(rn);function ym(t,e){const n=this||Gu,r=e||n,i=rn.from(r.headers);let s=r.data;return F.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function uP(t){return!!(t&&t.__CANCEL__)}function Ta(t,e,n){ne.call(this,t??"canceled",ne.ERR_CANCELED,e,n),this.name="CanceledError"}F.inherits(Ta,ne,{__CANCEL__:!0});function cP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ne("Request failed with status code "+n.status,[ne.ERR_BAD_REQUEST,ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function H6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function q6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const y=h&&c-h;return y?Math.round(p*1e3/y):void 0}}function G6(t,e){let n=0,r=1e3/e,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const h=Date.now(),d=h-n;d>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const gd=(t,e,n=3)=>{let r=0;const i=q6(50,250);return G6(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},IT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},RT=t=>(...e)=>F.asap(()=>t(...e)),K6=nn.hasStandardBrowserEnv?function(){const e=nn.navigator&&/(msie|trident)/i.test(nn.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=F.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),Q6=nn.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];F.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),F.isString(r)&&o.push("path="+r),F.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Y6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function X6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function hP(t,e){return t&&!Y6(e)?X6(t,e):e}const AT=t=>t instanceof rn?{...t}:t;function Ls(t,e){e=e||{};const n={};function r(c,h,d){return F.isPlainObject(c)&&F.isPlainObject(h)?F.merge.call({caseless:d},c,h):F.isPlainObject(h)?F.merge({},h):F.isArray(h)?h.slice():h}function i(c,h,d){if(F.isUndefined(h)){if(!F.isUndefined(c))return r(void 0,c,d)}else return r(c,h,d)}function s(c,h){if(!F.isUndefined(h))return r(void 0,h)}function o(c,h){if(F.isUndefined(h)){if(!F.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,d){if(d in e)return r(c,h);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>i(AT(c),AT(h),!0)};return F.forEach(Object.keys(Object.assign({},t,e)),function(h){const d=l[h]||i,p=d(t[h],e[h],h);F.isUndefined(p)&&d!==a||(n[h]=p)}),n}const dP=t=>{const e=Ls({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=rn.from(o),e.url=oP(hP(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(F.isFormData(n)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(nn.hasStandardBrowserEnv&&(r&&F.isFunction(r)&&(r=r(e)),r||r!==!1&&K6(e.url))){const c=i&&s&&Q6.read(s);c&&o.set(i,c)}return e},J6=typeof XMLHttpRequest<"u",Z6=J6&&function(t){return new Promise(function(n,r){const i=dP(t);let s=i.data;const o=rn.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,d,p,y,_;function w(){y&&y(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let R=new XMLHttpRequest;R.open(i.method.toUpperCase(),i.url,!0),R.timeout=i.timeout;function T(){if(!R)return;const I=rn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),L={data:!a||a==="text"||a==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:I,config:t,request:R};cP(function(C){n(C),w()},function(C){r(C),w()},L),R=null}"onloadend"in R?R.onloadend=T:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(T)},R.onabort=function(){R&&(r(new ne("Request aborted",ne.ECONNABORTED,t,R)),R=null)},R.onerror=function(){r(new ne("Network Error",ne.ERR_NETWORK,t,R)),R=null},R.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const L=i.transitional||aP;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new ne(x,L.clarifyTimeoutError?ne.ETIMEDOUT:ne.ECONNABORTED,t,R)),R=null},s===void 0&&o.setContentType(null),"setRequestHeader"in R&&F.forEach(o.toJSON(),function(x,L){R.setRequestHeader(L,x)}),F.isUndefined(i.withCredentials)||(R.withCredentials=!!i.withCredentials),a&&a!=="json"&&(R.responseType=i.responseType),c&&([p,_]=gd(c,!0),R.addEventListener("progress",p)),l&&R.upload&&([d,y]=gd(l),R.upload.addEventListener("progress",d),R.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(h=I=>{R&&(r(!I||I.type?new Ta(null,t,R):I),R.abort(),R=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const E=H6(i.url);if(E&&nn.protocols.indexOf(E)===-1){r(new ne("Unsupported protocol "+E+":",ne.ERR_BAD_REQUEST,t));return}R.send(s||null)})},ej=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof ne?h:new Ta(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new ne(`timeout ${e} of ms exceeded`,ne.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>F.asap(a),l}},tj=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},nj=async function*(t,e){for await(const n of rj(t))yield*tj(n,e)},rj=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},kT=(t,e,n,r)=>{const i=nj(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let d=h.byteLength;if(n){let p=s+=d;n(p)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},bf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fP=bf&&typeof ReadableStream=="function",ij=bf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),pP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},sj=fP&&pP(()=>{let t=!1;const e=new Request(nn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),PT=64*1024,a_=fP&&pP(()=>F.isReadableStream(new Response("").body)),_d={stream:a_&&(t=>t.body)};bf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!_d[e]&&(_d[e]=F.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ne(`Response type '${e}' is not supported`,ne.ERR_NOT_SUPPORT,r)})})})(new Response);const oj=async t=>{if(t==null)return 0;if(F.isBlob(t))return t.size;if(F.isSpecCompliantForm(t))return(await new Request(nn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(F.isArrayBufferView(t)||F.isArrayBuffer(t))return t.byteLength;if(F.isURLSearchParams(t)&&(t=t+""),F.isString(t))return(await ij(t)).byteLength},aj=async(t,e)=>{const n=F.toFiniteNumber(t.getContentLength());return n??oj(e)},lj=bf&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:d="same-origin",fetchOptions:p}=dP(t);c=c?(c+"").toLowerCase():"text";let y=ej([i,s&&s.toAbortSignal()],o),_;const w=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let R;try{if(l&&sj&&n!=="get"&&n!=="head"&&(R=await aj(h,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),O;if(F.isFormData(r)&&(O=L.headers.get("content-type"))&&h.setContentType(O),L.body){const[C,v]=IT(R,gd(RT(l)));r=kT(L.body,PT,C,v)}}F.isString(d)||(d=d?"include":"omit");const T="credentials"in Request.prototype;_=new Request(e,{...p,signal:y,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:T?d:void 0});let E=await fetch(_);const I=a_&&(c==="stream"||c==="response");if(a_&&(a||I&&w)){const L={};["status","statusText","headers"].forEach(A=>{L[A]=E[A]});const O=F.toFiniteNumber(E.headers.get("content-length")),[C,v]=a&&IT(O,gd(RT(a),!0))||[];E=new Response(kT(E.body,PT,C,()=>{v&&v(),w&&w()}),L)}c=c||"text";let x=await _d[F.findKey(_d,c)||"text"](E,t);return!I&&w&&w(),await new Promise((L,O)=>{cP(L,O,{data:x,headers:rn.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:_})})}catch(T){throw w&&w(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new ne("Network Error",ne.ERR_NETWORK,t,_),{cause:T.cause||T}):ne.from(T,T&&T.code,t,_)}}),l_={http:S6,xhr:Z6,fetch:lj};F.forEach(l_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const bT=t=>`- ${t}`,uj=t=>F.isFunction(t)||t===null||t===!1,mP={getAdapter:t=>{t=F.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!uj(n)&&(r=l_[(o=String(n)).toLowerCase()],r===void 0))throw new ne(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(bT).join(`
`):" "+bT(s[0]):"as no adapter specified";throw new ne("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:l_};function vm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ta(null,t)}function xT(t){return vm(t),t.headers=rn.from(t.headers),t.data=ym.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),mP.getAdapter(t.adapter||Gu.adapter)(t).then(function(r){return vm(t),r.data=ym.call(t,t.transformResponse,r),r.headers=rn.from(r.headers),r},function(r){return uP(r)||(vm(t),r&&r.response&&(r.response.data=ym.call(t,t.transformResponse,r.response),r.response.headers=rn.from(r.response.headers))),Promise.reject(r)})}const gP="1.7.7",Uv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Uv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const NT={};Uv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+gP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ne(i(o," has been removed"+(n?" in "+n:"")),ne.ERR_DEPRECATED);return n&&!NT[o]&&(NT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function cj(t,e,n){if(typeof t!="object")throw new ne("options must be an object",ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ne("option "+s+" must be "+l,ne.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ne("Unknown option "+s,ne.ERR_BAD_OPTION)}}const u_={assertOptions:cj,validators:Uv},li=u_.validators;class Ss{constructor(e){this.defaults=e,this.interceptors={request:new ST,response:new ST}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ls(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&u_.assertOptions(r,{silentJSONParsing:li.transitional(li.boolean),forcedJSONParsing:li.transitional(li.boolean),clarifyTimeoutError:li.transitional(li.boolean)},!1),i!=null&&(F.isFunction(i)?n.paramsSerializer={serialize:i}:u_.assertOptions(i,{encode:li.function,serialize:li.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&F.merge(s.common,s[n.method]);s&&F.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=rn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let h,d=0,p;if(!l){const _=[xT.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,c),p=_.length,h=Promise.resolve(n);d<p;)h=h.then(_[d++],_[d++]);return h}p=a.length;let y=n;for(d=0;d<p;){const _=a[d++],w=a[d++];try{y=_(y)}catch(R){w.call(this,R);break}}try{h=xT.call(this,y)}catch(_){return Promise.reject(_)}for(d=0,p=c.length;d<p;)h=h.then(c[d++],c[d++]);return h}getUri(e){e=Ls(this.defaults,e);const n=hP(e.baseURL,e.url);return oP(n,e.params,e.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(e){Ss.prototype[e]=function(n,r){return this.request(Ls(r||{},{method:e,url:n,data:(r||{}).data}))}});F.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Ls(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ss.prototype[e]=n(),Ss.prototype[e+"Form"]=n(!0)});class jv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Ta(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new jv(function(i){e=i}),cancel:e}}}function hj(t){return function(n){return t.apply(null,n)}}function dj(t){return F.isObject(t)&&t.isAxiosError===!0}const c_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(c_).forEach(([t,e])=>{c_[e]=t});function _P(t){const e=new Ss(t),n=Kk(Ss.prototype.request,e);return F.extend(n,Ss.prototype,e,{allOwnKeys:!0}),F.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return _P(Ls(t,i))},n}const rt=_P(Gu);rt.Axios=Ss;rt.CanceledError=Ta;rt.CancelToken=jv;rt.isCancel=uP;rt.VERSION=gP;rt.toFormData=Pf;rt.AxiosError=ne;rt.Cancel=rt.CanceledError;rt.all=function(e){return Promise.all(e)};rt.spread=hj;rt.isAxiosError=dj;rt.mergeConfig=Ls;rt.AxiosHeaders=rn;rt.formToJSON=t=>lP(F.isHTMLForm(t)?new FormData(t):t);rt.getAdapter=mP.getAdapter;rt.HttpStatusCode=c_;rt.default=rt;function yP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fj(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yP(t))&&(r&&(r+=" "),r+=e);return r}function pj(t,e,n=void 0){const r={};for(const i in t){const s=t[i];let o="",a=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,n&&n[c]&&(o+=" "+n[c]))}r[i]=o}return r}function Ms(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function ta(t){if(typeof t!="string")throw new Error(Ms(7));return t.charAt(0).toUpperCase()+t.slice(1)}function kr(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function vP(t){if(!kr(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=vP(t[n])}),e}function mn(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return kr(t)&&kr(e)&&Object.keys(e).forEach(i=>{kr(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&kr(t[i])?r[i]=mn(t[i],e[i],n):n.clone?r[i]=kr(e[i])?vP(e[i]):e[i]:r[i]=e[i]}),r}function Pl(t,e){return e?mn(t,e,{clone:!1}):t}function mj(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{const s=/min-width:\s*([0-9.]+)/;return+(r.match(s)?.[1]||0)-+(i.match(s)?.[1]||0)});return n.length?n.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function gj(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function _j(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(s)}function yj(t){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function n(s,o){s.up=(...a)=>e(t.breakpoints.up(...a),o),s.down=(...a)=>e(t.breakpoints.down(...a),o),s.between=(...a)=>e(t.breakpoints.between(...a),o),s.only=(...a)=>e(t.breakpoints.only(...a),o),s.not=(...a)=>{const l=e(t.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(n(r,s),r);return n(i),{...t,containerQueries:i}}const xf={xs:0,sm:600,md:900,lg:1200,xl:1536},OT={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${xf[t]}px)`},vj={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:xf[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Yr(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||OT;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||OT;return Object.keys(e).reduce((o,a)=>{if(gj(s.keys,a)){const l=_j(r.containerQueries?r:vj,a);l&&(o[l]=n(e[a],a))}else if(Object.keys(s.values||xf).includes(a)){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function wj(t={}){return t.keys?.reduce((n,r)=>{const i=t.up(r);return n[i]={},n},{})||{}}function Ej(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Nf(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function yd(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Nf(t,n)||r,e&&(i=e(i,r,t)),i}function Xe(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=Nf(l,r)||{};return Yr(o,a,d=>{let p=yd(c,i,d);return d===p&&typeof d=="string"&&(p=yd(c,i,`${e}${d==="default"?"":ta(d)}`,d)),n===!1?p:{[n]:p}})};return s.propTypes={},s.filterProps=[e],s}function Tj(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Sj={m:"margin",p:"padding"},Cj={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},DT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ij=Tj(t=>{if(t.length>2)if(DT[t])t=DT[t];else return[t];const[e,n]=t.split(""),r=Sj[e],i=Cj[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),Bv=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$v=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Bv,...$v];function Ku(t,e,n,r){const i=Nf(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=i[o];return s>=0?a:typeof a=="number"?-a:`-${a}`}:typeof i=="function"?i:()=>{}}function zv(t){return Ku(t,"spacing",8)}function Qu(t,e){return typeof e=="string"||e==null?e:t(e)}function Rj(t,e){return n=>t.reduce((r,i)=>(r[i]=Qu(e,n),r),{})}function Aj(t,e,n,r){if(!e.includes(n))return null;const i=Ij(n),s=Rj(i,r),o=t[n];return Yr(t,o,s)}function wP(t,e){const n=zv(t.theme);return Object.keys(t).map(r=>Aj(t,e,r,n)).reduce(Pl,{})}function ze(t){return wP(t,Bv)}ze.propTypes={};ze.filterProps=Bv;function We(t){return wP(t,$v)}We.propTypes={};We.filterProps=$v;function Of(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?Pl(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Rn(t){return typeof t!="number"?t:`${t}px solid`}function On(t,e){return Xe({prop:t,themeKey:"borders",transform:e})}const kj=On("border",Rn),Pj=On("borderTop",Rn),bj=On("borderRight",Rn),xj=On("borderBottom",Rn),Nj=On("borderLeft",Rn),Oj=On("borderColor"),Dj=On("borderTopColor"),Lj=On("borderRightColor"),Mj=On("borderBottomColor"),Vj=On("borderLeftColor"),Fj=On("outline",Rn),Uj=On("outlineColor"),Df=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Ku(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Qu(e,r)});return Yr(t,t.borderRadius,n)}return null};Df.propTypes={};Df.filterProps=["borderRadius"];Of(kj,Pj,bj,xj,Nj,Oj,Dj,Lj,Mj,Vj,Df,Fj,Uj);const Lf=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Ku(t.theme,"spacing",8),n=r=>({gap:Qu(e,r)});return Yr(t,t.gap,n)}return null};Lf.propTypes={};Lf.filterProps=["gap"];const Mf=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Ku(t.theme,"spacing",8),n=r=>({columnGap:Qu(e,r)});return Yr(t,t.columnGap,n)}return null};Mf.propTypes={};Mf.filterProps=["columnGap"];const Vf=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Ku(t.theme,"spacing",8),n=r=>({rowGap:Qu(e,r)});return Yr(t,t.rowGap,n)}return null};Vf.propTypes={};Vf.filterProps=["rowGap"];const jj=Xe({prop:"gridColumn"}),Bj=Xe({prop:"gridRow"}),$j=Xe({prop:"gridAutoFlow"}),zj=Xe({prop:"gridAutoColumns"}),Wj=Xe({prop:"gridAutoRows"}),Hj=Xe({prop:"gridTemplateColumns"}),qj=Xe({prop:"gridTemplateRows"}),Gj=Xe({prop:"gridTemplateAreas"}),Kj=Xe({prop:"gridArea"});Of(Lf,Mf,Vf,jj,Bj,$j,zj,Wj,Hj,qj,Gj,Kj);function Lo(t,e){return e==="grey"?e:t}const Qj=Xe({prop:"color",themeKey:"palette",transform:Lo}),Yj=Xe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Lo}),Xj=Xe({prop:"backgroundColor",themeKey:"palette",transform:Lo});Of(Qj,Yj,Xj);function un(t){return t<=1&&t!==0?`${t*100}%`:t}const Jj=Xe({prop:"width",transform:un}),Wv=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{const r=t.theme?.breakpoints?.values?.[n]||xf[n];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:un(n)}};return Yr(t,t.maxWidth,e)}return null};Wv.filterProps=["maxWidth"];const Zj=Xe({prop:"minWidth",transform:un}),e9=Xe({prop:"height",transform:un}),t9=Xe({prop:"maxHeight",transform:un}),n9=Xe({prop:"minHeight",transform:un});Xe({prop:"size",cssProperty:"width",transform:un});Xe({prop:"size",cssProperty:"height",transform:un});const r9=Xe({prop:"boxSizing"});Of(Jj,Wv,Zj,e9,t9,n9,r9);const Ff={border:{themeKey:"borders",transform:Rn},borderTop:{themeKey:"borders",transform:Rn},borderRight:{themeKey:"borders",transform:Rn},borderBottom:{themeKey:"borders",transform:Rn},borderLeft:{themeKey:"borders",transform:Rn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Rn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Df},color:{themeKey:"palette",transform:Lo},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Lo},backgroundColor:{themeKey:"palette",transform:Lo},p:{style:We},pt:{style:We},pr:{style:We},pb:{style:We},pl:{style:We},px:{style:We},py:{style:We},padding:{style:We},paddingTop:{style:We},paddingRight:{style:We},paddingBottom:{style:We},paddingLeft:{style:We},paddingX:{style:We},paddingY:{style:We},paddingInline:{style:We},paddingInlineStart:{style:We},paddingInlineEnd:{style:We},paddingBlock:{style:We},paddingBlockStart:{style:We},paddingBlockEnd:{style:We},m:{style:ze},mt:{style:ze},mr:{style:ze},mb:{style:ze},ml:{style:ze},mx:{style:ze},my:{style:ze},margin:{style:ze},marginTop:{style:ze},marginRight:{style:ze},marginBottom:{style:ze},marginLeft:{style:ze},marginX:{style:ze},marginY:{style:ze},marginInline:{style:ze},marginInlineStart:{style:ze},marginInlineEnd:{style:ze},marginBlock:{style:ze},marginBlockStart:{style:ze},marginBlockEnd:{style:ze},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Lf},rowGap:{style:Vf},columnGap:{style:Mf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:un},maxWidth:{style:Wv},minWidth:{transform:un},height:{transform:un},maxHeight:{transform:un},minHeight:{transform:un},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function i9(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function s9(t,e){return typeof t=="function"?t(e):t}function o9(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:h,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=Nf(i,c)||{};return d?d(o):Yr(o,r,_=>{let w=yd(p,h,_);return _===w&&typeof _=="string"&&(w=yd(p,h,`${n}${_==="default"?"":ta(_)}`,_)),l===!1?w:{[l]:w}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const s=i.unstable_sxConfig??Ff;function o(a){let l=a;if(typeof a=="function")l=a(i);else if(typeof a!="object")return a;if(!l)return null;const c=wj(i.breakpoints),h=Object.keys(c);let d=c;return Object.keys(l).forEach(p=>{const y=s9(l[p],i);if(y!=null)if(typeof y=="object")if(s[p])d=Pl(d,t(p,y,i,s));else{const _=Yr({theme:i},y,w=>({[p]:w}));i9(_,y)?d[p]=e({sx:y,theme:i}):d=Pl(d,_)}else d=Pl(d,t(p,y,i,s))}),mj(i,Ej(h,d))}return Array.isArray(r)?r.map(o):o(r)}return e}const na=o9();na.filterProps=["sx"];function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h_.apply(null,arguments)}function EP(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var a9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l9=EP(function(t){return a9.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),u9=!1;function c9(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function h9(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var d9=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!u9:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(h9(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=c9(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),bt="-ms-",vd="-moz-",me="-webkit-",TP="comm",Hv="rule",qv="decl",f9="@import",SP="@keyframes",p9="@layer",m9=Math.abs,Uf=String.fromCharCode,g9=Object.assign;function _9(t,e){return _t(t,0)^45?(((e<<2^_t(t,0))<<2^_t(t,1))<<2^_t(t,2))<<2^_t(t,3):0}function CP(t){return t.trim()}function y9(t,e){return(t=e.exec(t))?t[0]:t}function ge(t,e,n){return t.replace(e,n)}function d_(t,e){return t.indexOf(e)}function _t(t,e){return t.charCodeAt(e)|0}function fu(t,e,n){return t.slice(e,n)}function Zn(t){return t.length}function Gv(t){return t.length}function qc(t,e){return e.push(t),t}function v9(t,e){return t.map(e).join("")}var jf=1,ra=1,IP=0,sn=0,Ze=0,Sa="";function Bf(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:jf,column:ra,length:o,return:""}}function Ya(t,e){return g9(Bf("",null,null,"",null,null,0),t,{length:-t.length},e)}function w9(){return Ze}function E9(){return Ze=sn>0?_t(Sa,--sn):0,ra--,Ze===10&&(ra=1,jf--),Ze}function gn(){return Ze=sn<IP?_t(Sa,sn++):0,ra++,Ze===10&&(ra=1,jf++),Ze}function hr(){return _t(Sa,sn)}function wh(){return sn}function Yu(t,e){return fu(Sa,t,e)}function pu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RP(t){return jf=ra=1,IP=Zn(Sa=t),sn=0,[]}function AP(t){return Sa="",t}function Eh(t){return CP(Yu(sn-1,f_(t===91?t+2:t===40?t+1:t)))}function T9(t){for(;(Ze=hr())&&Ze<33;)gn();return pu(t)>2||pu(Ze)>3?"":" "}function S9(t,e){for(;--e&&gn()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return Yu(t,wh()+(e<6&&hr()==32&&gn()==32))}function f_(t){for(;gn();)switch(Ze){case t:return sn;case 34:case 39:t!==34&&t!==39&&f_(Ze);break;case 40:t===41&&f_(t);break;case 92:gn();break}return sn}function C9(t,e){for(;gn()&&t+Ze!==57;)if(t+Ze===84&&hr()===47)break;return"/*"+Yu(e,sn-1)+"*"+Uf(t===47?t:gn())}function I9(t){for(;!pu(hr());)gn();return Yu(t,sn)}function R9(t){return AP(Th("",null,null,null,[""],t=RP(t),0,[0],t))}function Th(t,e,n,r,i,s,o,a,l){for(var c=0,h=0,d=o,p=0,y=0,_=0,w=1,R=1,T=1,E=0,I="",x=i,L=s,O=r,C=I;R;)switch(_=E,E=gn()){case 40:if(_!=108&&_t(C,d-1)==58){d_(C+=ge(Eh(E),"&","&\f"),"&\f")!=-1&&(T=-1);break}case 34:case 39:case 91:C+=Eh(E);break;case 9:case 10:case 13:case 32:C+=T9(_);break;case 92:C+=S9(wh()-1,7);continue;case 47:switch(hr()){case 42:case 47:qc(A9(C9(gn(),wh()),e,n),l);break;default:C+="/"}break;case 123*w:a[c++]=Zn(C)*T;case 125*w:case 59:case 0:switch(E){case 0:case 125:R=0;case 59+h:T==-1&&(C=ge(C,/\f/g,"")),y>0&&Zn(C)-d&&qc(y>32?MT(C+";",r,n,d-1):MT(ge(C," ","")+";",r,n,d-2),l);break;case 59:C+=";";default:if(qc(O=LT(C,e,n,c,h,i,a,I,x=[],L=[],d),s),E===123)if(h===0)Th(C,e,O,O,x,s,d,a,L);else switch(p===99&&_t(C,3)===110?100:p){case 100:case 108:case 109:case 115:Th(t,O,O,r&&qc(LT(t,O,O,0,0,i,a,I,i,x=[],d),L),i,L,d,a,r?x:L);break;default:Th(C,O,O,O,[""],L,0,a,L)}}c=h=y=0,w=T=1,I=C="",d=o;break;case 58:d=1+Zn(C),y=_;default:if(w<1){if(E==123)--w;else if(E==125&&w++==0&&E9()==125)continue}switch(C+=Uf(E),E*w){case 38:T=h>0?1:(C+="\f",-1);break;case 44:a[c++]=(Zn(C)-1)*T,T=1;break;case 64:hr()===45&&(C+=Eh(gn())),p=hr(),h=d=Zn(I=C+=I9(wh())),E++;break;case 45:_===45&&Zn(C)==2&&(w=0)}}return s}function LT(t,e,n,r,i,s,o,a,l,c,h){for(var d=i-1,p=i===0?s:[""],y=Gv(p),_=0,w=0,R=0;_<r;++_)for(var T=0,E=fu(t,d+1,d=m9(w=o[_])),I=t;T<y;++T)(I=CP(w>0?p[T]+" "+E:ge(E,/&\f/g,p[T])))&&(l[R++]=I);return Bf(t,e,n,i===0?Hv:a,l,c,h)}function A9(t,e,n){return Bf(t,e,n,TP,Uf(w9()),fu(t,2,-2),0)}function MT(t,e,n,r){return Bf(t,e,n,qv,fu(t,0,r),fu(t,r+1,-1),r)}function Mo(t,e){for(var n="",r=Gv(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function k9(t,e,n,r){switch(t.type){case p9:if(t.children.length)break;case f9:case qv:return t.return=t.return||t.value;case TP:return"";case SP:return t.return=t.value+"{"+Mo(t.children,r)+"}";case Hv:t.value=t.props.join(",")}return Zn(n=Mo(t.children,r))?t.return=t.value+"{"+n+"}":""}function P9(t){var e=Gv(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function b9(t){return function(e){e.root||(e=e.return)&&t(e)}}var x9=function(e,n,r){for(var i=0,s=0;i=s,s=hr(),i===38&&s===12&&(n[r]=1),!pu(s);)gn();return Yu(e,sn)},N9=function(e,n){var r=-1,i=44;do switch(pu(i)){case 0:i===38&&hr()===12&&(n[r]=1),e[r]+=x9(sn-1,n,r);break;case 2:e[r]+=Eh(i);break;case 4:if(i===44){e[++r]=hr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Uf(i)}while(i=gn());return e},O9=function(e,n){return AP(N9(RP(e),n))},VT=new WeakMap,D9=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!VT.get(r))&&!i){VT.set(e,!0);for(var s=[],o=O9(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var h=0;h<a.length;h++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},L9=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function kP(t,e){switch(_9(t,e)){case 5103:return me+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return me+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return me+t+vd+t+bt+t+t;case 6828:case 4268:return me+t+bt+t+t;case 6165:return me+t+bt+"flex-"+t+t;case 5187:return me+t+ge(t,/(\w+).+(:[^]+)/,me+"box-$1$2"+bt+"flex-$1$2")+t;case 5443:return me+t+bt+"flex-item-"+ge(t,/flex-|-self/,"")+t;case 4675:return me+t+bt+"flex-line-pack"+ge(t,/align-content|flex-|-self/,"")+t;case 5548:return me+t+bt+ge(t,"shrink","negative")+t;case 5292:return me+t+bt+ge(t,"basis","preferred-size")+t;case 6060:return me+"box-"+ge(t,"-grow","")+me+t+bt+ge(t,"grow","positive")+t;case 4554:return me+ge(t,/([^-])(transform)/g,"$1"+me+"$2")+t;case 6187:return ge(ge(ge(t,/(zoom-|grab)/,me+"$1"),/(image-set)/,me+"$1"),t,"")+t;case 5495:case 3959:return ge(t,/(image-set\([^]*)/,me+"$1$`$1");case 4968:return ge(ge(t,/(.+:)(flex-)?(.*)/,me+"box-pack:$3"+bt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+me+t+t;case 4095:case 3583:case 4068:case 2532:return ge(t,/(.+)-inline(.+)/,me+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zn(t)-1-e>6)switch(_t(t,e+1)){case 109:if(_t(t,e+4)!==45)break;case 102:return ge(t,/(.+:)(.+)-([^]+)/,"$1"+me+"$2-$3$1"+vd+(_t(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~d_(t,"stretch")?kP(ge(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(_t(t,e+1)!==115)break;case 6444:switch(_t(t,Zn(t)-3-(~d_(t,"!important")&&10))){case 107:return ge(t,":",":"+me)+t;case 101:return ge(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+me+(_t(t,14)===45?"inline-":"")+"box$3$1"+me+"$2$3$1"+bt+"$2box$3")+t}break;case 5936:switch(_t(t,e+11)){case 114:return me+t+bt+ge(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return me+t+bt+ge(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return me+t+bt+ge(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return me+t+bt+t+t}return t}var M9=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case qv:e.return=kP(e.value,e.length);break;case SP:return Mo([Ya(e,{value:ge(e.value,"@","@"+me)})],i);case Hv:if(e.length)return v9(e.props,function(s){switch(y9(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Mo([Ya(e,{props:[ge(s,/:(read-\w+)/,":"+vd+"$1")]})],i);case"::placeholder":return Mo([Ya(e,{props:[ge(s,/:(plac\w+)/,":"+me+"input-$1")]}),Ya(e,{props:[ge(s,/:(plac\w+)/,":"+vd+"$1")]}),Ya(e,{props:[ge(s,/:(plac\w+)/,bt+"input-$1")]})],i)}return""})}},V9=[M9],F9=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(w){var R=w.getAttribute("data-emotion");R.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var i=e.stylisPlugins||V9,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(w){for(var R=w.getAttribute("data-emotion").split(" "),T=1;T<R.length;T++)s[R[T]]=!0;a.push(w)});var l,c=[D9,L9];{var h,d=[k9,b9(function(w){h.insert(w)})],p=P9(c.concat(i,d)),y=function(R){return Mo(R9(R),p)};l=function(R,T,E,I){h=E,y(R?R+"{"+T.styles+"}":T.styles),I&&(_.inserted[T.name]=!0)}}var _={key:n,sheet:new d9({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return _.sheet.hydrate(a),_},PP={exports:{}},ve={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt=typeof Symbol=="function"&&Symbol.for,Kv=pt?Symbol.for("react.element"):60103,Qv=pt?Symbol.for("react.portal"):60106,$f=pt?Symbol.for("react.fragment"):60107,zf=pt?Symbol.for("react.strict_mode"):60108,Wf=pt?Symbol.for("react.profiler"):60114,Hf=pt?Symbol.for("react.provider"):60109,qf=pt?Symbol.for("react.context"):60110,Yv=pt?Symbol.for("react.async_mode"):60111,Gf=pt?Symbol.for("react.concurrent_mode"):60111,Kf=pt?Symbol.for("react.forward_ref"):60112,Qf=pt?Symbol.for("react.suspense"):60113,U9=pt?Symbol.for("react.suspense_list"):60120,Yf=pt?Symbol.for("react.memo"):60115,Xf=pt?Symbol.for("react.lazy"):60116,j9=pt?Symbol.for("react.block"):60121,B9=pt?Symbol.for("react.fundamental"):60117,$9=pt?Symbol.for("react.responder"):60118,z9=pt?Symbol.for("react.scope"):60119;function En(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Kv:switch(t=t.type,t){case Yv:case Gf:case $f:case Wf:case zf:case Qf:return t;default:switch(t=t&&t.$$typeof,t){case qf:case Kf:case Xf:case Yf:case Hf:return t;default:return e}}case Qv:return e}}}function bP(t){return En(t)===Gf}ve.AsyncMode=Yv;ve.ConcurrentMode=Gf;ve.ContextConsumer=qf;ve.ContextProvider=Hf;ve.Element=Kv;ve.ForwardRef=Kf;ve.Fragment=$f;ve.Lazy=Xf;ve.Memo=Yf;ve.Portal=Qv;ve.Profiler=Wf;ve.StrictMode=zf;ve.Suspense=Qf;ve.isAsyncMode=function(t){return bP(t)||En(t)===Yv};ve.isConcurrentMode=bP;ve.isContextConsumer=function(t){return En(t)===qf};ve.isContextProvider=function(t){return En(t)===Hf};ve.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kv};ve.isForwardRef=function(t){return En(t)===Kf};ve.isFragment=function(t){return En(t)===$f};ve.isLazy=function(t){return En(t)===Xf};ve.isMemo=function(t){return En(t)===Yf};ve.isPortal=function(t){return En(t)===Qv};ve.isProfiler=function(t){return En(t)===Wf};ve.isStrictMode=function(t){return En(t)===zf};ve.isSuspense=function(t){return En(t)===Qf};ve.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===$f||t===Gf||t===Wf||t===zf||t===Qf||t===U9||typeof t=="object"&&t!==null&&(t.$$typeof===Xf||t.$$typeof===Yf||t.$$typeof===Hf||t.$$typeof===qf||t.$$typeof===Kf||t.$$typeof===B9||t.$$typeof===$9||t.$$typeof===z9||t.$$typeof===j9)};ve.typeOf=En;PP.exports=ve;var W9=PP.exports,xP=W9,H9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},q9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},NP={};NP[xP.ForwardRef]=H9;NP[xP.Memo]=q9;var G9=!0;function K9(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var OP=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||G9===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Q9=function(e,n,r){OP(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Y9(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var X9={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},J9=!1,Z9=/[A-Z]|^ms/g,eB=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DP=function(e){return e.charCodeAt(1)===45},FT=function(e){return e!=null&&typeof e!="boolean"},wm=EP(function(t){return DP(t)?t:t.replace(Z9,"-$&").toLowerCase()}),UT=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(eB,function(r,i,s){return er={name:i,styles:s,next:er},i})}return X9[e]!==1&&!DP(e)&&typeof n=="number"&&n!==0?n+"px":n},tB="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function mu(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return er={name:i.name,styles:i.styles,next:er},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)er={name:o.name,styles:o.styles,next:er},o=o.next;var a=s.styles+";";return a}return nB(t,e,n)}case"function":{if(t!==void 0){var l=er,c=n(t);return er=l,mu(t,e,c)}break}}var h=n;if(e==null)return h;var d=e[h];return d!==void 0?d:h}function nB(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=mu(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":FT(a)&&(r+=wm(s)+":"+UT(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&J9)throw new Error(tB);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)FT(o[l])&&(r+=wm(s)+":"+UT(s,o[l])+";");else{var c=mu(t,e,o);switch(s){case"animation":case"animationName":{r+=wm(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}}return r}var jT=/label:\s*([^\s;{]+)\s*(;|$)/g,er;function Xv(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";er=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=mu(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=mu(n,e,t[a]),r){var l=s;i+=l[a]}jT.lastIndex=0;for(var c="",h;(h=jT.exec(i))!==null;)c+="-"+h[1];var d=Y9(i)+c;return{name:d,styles:i,next:er}}var rB=function(e){return e()},iB=xm.useInsertionEffect?xm.useInsertionEffect:!1,sB=iB||rB,LP=V.createContext(typeof HTMLElement<"u"?F9({key:"css"}):null);LP.Provider;var oB=function(e){return V.forwardRef(function(n,r){var i=V.useContext(LP);return e(n,i,r)})},aB=V.createContext({});function Jv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xv(e)}var MP=function(){var e=Jv.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},lB=l9,uB=function(e){return e!=="theme"},BT=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?lB:uB},$T=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},cB=!1,hB=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return OP(n,r,i),sB(function(){return Q9(n,r,i)}),null},dB=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=$T(e,n,r),l=a||BT(i),c=!l("as");return function(){var h=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)d.push.apply(d,h);else{d.push(h[0][0]);for(var p=h.length,y=1;y<p;y++)d.push(h[y],h[0][y])}var _=oB(function(w,R,T){var E=c&&w.as||i,I="",x=[],L=w;if(w.theme==null){L={};for(var O in w)L[O]=w[O];L.theme=V.useContext(aB)}typeof w.className=="string"?I=K9(R.registered,x,w.className):w.className!=null&&(I=w.className+" ");var C=Xv(d.concat(x),R.registered,L);I+=R.key+"-"+C.name,o!==void 0&&(I+=" "+o);var v=c&&a===void 0?BT(E):l,A={};for(var m in w)c&&m==="as"||v(m)&&(A[m]=w[m]);return A.className=I,T&&(A.ref=T),V.createElement(V.Fragment,null,V.createElement(hB,{cache:R,serialized:C,isStringTag:typeof E=="string"}),V.createElement(E,A))});return _.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",_.defaultProps=e.defaultProps,_.__emotion_real=_,_.__emotion_base=i,_.__emotion_styles=d,_.__emotion_forwardProp=a,Object.defineProperty(_,"toString",{value:function(){return o===void 0&&cB?"NO_COMPONENT_SELECTOR":"."+o}}),_.withComponent=function(w,R){return t(w,h_({},n,R,{shouldForwardProp:$T(_,R,!0)})).apply(void 0,d)},_}},fB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],p_=dB.bind();fB.forEach(function(t){p_[t]=p_(t)});/**
 * @mui/styled-engine v6.1.4
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function pB(t,e){return p_(t,e)}function mB(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const zT=[];function WT(t){return zT[0]=t,Xv(zT)}const gB=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function _B(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,s=gB(e),o=Object.keys(s);function a(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function c(p,y){const _=o.indexOf(y);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(_!==-1&&typeof e[o[_]]=="number"?e[o[_]]:y)-r/100}${n})`}function h(p){return o.indexOf(p)+1<o.length?c(p,o[o.indexOf(p)+1]):a(p)}function d(p){const y=o.indexOf(p);return y===0?a(o[1]):y===o.length-1?l(o[y]):c(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:l,between:c,only:h,not:d,unit:n,...i}}const yB={borderRadius:4};function VP(t=8,e=zv({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function vB(t,e){const n=this;if(n.vars){if(!n.colorSchemes?.[t]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function FP(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={},...o}=t,a=_B(n),l=VP(i);let c=mn({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...yB,...s}},o);return c=yj(c),c.applyStyles=vB,c=e.reduce((h,d)=>mn(h,d),c),c.unstable_sxConfig={...Ff,...o?.unstable_sxConfig},c.unstable_sx=function(d){return na({sx:d,theme:this})},c}const HT=t=>t,wB=()=>{let t=HT;return{configure(e){t=e},generate(e){return t(e)},reset(){t=HT}}},EB=wB(),TB={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function UP(t,e,n="Mui"){const r=TB[e];return r?`${n}-${r}`:`${EB.generate(t)}-${e}`}function SB(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=UP(t,i,n)}),r}function jP(t){const{variants:e,...n}=t,r={variants:e,style:WT(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=WT(i.style))}),r}const CB=FP();function Em(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function IB(t){return t?(e,n)=>n[t]:null}function RB(t,e,n){t.theme=PB(t.theme)?n:t.theme[e]||t.theme}function Sh(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>Sh(t,r));if(Array.isArray(n?.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...s}=n;r=s}return BP(t,n.variants,[r])}return n?.isProcessed?n.style:n}function BP(t,e,n=[]){let r;e:for(let i=0;i<e.length;i+=1){const s=e[i];if(typeof s.props=="function"){if(r??={...t,...t.ownerState,ownerState:t.ownerState},!s.props(r))continue}else for(const o in s.props)if(t[o]!==s.props[o]&&t.ownerState?.[o]!==s.props[o])continue e;typeof s.style=="function"?(r??={...t,...t.ownerState,ownerState:t.ownerState},n.push(s.style(r))):n.push(s.style)}return n}function AB(t={}){const{themeId:e,defaultTheme:n=CB,rootShouldForwardProp:r=Em,slotShouldForwardProp:i=Em}=t;function s(a){RB(a,e,n)}return(a,l={})=>{mB(a,L=>L.filter(O=>O!==na));const{name:c,slot:h,skipVariantsResolver:d,skipSx:p,overridesResolver:y=IB(xB(h)),..._}=l,w=d!==void 0?d:h&&h!=="Root"&&h!=="root"||!1,R=p||!1;let T=Em;h==="Root"||h==="root"?T=r:h?T=i:bB(a)&&(T=void 0);const E=pB(a,{shouldForwardProp:T,label:kB(),..._}),I=L=>{if(typeof L=="function"&&L.__emotion_real!==L)return function(C){return Sh(C,L)};if(kr(L)){const O=jP(L);return O.variants?function(v){return Sh(v,O)}:O.style}return L},x=(...L)=>{const O=[],C=L.map(I),v=[];if(O.push(s),c&&y&&v.push(function(N){const ke=N.theme.components?.[c]?.styleOverrides;if(!ke)return null;const Tn={};for(const ni in ke)Tn[ni]=Sh(N,ke[ni]);return y(N,Tn)}),c&&!w&&v.push(function(N){const ke=N.theme?.components?.[c]?.variants;return ke?BP(N,ke):null}),R||v.push(na),Array.isArray(C[0])){const k=C.shift(),N=new Array(O.length).fill(""),b=new Array(v.length).fill("");let ke;ke=[...N,...k,...b],ke.raw=[...N,...k.raw,...b],O.unshift(ke)}const A=[...O,...C,...v],m=E(...A);return a.muiName&&(m.muiName=a.muiName),m};return E.withConfig&&(x.withConfig=E.withConfig),x}}function kB(t,e){return void 0}function PB(t){for(const e in t)return!1;return!0}function bB(t){return typeof t=="string"&&t.charCodeAt(0)>96}function xB(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function m_(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const s=t[i],o=e[i];if(!o)n[i]=s||{};else if(!s)n[i]=o;else{n[i]={...o};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const l=a;n[i][l]=m_(s[l],o[l])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function NB(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function Zv(t,e=0,n=1){return NB(t,e,n)}function OB(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function zi(t){if(t.type)return t;if(t.charAt(0)==="#")return zi(OB(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Ms(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Ms(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const DB=t=>{const e=zi(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},dl=(t,e)=>{try{return DB(t)}catch{return t}};function Jf(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function $P(t){t=zi(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,h=(c+n/30)%12)=>i-s*Math.max(Math.min(h-3,9-h,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Jf({type:a,values:l})}function g_(t){t=zi(t);let e=t.type==="hsl"||t.type==="hsla"?zi($P(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function LB(t,e){const n=g_(t),r=g_(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function MB(t,e){return t=zi(t),e=Zv(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Jf(t)}function Gc(t,e,n){try{return MB(t,e)}catch{return t}}function e0(t,e){if(t=zi(t),e=Zv(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Jf(t)}function Te(t,e,n){try{return e0(t,e)}catch{return t}}function t0(t,e){if(t=zi(t),e=Zv(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Jf(t)}function Se(t,e,n){try{return t0(t,e)}catch{return t}}function VB(t,e=.15){return g_(t)>.5?e0(t,e):t0(t,e)}function Kc(t,e,n){try{return VB(t,e)}catch{return t}}const FB=V.createContext(void 0);function UB(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?m_(i.defaultProps,r):!i.styleOverrides&&!i.variants?m_(i,r):r}function jB({props:t,name:e}){const n=V.useContext(FB);return UB({props:t,name:e,theme:{components:n}})}const qT={theme:void 0};function BB(t){let e,n;return function(i){let s=e;return(s===void 0||i.theme!==n)&&(qT.theme=i.theme,s=jP(t(qT)),e=s,n=i.theme),s}}function $B(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const GT=(t,e,n,r=[])=>{let i=t;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=n:i&&typeof i=="object"&&(i[s]=n):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},zB=(t,e,n)=>{function r(i,s=[],o=[]){Object.entries(i).forEach(([a,l])=>{(!n||n&&!n([...s,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,a],Array.isArray(l)?[...o,a]:o):e([...s,a],l,o))})}r(t)},WB=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function Tm(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},s={},o={};return zB(t,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const h=`--${n?`${n}-`:""}${a.join("-")}`,d=WB(a,l);Object.assign(i,{[h]:d}),GT(s,a,`var(${h})`,c),GT(o,a,`var(${h}, ${d})`,c)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function HB(t,e={}){const{getSelector:n=R,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...l}=t,{vars:c,css:h,varsWithDefaults:d}=Tm(l,e);let p=d;const y={},{[a]:_,...w}=s;if(Object.entries(w||{}).forEach(([I,x])=>{const{vars:L,css:O,varsWithDefaults:C}=Tm(x,e);p=mn(p,C),y[I]={css:O,vars:L}}),_){const{css:I,vars:x,varsWithDefaults:L}=Tm(_,e);p=mn(p,L),y[a]={css:I,vars:x}}function R(I,x){let L=i;if(i==="class"&&(L=".%s"),i==="data"&&(L="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(L=`[${i}="%s"]`),I){if(L==="media")return t.defaultColorScheme===I?":root":{[`@media (prefers-color-scheme: ${s[I]?.palette?.mode||I})`]:{":root":x}};if(L)return t.defaultColorScheme===I?`:root, ${L.replace("%s",String(I))}`:L.replace("%s",String(I))}return":root"}return{vars:p,generateThemeVars:()=>{let I={...c};return Object.entries(y).forEach(([,{vars:x}])=>{I=mn(I,x)}),I},generateStyleSheets:()=>{const I=[],x=t.defaultColorScheme||"light";function L(v,A){Object.keys(A).length&&I.push(typeof v=="string"?{[v]:{...A}}:v)}L(n(void 0,{...h}),h);const{[x]:O,...C}=y;if(O){const{css:v}=O,A=s[x]?.palette?.mode,m=!r&&A?{colorScheme:A,...v}:{...v};L(n(x,{...m}),m)}return Object.entries(C).forEach(([v,{css:A}])=>{const m=s[v]?.palette?.mode,k=!r&&m?{colorScheme:m,...A}:{...A};L(n(v,{...k}),k)}),I}}}function qB(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const gu={black:"#000",white:"#fff"},GB={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Zs={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},eo={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Xa={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},to={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},no={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ro={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function zP(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:gu.white,default:gu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const KB=zP();function WP(){return{text:{primary:gu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:gu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const KT=WP();function QT(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=t0(t.main,i):e==="dark"&&(t.dark=e0(t.main,s)))}function QB(t="light"){return t==="dark"?{main:to[200],light:to[50],dark:to[400]}:{main:to[700],light:to[400],dark:to[800]}}function YB(t="light"){return t==="dark"?{main:Zs[200],light:Zs[50],dark:Zs[400]}:{main:Zs[500],light:Zs[300],dark:Zs[700]}}function XB(t="light"){return t==="dark"?{main:eo[500],light:eo[300],dark:eo[700]}:{main:eo[700],light:eo[400],dark:eo[800]}}function JB(t="light"){return t==="dark"?{main:no[400],light:no[300],dark:no[700]}:{main:no[700],light:no[500],dark:no[900]}}function ZB(t="light"){return t==="dark"?{main:ro[400],light:ro[300],dark:ro[700]}:{main:ro[800],light:ro[500],dark:ro[900]}}function e$(t="light"){return t==="dark"?{main:Xa[400],light:Xa[300],dark:Xa[700]}:{main:"#ed6c02",light:Xa[500],dark:Xa[900]}}function n0(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,s=t.primary||QB(e),o=t.secondary||YB(e),a=t.error||XB(e),l=t.info||JB(e),c=t.success||ZB(e),h=t.warning||e$(e);function d(w){return LB(w,KT.text.primary)>=n?KT.text.primary:KB.text.primary}const p=({color:w,name:R,mainShade:T=500,lightShade:E=300,darkShade:I=700})=>{if(w={...w},!w.main&&w[T]&&(w.main=w[T]),!w.hasOwnProperty("main"))throw new Error(Ms(11,R?` (${R})`:"",T));if(typeof w.main!="string")throw new Error(Ms(12,R?` (${R})`:"",JSON.stringify(w.main)));return QT(w,"light",E,r),QT(w,"dark",I,r),w.contrastText||(w.contrastText=d(w.main)),w};let y;return e==="light"?y=zP():e==="dark"&&(y=WP()),mn({common:{...gu},mode:e,primary:p({color:s,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:h,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:GB,contrastThreshold:n,getContrastText:d,augmentColor:p,tonalOffset:r,...y},i)}function t$(t){const e={};return Object.entries(t).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function n$(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function r$(t){return Math.round(t*1e5)/1e5}const YT={textTransform:"uppercase"},XT='"Roboto", "Helvetica", "Arial", sans-serif';function i$(t,e){const{fontFamily:n=XT,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:h,...d}=typeof e=="function"?e(t):e,p=r/14,y=h||(R=>`${R/l*p}rem`),_=(R,T,E,I,x)=>({fontFamily:n,fontWeight:R,fontSize:y(T),lineHeight:E,...n===XT?{letterSpacing:`${r$(I/T)}em`}:{},...x,...c}),w={h1:_(i,96,1.167,-1.5),h2:_(i,60,1.2,-.5),h3:_(s,48,1.167,0),h4:_(s,34,1.235,.25),h5:_(s,24,1.334,0),h6:_(o,20,1.6,.15),subtitle1:_(s,16,1.75,.15),subtitle2:_(o,14,1.57,.1),body1:_(s,16,1.5,.15),body2:_(s,14,1.43,.15),button:_(o,14,1.75,.4,YT),caption:_(s,12,1.66,.4),overline:_(s,12,2.66,1,YT),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return mn({htmlFontSize:l,pxToRem:y,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...w},d,{clone:!1})}const s$=.2,o$=.14,a$=.12;function Le(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${s$})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${o$})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${a$})`].join(",")}const l$=["none",Le(0,2,1,-1,0,1,1,0,0,1,3,0),Le(0,3,1,-2,0,2,2,0,0,1,5,0),Le(0,3,3,-2,0,3,4,0,0,1,8,0),Le(0,2,4,-1,0,4,5,0,0,1,10,0),Le(0,3,5,-1,0,5,8,0,0,1,14,0),Le(0,3,5,-1,0,6,10,0,0,1,18,0),Le(0,4,5,-2,0,7,10,1,0,2,16,1),Le(0,5,5,-3,0,8,10,1,0,3,14,2),Le(0,5,6,-3,0,9,12,1,0,3,16,2),Le(0,6,6,-3,0,10,14,1,0,4,18,3),Le(0,6,7,-4,0,11,15,1,0,4,20,3),Le(0,7,8,-4,0,12,17,2,0,5,22,4),Le(0,7,8,-4,0,13,19,2,0,5,24,4),Le(0,7,9,-4,0,14,21,2,0,5,26,4),Le(0,8,9,-5,0,15,22,2,0,6,28,5),Le(0,8,10,-5,0,16,24,2,0,6,30,5),Le(0,8,11,-5,0,17,26,2,0,6,32,5),Le(0,9,11,-5,0,18,28,2,0,7,34,6),Le(0,9,12,-6,0,19,29,2,0,7,36,6),Le(0,10,13,-6,0,20,31,3,0,8,38,7),Le(0,10,13,-6,0,21,33,3,0,8,40,7),Le(0,10,14,-6,0,22,35,3,0,8,42,7),Le(0,11,14,-7,0,23,36,3,0,9,44,8),Le(0,11,15,-7,0,24,38,3,0,9,46,8)],u$={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},c$={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function JT(t){return`${Math.round(t)}ms`}function h$(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function d$(t){const e={...u$,...t.easing},n={...c$,...t.duration};return{getAutoHeightDuration:h$,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(i)?i:[i]).map(h=>`${h} ${typeof o=="string"?o:JT(o)} ${a} ${typeof l=="string"?l:JT(l)}`).join(",")},...t,easing:e,duration:n}}const f$={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function __(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:s={},transitions:o={},typography:a={},shape:l,...c}=t;if(t.vars)throw new Error(Ms(20));const h=n0(s),d=FP(t);let p=mn(d,{mixins:n$(d.breakpoints,r),palette:h,shadows:l$.slice(),typography:i$(h,a),transitions:d$(o),zIndex:{...f$}});return p=mn(p,c),p=e.reduce((y,_)=>mn(y,_),p),p.unstable_sxConfig={...Ff,...c?.unstable_sxConfig},p.unstable_sx=function(_){return na({sx:_,theme:this})},p}function p$(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const m$=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=p$(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function HP(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function qP(t){return t==="dark"?m$:[]}function g$(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,s=n0(e);return{palette:s,opacity:{...HP(s.mode),...n},overlays:r||qP(s.mode),...i}}function _$(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const y$=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],v$=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const o={};return y$(t.cssVarPrefix).forEach(a=>{o[a]=n[a],delete n[a]}),s==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:o}}:s?{[s.replace("%s",e)]:o,[`${r}, ${s.replace("%s",e)}`]:n}:{[r]:{...n,...o}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(s)return s.replace("%s",String(e))}return r};function w$(t){return kr(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function E$(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[o,a]=i[s];!w$(a)||o.startsWith("unstable_")?delete r[o]:kr(a)&&(r[o]={...a},n(r[o]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function T$(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function U(t,e,n){!t[e]&&n&&(t[e]=n)}function fl(t){return!t||!t.startsWith("hsl")?t:$P(t)}function Tr(t,e){`${e}Channel`in t||(t[`${e}Channel`]=dl(fl(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function S$(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Xn=t=>{try{return t()}catch{}},C$=(t="mui")=>$B(t);function Sm(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=g$({...e,palette:{mode:i,...e?.palette}});return}const{palette:s,...o}=__({...n,palette:{mode:i,...e?.palette}});return t[r]={...e,palette:s,opacity:{...HP(i),...e?.opacity},overlays:e?.overlays||qP(i)},o}function I$(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=_$,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...c}=t,h=Object.keys(n)[0],d=r||(n.light&&h!=="light"?"light":h),p=C$(s),{[d]:y,light:_,dark:w,...R}=n,T={...R};let E=y;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(E=!0),!E)throw new Error(Ms(21,d));const I=Sm(T,E,c,d);_&&!T.light&&Sm(T,_,void 0,"light"),w&&!T.dark&&Sm(T,w,void 0,"dark");let x={defaultColorScheme:d,...I,cssVarPrefix:s,colorSchemeSelector:a,rootSelector:l,getCssVar:p,colorSchemes:T,font:{...t$(I.typography),...I.font},spacing:S$(c.spacing)};Object.keys(x.colorSchemes).forEach(A=>{const m=x.colorSchemes[A].palette,k=N=>{const b=N.split("-"),ke=b[1],Tn=b[2];return p(N,m[ke][Tn])};if(m.mode==="light"&&(U(m.common,"background","#fff"),U(m.common,"onBackground","#000")),m.mode==="dark"&&(U(m.common,"background","#000"),U(m.common,"onBackground","#fff")),T$(m,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),m.mode==="light"){U(m.Alert,"errorColor",Te(m.error.light,.6)),U(m.Alert,"infoColor",Te(m.info.light,.6)),U(m.Alert,"successColor",Te(m.success.light,.6)),U(m.Alert,"warningColor",Te(m.warning.light,.6)),U(m.Alert,"errorFilledBg",k("palette-error-main")),U(m.Alert,"infoFilledBg",k("palette-info-main")),U(m.Alert,"successFilledBg",k("palette-success-main")),U(m.Alert,"warningFilledBg",k("palette-warning-main")),U(m.Alert,"errorFilledColor",Xn(()=>m.getContrastText(m.error.main))),U(m.Alert,"infoFilledColor",Xn(()=>m.getContrastText(m.info.main))),U(m.Alert,"successFilledColor",Xn(()=>m.getContrastText(m.success.main))),U(m.Alert,"warningFilledColor",Xn(()=>m.getContrastText(m.warning.main))),U(m.Alert,"errorStandardBg",Se(m.error.light,.9)),U(m.Alert,"infoStandardBg",Se(m.info.light,.9)),U(m.Alert,"successStandardBg",Se(m.success.light,.9)),U(m.Alert,"warningStandardBg",Se(m.warning.light,.9)),U(m.Alert,"errorIconColor",k("palette-error-main")),U(m.Alert,"infoIconColor",k("palette-info-main")),U(m.Alert,"successIconColor",k("palette-success-main")),U(m.Alert,"warningIconColor",k("palette-warning-main")),U(m.AppBar,"defaultBg",k("palette-grey-100")),U(m.Avatar,"defaultBg",k("palette-grey-400")),U(m.Button,"inheritContainedBg",k("palette-grey-300")),U(m.Button,"inheritContainedHoverBg",k("palette-grey-A100")),U(m.Chip,"defaultBorder",k("palette-grey-400")),U(m.Chip,"defaultAvatarColor",k("palette-grey-700")),U(m.Chip,"defaultIconColor",k("palette-grey-700")),U(m.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),U(m.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),U(m.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),U(m.LinearProgress,"primaryBg",Se(m.primary.main,.62)),U(m.LinearProgress,"secondaryBg",Se(m.secondary.main,.62)),U(m.LinearProgress,"errorBg",Se(m.error.main,.62)),U(m.LinearProgress,"infoBg",Se(m.info.main,.62)),U(m.LinearProgress,"successBg",Se(m.success.main,.62)),U(m.LinearProgress,"warningBg",Se(m.warning.main,.62)),U(m.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.11)`),U(m.Slider,"primaryTrack",Se(m.primary.main,.62)),U(m.Slider,"secondaryTrack",Se(m.secondary.main,.62)),U(m.Slider,"errorTrack",Se(m.error.main,.62)),U(m.Slider,"infoTrack",Se(m.info.main,.62)),U(m.Slider,"successTrack",Se(m.success.main,.62)),U(m.Slider,"warningTrack",Se(m.warning.main,.62));const N=Kc(m.background.default,.8);U(m.SnackbarContent,"bg",N),U(m.SnackbarContent,"color",Xn(()=>m.getContrastText(N))),U(m.SpeedDialAction,"fabHoverBg",Kc(m.background.paper,.15)),U(m.StepConnector,"border",k("palette-grey-400")),U(m.StepContent,"border",k("palette-grey-400")),U(m.Switch,"defaultColor",k("palette-common-white")),U(m.Switch,"defaultDisabledColor",k("palette-grey-100")),U(m.Switch,"primaryDisabledColor",Se(m.primary.main,.62)),U(m.Switch,"secondaryDisabledColor",Se(m.secondary.main,.62)),U(m.Switch,"errorDisabledColor",Se(m.error.main,.62)),U(m.Switch,"infoDisabledColor",Se(m.info.main,.62)),U(m.Switch,"successDisabledColor",Se(m.success.main,.62)),U(m.Switch,"warningDisabledColor",Se(m.warning.main,.62)),U(m.TableCell,"border",Se(Gc(m.divider,1),.88)),U(m.Tooltip,"bg",Gc(m.grey[700],.92))}if(m.mode==="dark"){U(m.Alert,"errorColor",Se(m.error.light,.6)),U(m.Alert,"infoColor",Se(m.info.light,.6)),U(m.Alert,"successColor",Se(m.success.light,.6)),U(m.Alert,"warningColor",Se(m.warning.light,.6)),U(m.Alert,"errorFilledBg",k("palette-error-dark")),U(m.Alert,"infoFilledBg",k("palette-info-dark")),U(m.Alert,"successFilledBg",k("palette-success-dark")),U(m.Alert,"warningFilledBg",k("palette-warning-dark")),U(m.Alert,"errorFilledColor",Xn(()=>m.getContrastText(m.error.dark))),U(m.Alert,"infoFilledColor",Xn(()=>m.getContrastText(m.info.dark))),U(m.Alert,"successFilledColor",Xn(()=>m.getContrastText(m.success.dark))),U(m.Alert,"warningFilledColor",Xn(()=>m.getContrastText(m.warning.dark))),U(m.Alert,"errorStandardBg",Te(m.error.light,.9)),U(m.Alert,"infoStandardBg",Te(m.info.light,.9)),U(m.Alert,"successStandardBg",Te(m.success.light,.9)),U(m.Alert,"warningStandardBg",Te(m.warning.light,.9)),U(m.Alert,"errorIconColor",k("palette-error-main")),U(m.Alert,"infoIconColor",k("palette-info-main")),U(m.Alert,"successIconColor",k("palette-success-main")),U(m.Alert,"warningIconColor",k("palette-warning-main")),U(m.AppBar,"defaultBg",k("palette-grey-900")),U(m.AppBar,"darkBg",k("palette-background-paper")),U(m.AppBar,"darkColor",k("palette-text-primary")),U(m.Avatar,"defaultBg",k("palette-grey-600")),U(m.Button,"inheritContainedBg",k("palette-grey-800")),U(m.Button,"inheritContainedHoverBg",k("palette-grey-700")),U(m.Chip,"defaultBorder",k("palette-grey-700")),U(m.Chip,"defaultAvatarColor",k("palette-grey-300")),U(m.Chip,"defaultIconColor",k("palette-grey-300")),U(m.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),U(m.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),U(m.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),U(m.LinearProgress,"primaryBg",Te(m.primary.main,.5)),U(m.LinearProgress,"secondaryBg",Te(m.secondary.main,.5)),U(m.LinearProgress,"errorBg",Te(m.error.main,.5)),U(m.LinearProgress,"infoBg",Te(m.info.main,.5)),U(m.LinearProgress,"successBg",Te(m.success.main,.5)),U(m.LinearProgress,"warningBg",Te(m.warning.main,.5)),U(m.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.13)`),U(m.Slider,"primaryTrack",Te(m.primary.main,.5)),U(m.Slider,"secondaryTrack",Te(m.secondary.main,.5)),U(m.Slider,"errorTrack",Te(m.error.main,.5)),U(m.Slider,"infoTrack",Te(m.info.main,.5)),U(m.Slider,"successTrack",Te(m.success.main,.5)),U(m.Slider,"warningTrack",Te(m.warning.main,.5));const N=Kc(m.background.default,.98);U(m.SnackbarContent,"bg",N),U(m.SnackbarContent,"color",Xn(()=>m.getContrastText(N))),U(m.SpeedDialAction,"fabHoverBg",Kc(m.background.paper,.15)),U(m.StepConnector,"border",k("palette-grey-600")),U(m.StepContent,"border",k("palette-grey-600")),U(m.Switch,"defaultColor",k("palette-grey-300")),U(m.Switch,"defaultDisabledColor",k("palette-grey-600")),U(m.Switch,"primaryDisabledColor",Te(m.primary.main,.55)),U(m.Switch,"secondaryDisabledColor",Te(m.secondary.main,.55)),U(m.Switch,"errorDisabledColor",Te(m.error.main,.55)),U(m.Switch,"infoDisabledColor",Te(m.info.main,.55)),U(m.Switch,"successDisabledColor",Te(m.success.main,.55)),U(m.Switch,"warningDisabledColor",Te(m.warning.main,.55)),U(m.TableCell,"border",Te(Gc(m.divider,1),.68)),U(m.Tooltip,"bg",Gc(m.grey[700],.92))}Tr(m.background,"default"),Tr(m.background,"paper"),Tr(m.common,"background"),Tr(m.common,"onBackground"),Tr(m,"divider"),Object.keys(m).forEach(N=>{const b=m[N];b&&typeof b=="object"&&(b.main&&U(m[N],"mainChannel",dl(fl(b.main))),b.light&&U(m[N],"lightChannel",dl(fl(b.light))),b.dark&&U(m[N],"darkChannel",dl(fl(b.dark))),b.contrastText&&U(m[N],"contrastTextChannel",dl(fl(b.contrastText))),N==="text"&&(Tr(m[N],"primary"),Tr(m[N],"secondary")),N==="action"&&(b.active&&Tr(m[N],"active"),b.selected&&Tr(m[N],"selected")))})}),x=e.reduce((A,m)=>mn(A,m),x);const L={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:v$(x)},{vars:O,generateThemeVars:C,generateStyleSheets:v}=HB(x,L);return x.vars=O,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach(([A,m])=>{x[A]=m}),x.generateThemeVars=C,x.generateStyleSheets=v,x.generateSpacing=function(){return VP(c.spacing,zv(this))},x.getColorSchemeSelector=qB(a),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig={...Ff,...c?.unstable_sxConfig},x.unstable_sx=function(m){return na({sx:m,theme:this})},x.toRuntimeSource=E$,x}function ZT(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:n0({...n===!0?{}:n.palette,mode:e})})}function R$(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:s=n?.mode,...o}=t,a=s||"light",l=i?.[a],c={...i,...n?{[a]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return __(t,...e);let h=n;"palette"in t||c[a]&&(c[a]!==!0?h=c[a].palette:a==="dark"&&(h={mode:"dark"}));const d=__({...t,palette:h},...e);return d.defaultColorScheme=a,d.colorSchemes=c,d.palette.mode==="light"&&(d.colorSchemes.light={...c.light!==!0&&c.light,palette:d.palette},ZT(d,"dark",c.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:d.palette},ZT(d,"light",c.light)),d}return!n&&!("light"in c)&&a==="light"&&(c.light=!0),I$({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const A$=R$(),k$="$$material";function P$(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const b$=t=>P$(t)&&t!=="classes",r0=AB({themeId:k$,defaultTheme:A$,rootShouldForwardProp:b$}),GP=BB;function x$(t){return jB(t)}function N$(t){return typeof t.main=="string"}function O$(t,e=[]){if(!N$(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function D$(t=[]){return([,e])=>e&&O$(e,t)}function L$(t){return UP("MuiCircularProgress",t)}SB("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ui=44,y_=MP`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,v_=MP`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,M$=typeof y_!="string"?Jv`
        animation: ${y_} 1.4s linear infinite;
      `:null,V$=typeof v_!="string"?Jv`
        animation: ${v_} 1.4s ease-in-out infinite;
      `:null,F$=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${ta(r)}`],svg:["svg"],circle:["circle",`circle${ta(n)}`,i&&"circleDisableShrink"]};return pj(s,L$,e)},U$=r0("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${ta(n.color)}`]]}})(GP(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:M$||{animation:`${y_} 1.4s linear infinite`}},...Object.entries(t.palette).filter(D$()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),j$=r0("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),B$=r0("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${ta(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(GP(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:V$||{animation:`${v_} 1.4s ease-in-out infinite`}}]}))),$$=V.forwardRef(function(e,n){const r=x$({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:h=0,variant:d="indeterminate",...p}=r,y={...r,color:s,disableShrink:o,size:a,thickness:c,value:h,variant:d},_=F$(y),w={},R={},T={};if(d==="determinate"){const E=2*Math.PI*((ui-c)/2);w.strokeDasharray=E.toFixed(3),T["aria-valuenow"]=Math.round(h),w.strokeDashoffset=`${((100-h)/100*E).toFixed(3)}px`,R.transform="rotate(-90deg)"}return P.jsx(U$,{className:fj(_.root,i),style:{width:a,height:a,...R,...l},ownerState:y,ref:n,role:"progressbar",...T,...p,children:P.jsx(j$,{className:_.svg,ownerState:y,viewBox:`${ui/2} ${ui/2} ${ui} ${ui}`,children:P.jsx(B$,{className:_.circle,style:w,ownerState:y,cx:ui,cy:ui,r:(ui-c)/2,fill:"none",strokeWidth:c})})})}),z$=({selectedCrop:t,uploadedImage:e,prediction:n})=>{const[r,i]=V.useState(null),[s,o]=V.useState(!1),a=async c=>{i(c?"useful":"not useful"),o(!0);try{await Rv(Zo($t,"feedbacks"),{predictionId:n.id,useful:c,date:new Date().toISOString()})}catch(h){console.error("Error saving feedback:",h)}},l={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f0f8ff"},resultCard:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",padding:"20px",width:"300px",textAlign:"left",marginTop:"20px"},resultTitle:{margin:"0 0 10px",color:"#333"},resultImage:{width:"100%",height:"auto",borderRadius:"8px",marginBottom:"10px"},detailsBox:{backgroundColor:"#f9f9f9",border:"1px solid #ccc",borderRadius:"5px",padding:"10px"},button:{backgroundColor:"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background-color 0.3s",width:"100%",marginTop:"10px"},feedbackButton:{margin:"5px",padding:"10px",borderRadius:"5px",border:"none",cursor:"pointer",transition:"background-color 0.3s"}};return P.jsx("div",{style:l.container,children:P.jsxs("div",{style:l.resultCard,children:[P.jsx("h1",{style:l.resultTitle,children:"Prediction Result"}),P.jsx("img",{src:e,alt:"Uploaded",style:l.resultImage}),P.jsxs("h2",{style:{color:"#4CAF50"},children:[t.charAt(0).toUpperCase()+t.slice(1)," Crop"]}),P.jsxs("div",{style:l.detailsBox,children:[P.jsxs("h3",{style:{margin:"0"},children:["Prediction: ",n.predicted_disease]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Confidence:"})," ",n.confidence_score.toFixed(2),"%"]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Cause:"})," ",n.cause]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Prevention:"})," ",n.prevention]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Medicines:"})," ",n.medicines]})]}),P.jsxs("div",{children:[P.jsx("button",{style:{...l.feedbackButton,backgroundColor:"#4CAF50",color:"white"},onClick:()=>a(!0),disabled:s,children:" Useful"}),P.jsx("button",{style:{...l.feedbackButton,backgroundColor:"#f44336",color:"white"},onClick:()=>a(!1),disabled:s,children:" Not Useful"})]}),r&&P.jsx("p",{children:`You found this prediction ${r}.`}),P.jsx("button",{style:l.button,onClick:()=>window.location.reload(),children:"Upload Another Image"})]})})},W$=()=>{const[t,e]=V.useState(null),[n,r]=V.useState(""),[i,s]=V.useState(null),[o,a]=V.useState("tomato"),[l,c]=V.useState(!1),h=y=>{const _=y.target.files[0];if(_){const w=URL.createObjectURL(_);e(w),r(_.name)}},d=y=>{a(y)},p=async()=>{if(!n){alert("Please select a file first!");return}c(!0);const y=new FormData,_=document.getElementById("file-input").files[0];y.append("file",_);try{const w=await rt.post(`https://backend-test-kjto.onrender.com/predict/${o}`,y,{headers:{"Content-Type":"multipart/form-data"}}),R=Ov(Lv,`images/${n}`);await _5(R,_);const T=await Rv(Zo($t,"predictions"),{crop:o,diseaseDetected:w.data.predicted_disease,confidence:w.data.confidence_score,imageUrl:`images/${n}`,date:new Date().toISOString()});s({...w.data,id:T.id})}catch(w){console.error("Error uploading the file:",w),alert("Failed to upload the file. Please try again.")}finally{c(!1)}};return i?P.jsx(z$,{selectedCrop:o,uploadedImage:t,prediction:i}):P.jsx("div",{className:"upload-container",children:P.jsxs("div",{className:"upload-card",children:[P.jsx("h1",{className:"upload-title",children:"Upload Image for Disease Prediction"}),P.jsx("div",{className:"crop-select-container",children:["tomato","potato","rice","wheat","apple"].map(y=>P.jsx("div",{className:`crop-circle ${o===y?"selected":""}`,onClick:()=>d(y),children:y.charAt(0).toUpperCase()+y.slice(1)},y))}),P.jsxs("div",{className:"upload-box",onClick:()=>document.getElementById("file-input").click(),children:[t?P.jsx("img",{src:t,alt:"Uploaded",className:"image-preview"}):P.jsx("p",{className:"upload-text",children:"Click or Drop an Image Here"}),P.jsx("input",{type:"file",id:"file-input",onChange:h,className:"hidden-file-input"})]}),l?P.jsxs("div",{className:"loading-indicator",children:[P.jsx($$,{}),P.jsx("p",{children:"Uploading and Predicting..."})]}):P.jsx("button",{onClick:p,className:"upload-button",children:"Upload and Predict"})]})})},H$=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!1),[i,s]=V.useState(""),[o,a]=V.useState(""),[l,c]=V.useState(!0),[h,d]=V.useState(!1),[p,y]=V.useState(null),_=fr.currentUser,w=async()=>{c(!0);try{if(!_)throw new Error("User is not authenticated.");const O=rr($t,"users",_.uid),C=await Tf(O);if(C.exists()){const k=C.data();a(k.name)}else console.warn("User document does not exist.");const v=Ek(Zo($t,"posts"),e3("timestamp","desc"),t3(10)),m=(await e_(v)).docs.map(k=>({id:k.id,...k.data()}));e(m),y(null)}catch(O){console.error("Error fetching posts or user info:",O),y("Failed to load posts. Please try again.")}finally{c(!1)}};V.useEffect(()=>{w()},[_,h]);const R=async O=>{if(!_){alert("Please log in to like posts.");return}try{const C=rr($t,"posts",O),v=t.find(m=>m.id===O),A=v.likes&&v.likes.includes(_.uid)?v.likes.filter(m=>m!==_.uid):[...v.likes||[],_.uid];await t_(C,{likes:A}),e(t.map(m=>m.id===O?{...m,likes:A}:m))}catch(C){console.error("Error updating likes:",C)}},T=async(O,C)=>{if(!_){alert("Please log in to comment on posts.");return}try{const v=rr($t,"posts",O),A=t.find(N=>N.id===O),m={user:o,text:C,timestamp:new Date},k=[...A.comments||[],m];await t_(v,{comments:k}),e(t.map(N=>N.id===O?{...N,comments:k}:N))}catch(v){console.error("Error updating comments:",v)}},E=async(O,C,v)=>{if(!_){alert("Please log in to upload posts.");return}try{const A=Ov(Lv,`images/${O.name}`),m=y5(A,O);m.on("state_changed",k=>{const N=k.bytesTransferred/k.totalBytes*100;v(N.toFixed(0))},k=>{console.error("Upload failed:",k),s("Upload failed. Please try again.")},async()=>{const k=await qk(m.snapshot.ref);await Rv(Zo($t,"posts"),{imageUrl:k,description:C,username:o,likes:[],comments:[],timestamp:l3()}),r(!1),s("Image uploaded successfully!"),d(!h)})}catch(A){console.error("Error uploading post:",A)}},I=async O=>{if(window.confirm("Are you sure you want to delete this post?"))try{await o3(rr($t,"posts",O)),d(!h)}catch(v){console.error("Error deleting post:",v)}},x=O=>{if(!O)return"Invalid Date";const C=typeof O.toDate=="function"?O.toDate():new Date(O),v={month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return C.toLocaleString(void 0,v)},L=V.useMemo(()=>t,[t]);return l?P.jsx("div",{children:"Loading posts..."}):p?P.jsx("div",{className:"error-message",children:p}):P.jsxs("div",{className:"community-container",children:[L.map(O=>P.jsxs("div",{className:"post",children:[P.jsxs("div",{className:"post-header",children:[P.jsx("span",{className:"username",children:O.username||"Unknown User"}),P.jsx("span",{className:"timestamp",children:O.timestamp&&x(O.timestamp)})]}),P.jsx("img",{src:O.imageUrl,alt:"post",className:"post-image",loading:"lazy"}),P.jsxs("div",{className:"description-container",children:[P.jsx("p",{className:"description-label",children:"Description:"}),P.jsx("p",{className:"description",children:O.description}),P.jsxs("div",{className:"like-container",children:[P.jsxs("button",{onClick:()=>R(O.id),className:"like-button",children:[P.jsx("span",{role:"img","aria-label":"like",children:""})," ",O.likes?O.likes.length:0]}),O.username===o&&P.jsx("button",{onClick:()=>I(O.id),className:"delete-button",children:"Delete"})]})]}),P.jsxs("div",{className:"comments-box",children:[O.comments&&O.comments.map((C,v)=>P.jsxs("div",{className:"comment",children:[P.jsxs("span",{className:"comment-username",children:[C.user||"Anonymous",":"]}),P.jsx("span",{className:"comment-text",children:C.text}),P.jsx("span",{className:"comment-date",children:x(C.timestamp)})]},v)),P.jsx(q$,{onSubmit:C=>T(O.id,C)})]})]},O.id)),P.jsx("button",{className:"upload-button2",onClick:()=>r(!0),children:P.jsx("span",{role:"img","aria-label":"plus",children:""})}),n&&P.jsx(G$,{onClose:()=>r(!1),onSubmit:E}),i&&P.jsx("div",{className:"upload-status",children:i})]})},q$=({onSubmit:t})=>{const[e,n]=V.useState(""),r=i=>{i.key==="Enter"&&e.trim()&&(t(e.trim()),n(""))};return P.jsxs("div",{className:"comment-input-container",children:[P.jsx("input",{type:"text",className:"comment-input",placeholder:"Write a comment...",value:e,onChange:i=>n(i.target.value),onKeyPress:r}),P.jsx("button",{className:"submit-button",onClick:()=>{e.trim()&&(t(e.trim()),n(""))},children:"Submit"})]})},G$=({onClose:t,onSubmit:e})=>{const[n,r]=V.useState(null),[i,s]=V.useState(""),[o,a]=V.useState(0),l=h=>{r(h.target.files[0])},c=()=>{n&&i&&e(n,i,a)};return P.jsxs("div",{className:"upload-modal",children:[P.jsx("h2",{children:"Upload Post"}),P.jsx("input",{type:"file",onChange:l,accept:"image/*"}),P.jsx("textarea",{value:i,onChange:h=>s(h.target.value),placeholder:"Write a description..."}),P.jsx("button",{onClick:c,children:"Upload"}),P.jsx("button",{onClick:t,children:"Cancel"}),o>0&&P.jsxs("div",{children:["Upload Progress: ",o,"%"]})]})},K$=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(""),i=()=>{n.trim()&&(e(o=>[...o,{text:n,sender:"You"}]),r(""),setTimeout(()=>{e(o=>[...o,{text:`Reply from Expert: ${n}`,sender:"Expert"}])},1e3))},s=o=>{r(o),i()};return P.jsx("div",{style:jt.container,children:P.jsxs("div",{style:jt.chatWindow,children:[P.jsx("h1",{style:jt.header,children:"Chat with Experts"}),P.jsx("div",{style:jt.messages,children:t.map((o,a)=>P.jsx("div",{style:{...jt.message,...o.sender==="You"?jt.user1:jt.user2},children:P.jsxs("p",{style:jt.messageText,children:[P.jsxs("strong",{children:[o.sender,":"]})," ",o.text]})},a))}),P.jsxs("div",{style:jt.inputContainer,children:[P.jsx("input",{type:"text",placeholder:"Type your message...",value:n,onChange:o=>r(o.target.value),style:jt.input}),P.jsx("button",{onClick:i,style:jt.sendButton,children:"Send"})]}),P.jsxs("div",{style:jt.predefinedContainer,children:[P.jsx("p",{style:jt.predefinedHeader,children:"Predefined Messages:"}),P.jsx("div",{style:jt.predefinedMessages,children:["What are the best crops for this season?","How to improve soil health?","What fertilizers do you recommend?"].map((o,a)=>P.jsx("button",{onClick:()=>s(o),style:jt.predefinedButton,children:o},a))})]})]})})},jt={container:{position:"absolute",top:"70px",bottom:"50px",left:"0",right:"0",display:"flex",justifyContent:"center"},chatWindow:{width:"90%",maxWidth:"600px",height:"100%",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column"},header:{textAlign:"center",margin:"10px 0",fontSize:"1.5rem",color:"#333"},messages:{padding:"15px",overflowY:"auto",flexGrow:1,display:"flex",flexDirection:"column"},message:{margin:"10px 0",padding:"10px",borderRadius:"20px",maxWidth:"70%",wordWrap:"break-word"},user1:{backgroundColor:"#d1e8ff",alignSelf:"flex-end"},user2:{backgroundColor:"#f1f1f1",alignSelf:"flex-start"},messageText:{margin:0,fontSize:"1rem",color:"#333"},inputContainer:{display:"flex",padding:"10px",borderTop:"1px solid #e0e0e0"},input:{flexGrow:1,padding:"10px",borderRadius:"20px",border:"1px solid #e0e0e0",marginRight:"10px"},sendButton:{backgroundColor:"#4CAF50",color:"white",padding:"10px 15px",borderRadius:"20px",cursor:"pointer"},predefinedContainer:{padding:"10px",borderTop:"1px solid #e0e0e0",backgroundColor:"#f9f9f9"},predefinedHeader:{margin:"0 0 10px 0",fontSize:"1rem",color:"#555"},predefinedMessages:{display:"flex",flexWrap:"wrap"},predefinedButton:{backgroundColor:"#e1f5fe",border:"none",borderRadius:"20px",padding:"5px 10px",margin:"5px",cursor:"pointer"}};var KP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},eS=Lr.createContext&&Lr.createContext(KP),Q$=["attr","size","title"];function Y$(t,e){if(t==null)return{};var n=X$(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function X$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wd.apply(this,arguments)}function tS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tS(Object(n),!0).forEach(function(r){J$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J$(t,e,n){return e=Z$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z$(t){var e=ez(t,"string");return typeof e=="symbol"?e:e+""}function ez(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QP(t){return t&&t.map((e,n)=>Lr.createElement(e.tag,Ed({key:n},e.attr),QP(e.child)))}function ei(t){return e=>Lr.createElement(tz,wd({attr:Ed({},t.attr)},e),QP(t.child))}function tz(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=Y$(t,Q$),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Lr.createElement("svg",wd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Ed(Ed({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Lr.createElement("title",null,s),t.children)};return eS!==void 0?Lr.createElement(eS.Consumer,null,n=>e(n)):e(KP)}function nz(t){return ei({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function rz(t){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function iz(t){return ei({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(t)}function sz(t){return ei({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function oz(t){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M152.1 236.2c-3.5-12.1-7.8-33.2-7.8-33.2h-.5s-4.3 21.1-7.8 33.2l-11.1 37.5H163zM616 96H336v320h280c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24zm-24 120c0 6.6-5.4 12-12 12h-11.4c-6.9 23.6-21.7 47.4-42.7 69.9 8.4 6.4 17.1 12.5 26.1 18 5.5 3.4 7.3 10.5 4.1 16.2l-7.9 13.9c-3.4 5.9-10.9 7.8-16.7 4.3-12.6-7.8-24.5-16.1-35.4-24.9-10.9 8.7-22.7 17.1-35.4 24.9-5.8 3.5-13.3 1.6-16.7-4.3l-7.9-13.9c-3.2-5.6-1.4-12.8 4.2-16.2 9.3-5.7 18-11.7 26.1-18-7.9-8.4-14.9-17-21-25.7-4-5.7-2.2-13.6 3.7-17.1l6.5-3.9 7.3-4.3c5.4-3.2 12.4-1.7 16 3.4 5 7 10.8 14 17.4 20.9 13.5-14.2 23.8-28.9 30-43.2H412c-6.6 0-12-5.4-12-12v-16c0-6.6 5.4-12 12-12h64v-16c0-6.6 5.4-12 12-12h16c6.6 0 12 5.4 12 12v16h64c6.6 0 12 5.4 12 12zM0 120v272c0 13.3 10.7 24 24 24h280V96H24c-13.3 0-24 10.7-24 24zm58.9 216.1L116.4 167c1.7-4.9 6.2-8.1 11.4-8.1h32.5c5.1 0 9.7 3.3 11.4 8.1l57.5 169.1c2.6 7.8-3.1 15.9-11.4 15.9h-22.9a12 12 0 0 1-11.5-8.6l-9.4-31.9h-60.2l-9.1 31.8c-1.5 5.1-6.2 8.7-11.5 8.7H70.3c-8.2 0-14-8.1-11.4-15.9z"},child:[]}]})(t)}function az(t){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(t)}function lz(t){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function uz(t){return ei({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function cz(t){return ei({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const hz=({toggleOptions:t})=>{const[e,n]=V.useState(!1),r=bu(),i=V.useRef(null);V.useEffect(()=>fr.onAuthStateChanged(a=>{n(!!a)}),[]),V.useEffect(()=>{const o=a=>{i.current&&!i.current.contains(a.target)&&t()};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[t]);const s=async o=>{if(o.preventDefault(),window.confirm("Do you really want to log out?"))try{await fr.signOut(),n(!1),alert("You have successfully logged out."),t(),r("/login")}catch(l){console.error("Logout error:",l.message),alert("Error logging out.")}else alert("Logout cancelled.")};return P.jsx("div",{className:"options-menu",ref:i,children:P.jsxs("ul",{children:[P.jsx("li",{onClick:t,children:P.jsx(Rr,{to:"/settings",children:"Settings"})}),P.jsx("li",{onClick:t,children:P.jsx(Rr,{to:"/profile",children:"Profile"})}),P.jsx("li",{onClick:t,children:P.jsx(Rr,{to:"/history",children:"History"})}),P.jsxs("li",{onClick:t,children:[P.jsx(Rr,{to:"/about",children:"About Us"})," "]}),e&&P.jsxs("li",{onClick:s,children:[P.jsx(Rr,{to:"/logout",children:"Logout"})," "]})]})})},dz=()=>{const{isDarkMode:t,toggleTheme:e}=V.useContext(If),[n,r]=V.useState("English"),[i,s]=V.useState(!0),o=c=>{r(c.target.value)},a=()=>{s(c=>!c)},l=()=>{alert("Settings saved!")};return P.jsxs("div",{className:`settings-page ${t?"dark":"light"}`,children:[" ",P.jsx("h1",{className:"settings-title",children:"Settings"}),P.jsxs("div",{className:"theme-toggle",children:[P.jsxs("h2",{className:"toggle-title",children:[P.jsx(az,{className:"icon"})," Theme"]}),P.jsxs("label",{className:"notification-toggle",children:[P.jsxs("span",{className:`switch ${t?"on":"off"}`,children:[" ",P.jsx("input",{type:"checkbox",checked:t,onChange:e,className:"switch-input"}),P.jsx("span",{className:"slider"})]}),t?"Dark Mode":"Light Mode"," "]})]}),P.jsxs("div",{className:"language-selection",children:[P.jsxs("h2",{className:"toggle-title",children:[P.jsx(oz,{className:"icon"})," Language"]}),P.jsxs("select",{value:n,onChange:o,className:"language-select",children:[P.jsx("option",{value:"English",children:"English"}),P.jsx("option",{value:"Spanish",children:"Hindi"}),P.jsx("option",{value:"French",children:"Odia"}),P.jsx("option",{value:"German",children:"Bengali"}),P.jsx("option",{value:"Chinese",children:"Gujrati"}),P.jsx("option",{value:"Chinese",children:"Asami"})]})]}),P.jsxs("div",{className:"notification-settings",children:[P.jsxs("h2",{className:"toggle-title",children:[P.jsx(nz,{className:"icon"})," Notifications"]}),P.jsxs("label",{className:"notification-toggle",children:[P.jsxs("span",{className:`switch ${i?"on":"off"}`,children:[" ",P.jsx("input",{type:"checkbox",checked:i,onChange:a,className:"switch-input"}),P.jsx("span",{className:"slider"})]}),i?"Enabled":"Disabled"," "]})]}),P.jsx("button",{className:"save-button",onClick:l,children:"Save Changes"})]})},fz=()=>{const[t,e]=V.useState({name:"",number:"",email:"",age:"",gender:"",location:""}),[n,r]=V.useState(!0),[i,s]=V.useState(!1);V.useEffect(()=>{(async()=>{const c=fr.currentUser;if(c){const h=rr($t,"users",c.uid),d=await Tf(h);d.exists()&&e(d.data())}r(!1)})()},[]);const o=l=>{const{name:c,value:h}=l.target;e({...t,[c]:h})},a=async()=>{const l=fr.currentUser;if(l){const c=rr($t,"users",l.uid);try{await t_(c,{name:t.name,number:t.number,age:t.age,gender:t.gender,location:t.location}),s(!1),alert("Profile updated successfully!")}catch(h){console.error("Error updating profile: ",h),alert("Error updating profile")}}};return n?P.jsx("p",{children:"Loading profile..."}):P.jsxs("div",{className:"user-profile",children:[P.jsx("h2",{children:"Profile"}),P.jsx("div",{className:"profile-image-container",children:P.jsx("div",{className:"placeholder-image",children:"Profile Picture"})}),P.jsx("div",{className:"profile-details",children:[{label:"Name",name:"name"},{label:"Phone Number",name:"number"},{label:"Email",name:"email",disabled:!0},{label:"Age",name:"age"},{label:"Gender",name:"gender"},{label:"Location",name:"location"}].map(l=>P.jsxs("div",{className:"profile-detail",children:[P.jsxs("label",{children:[l.label,":"]}),P.jsx("input",{type:(l.disabled,"text"),name:l.name,value:t[l.name],onChange:o,disabled:l.disabled||!i})]},l.name))}),i?P.jsx("button",{onClick:a,className:"save-button",children:"Save"}):P.jsx("button",{onClick:()=>s(!0),className:"edit-button",children:"Edit"})]})},pz=()=>{const[t,e]=V.useState([]);return V.useEffect(()=>{(async()=>{const r=fr.currentUser;if(!r){console.log("No user is logged in");return}const i=r.uid,s=Zo($t,"predictions"),o=Ek(s,ZU("userId","==",i)),a=await e_(o),l=Zo($t,"feedbacks"),c=await e_(l),h=a.docs.map(_=>({id:_.id,..._.data()})),d=c.docs.map(_=>({id:_.id,..._.data()})),p=h.map(_=>({..._,feedback:d.filter(w=>w.predictionId===_.id)})),y=await Promise.all(p.map(async _=>{const w=Ov(Lv,_.imageUrl),R=await qk(w);return{..._,imageUrl:R}}));e(y)})()},[]),P.jsxs("div",{className:"history-container",children:[P.jsx("h1",{children:"Prediction History"}),P.jsx("div",{className:"history-cards",children:t.map(n=>P.jsxs("div",{className:"history-card",children:[P.jsx("img",{src:n.imageUrl,alt:`${n.crop} disease`,className:"history-image"}),P.jsxs("div",{className:"history-details",children:[P.jsxs("h4",{children:[n.crop.charAt(0).toUpperCase()+n.crop.slice(1)," Crop"]}),P.jsxs("p",{style:{margin:"0"},children:[P.jsx("strong",{children:"Disease Detected:"})," ",n.diseaseDetected]}),P.jsxs("p",{style:{margin:"0"},children:[P.jsx("strong",{children:"Confidence:"})," ",parseFloat(n.confidence).toFixed(2),"%"]}),P.jsxs("p",{style:{margin:"0",fontSize:"smaller"},children:[P.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),P.jsxs("p",{style:{margin:"0"},children:[P.jsx("strong",{children:"Feedback:"}),n.feedback.length>0?P.jsx("span",{children:n.feedback.map(r=>P.jsx("span",{style:{marginRight:"5px"},children:r.useful?" Useful":" Not Useful"},r.id))}):P.jsx("span",{children:" Not given"})]})]})]},n.id))})]})},mz=()=>P.jsxs("div",{className:"about-container",children:[P.jsx("h1",{children:"About Our App"}),P.jsx("p",{className:"app-description",children:"Welcome to our AI-powered plant disease detection app! This application helps farmers and gardeners easily identify diseases in plants by uploading photos. Using state-of-the-art AI and Machine Learning models, we provide accurate results to assist in taking corrective measures quickly. Our app also offers advice on disease prevention and possible treatments."}),P.jsx("h2",{children:"Features:"}),P.jsxs("ul",{className:"features-list",children:[P.jsx("li",{children:"Upload plant images to detect diseases"}),P.jsx("li",{children:"Receive suggestions for treatments and preventive measures"}),P.jsx("li",{children:"Join a community of plant lovers to share tips and knowledge"})]})]});var nS={};const rS="@firebase/database",iS="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YP="";function gz(t){YP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),st(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:eu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Zr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _z(e)}}catch{}return new yz},ys=XP("localStorage"),vz=XP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Zd("@firebase/database"),wz=function(){let t=1;return function(){return t++}}(),JP=function(t){const e=VD(t),n=new OD;n.update(e);const r=n.digest();return Py.encodeByteArray(r)},Xu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Xu.apply(null,r):typeof r=="object"?e+=st(r):e+=r,e+=" "}return e};let bl=null,sS=!0;const Ez=function(t,e){z(!e,"Can't turn on custom loggers persistently."),Vo.logLevel=ae.VERBOSE,bl=Vo.log.bind(Vo)},Dt=function(...t){if(sS===!0&&(sS=!1,bl===null&&vz.get("logging_enabled")===!0&&Ez()),bl){const e=Xu.apply(null,t);bl(e)}},Ju=function(t){return function(...e){Dt(t,...e)}},w_=function(...t){const e="FIREBASE INTERNAL ERROR: "+Xu(...t);Vo.error(e)},Xr=function(...t){const e=`FIREBASE FATAL ERROR: ${Xu(...t)}`;throw Vo.error(e),new Error(e)},_n=function(...t){const e="FIREBASE WARNING: "+Xu(...t);Vo.warn(e)},Tz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ZP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Sz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ia="[MIN_NAME]",Vs="[MAX_NAME]",Ca=function(t,e){if(t===e)return 0;if(t===ia||e===Vs)return-1;if(e===ia||t===Vs)return 1;{const n=oS(t),r=oS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Cz=function(t,e){return t===e?0:t<e?-1:1},Ja=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+st(e))},i0=function(t){if(typeof t!="object"||t===null)return st(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=st(e[r]),n+=":",n+=i0(t[e[r]]);return n+="}",n},eb=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function on(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const tb=function(t){z(!ZP(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},Iz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Rz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Az(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const kz=new RegExp("^-?(0*)\\d{1,10}$"),Pz=-2147483648,bz=2147483647,oS=function(t){if(kz.test(t)){const e=Number(t);if(e>=Pz&&e<=bz)return e}return null},Zu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _n("Exception was thrown by user callback.",n),e},Math.floor(0))}},xz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_n(e)}}class Ch{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ch.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="5",nb="v",rb="s",ib="r",sb="f",ob=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ab="ls",lb="p",E_="ac",ub="websocket",cb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ys.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ys.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Dz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function db(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let r;if(e===ub)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cb)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Dz(t)&&(n.ns=t.namespace);const i=[];return on(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(){this.counters_={}}incrementCounter(e,n=1){Zr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return mD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm={},Im={};function o0(t){const e=t.toString();return Cm[e]||(Cm[e]=new Lz),Cm[e]}function Mz(t,e){const n=t.toString();return Im[n]||(Im[n]=e()),Im[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Zu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="start",Fz="close",Uz="pLPCommand",jz="pRTLPCB",fb="id",pb="pw",mb="ser",Bz="cb",$z="seg",zz="ts",Wz="d",Hz="dframe",gb=1870,_b=30,qz=gb-_b,Gz=25e3,Kz=3e4;class So{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ju(e),this.stats_=o0(n),this.urlFn=l=>(this.appCheckToken&&(l[E_]=this.appCheckToken),db(n,cb,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Vz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Kz)),Sz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new a0((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===aS)this.id=a,this.password=l;else if(o===Fz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[aS]="t",r[mb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Bz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nb]=s0,this.transportSessionId&&(r[rb]=this.transportSessionId),this.lastSessionId&&(r[ab]=this.lastSessionId),this.applicationId&&(r[lb]=this.applicationId),this.appCheckToken&&(r[E_]=this.appCheckToken),typeof location<"u"&&location.hostname&&ob.test(location.hostname)&&(r[ib]=sb);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){So.forceAllow_=!0}static forceDisallow(){So.forceDisallow_=!0}static isAvailable(){return So.forceAllow_?!0:!So.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Iz()&&!Rz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=st(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=oR(n),i=eb(r,qz);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Hz]="t",r[fb]=e,r[pb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=st(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class a0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=wz(),window[Uz+this.uniqueCallbackIdentifier]=e,window[jz+this.uniqueCallbackIdentifier]=n,this.myIFrame=a0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Dt("frame writing exception"),a.stack&&Dt(a.stack),Dt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Dt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fb]=this.myID,e[pb]=this.myPW,e[mb]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_b+r.length<=gb;){const o=this.pendingSegs.shift();r=r+"&"+$z+i+"="+o.seg+"&"+zz+i+"="+o.ts+"&"+Wz+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Gz)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Dt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=16384,Yz=45e3;let Td=null;typeof MozWebSocket<"u"?Td=MozWebSocket:typeof WebSocket<"u"&&(Td=WebSocket);class Un{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ju(this.connId),this.stats_=o0(n),this.connURL=Un.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[nb]=s0,typeof location<"u"&&location.hostname&&ob.test(location.hostname)&&(o[ib]=sb),n&&(o[rb]=n),r&&(o[ab]=r),i&&(o[E_]=i),s&&(o[lb]=s),db(e,ub,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ys.set("previous_websocket_failure",!0);try{let r;dR(),this.mySock=new Td(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Un.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Td!==null&&!Un.forceDisallow_}static previouslyFailed(){return ys.isInMemoryStorage||ys.get("previous_websocket_failure")===!0}markConnectionHealthy(){ys.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=eu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=st(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=eb(n,Qz);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Yz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Un.responsesRequiredToBeHealthy=2;Un.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[So,Un]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Un&&Un.isAvailable();let r=n&&!Un.previouslyFailed();if(e.webSocketOnly&&(n||_n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Un];else{const i=this.transports_=[];for(const s of _u.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);_u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_u.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=6e4,Jz=5e3,Zz=10*1024,e8=100*1024,Rm="t",lS="d",t8="s",uS="r",n8="e",cS="o",hS="a",dS="n",fS="p",r8="h";class i8{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ju("c:"+this.id+":"),this.transportManager_=new _u(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>e8?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Zz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Rm in e){const n=e[Rm];n===hS?this.upgradeIfSecondaryHealthy_():n===uS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ja("t",e),r=Ja("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ja("t",e),r=Ja("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ja(Rm,e);if(lS in e){const r=e[lS];if(n===r8){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===dS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===t8?this.onConnectionShutdown_(r):n===uS?this.onReset_(r):n===n8?w_("Server Error: "+r):n===cS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):w_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),s0!==r&&_n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),xl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Xz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Jz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ys.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends vb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Oy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Sd}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=32,mS=768;class Ie{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pe(){return new Ie("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Wi(t){return t.pieces_.length-t.pieceNum_}function Re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ie(t.pieces_,e)}function wb(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function s8(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Eb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Tb(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ie(e,0)}function ot(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ie(n,0)}function se(t){return t.pieceNum_>=t.pieces_.length}function zt(t,e){const n=ue(t),r=ue(e);if(n===null)return e;if(n===r)return zt(Re(t),Re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Sb(t,e){if(Wi(t)!==Wi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function jn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Wi(t)>Wi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class o8{constructor(e,n){this.errorPrefix_=n,this.parts_=Eb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Jd(this.parts_[r]);Cb(this)}}function a8(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Jd(e),Cb(t)}function l8(t){const e=t.parts_.pop();t.byteLength_-=Jd(e),t.parts_.length>0&&(t.byteLength_-=1)}function Cb(t){if(t.byteLength_>mS)throw new Error(t.errorPrefix_+"has a key path longer than "+mS+" bytes ("+t.byteLength_+").");if(t.parts_.length>pS)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pS+") or object contains a cycle "+hs(t))}function hs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends vb{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new l0}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=1e3,u8=60*5*1e3,gS=30*1e3,c8=1.3,h8=3e4,d8="server_kill",_S=3;class jr extends yb{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=jr.nextPersistentConnectionId_++,this.log_=Ju("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Za,this.maxReconnectDelay_=u8,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!dR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");l0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Sd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(st(s)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new xy,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;jr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Zr(e,"w")){const r=qo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();_n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ND(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=xD(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+st(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):w_("Unrecognized action received from server: "+st(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>h8&&(this.reconnectDelay_=Za),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*c8)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+jr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){z(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Dt("getToken() completed but was canceled"):(Dt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new i8(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{_n(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(d8)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&_n(d),l())}}}interrupt(e){Dt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Dt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kg(this.interruptReasons_)&&(this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>i0(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ie(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Dt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_S&&(this.reconnectDelay_=gS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Dt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_S&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+YP.replace(/\./g,"-")]=1,Oy()?e["framework.cordova"]=1:hR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Sd.getInstance().currentlyOnline();return kg(this.interruptReasons_)&&e}}jr.nextPersistentConnectionId_=0;jr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ie(ia,e),i=new ie(ia,n);return this.compare(r,i)!==0}minPost(){return ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc;class Ib extends Zf{static get __EMPTY_NODE(){return Qc}static set __EMPTY_NODE(e){Qc=e}compare(e,n){return Ca(e.name,n.name)}isDefinedOn(e){throw fa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ie.MIN}maxPost(){return new ie(Vs,Qc)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new ie(e,Qc)}toString(){return".key"}}const Fo=new Ib;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dt.RED,this.left=i??Jt.EMPTY_NODE,this.right=s??Jt.EMPTY_NODE}copy(e,n,r,i,s){return new dt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Jt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dt.RED=!0;dt.BLACK=!1;class f8{copy(e,n,r,i,s){return this}insert(e,n,r){return new dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Jt{constructor(e,n=Jt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Jt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dt.BLACK,null,null))}remove(e){return new Jt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Yc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Yc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Yc(this.root_,null,this.comparator_,!0,e)}}Jt.EMPTY_NODE=new f8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e){return Ca(t.name,e.name)}function u0(t,e){return Ca(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T_;function m8(t){T_=t}const Rb=function(t){return typeof t=="number"?"number:"+tb(t):"string:"+t},Ab=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zr(e,".sv"),"Priority must be a string or number.")}else z(t===T_||t.isEmpty(),"priority of unexpected type.");z(t===T_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yS;class ut{constructor(e,n=ut.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ab(this.priorityNode_)}static set __childrenNodeConstructor(e){yS=e}static get __childrenNodeConstructor(){return yS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ut(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return se(e)?this:ue(e)===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ut.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(z(r!==".priority"||Wi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ut.__childrenNodeConstructor.EMPTY_NODE.updateChild(Re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Rb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=tb(this.value_):e+=this.value_,this.lazyHash_=JP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ut.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ut.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ut.VALUE_TYPE_ORDER.indexOf(n),s=ut.VALUE_TYPE_ORDER.indexOf(r);return z(i>=0,"Unknown leaf type: "+n),z(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ut.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kb,Pb;function g8(t){kb=t}function _8(t){Pb=t}class y8 extends Zf{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ie.MIN}maxPost(){return new ie(Vs,new ut("[PRIORITY-POST]",Pb))}makePost(e,n){const r=kb(e);return new ie(n,new ut("[PRIORITY-POST]",r))}toString(){return".priority"}}const qe=new y8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=Math.log(2);class w8{constructor(e){const n=s=>parseInt(Math.log(s)/v8,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cd=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new dt(p,d.node,dt.BLACK,null,null);{const y=parseInt(h/2,10)+l,_=i(l,y),w=i(y+1,c);return d=t[y],p=n?n(d):d,new dt(p,d.node,dt.BLACK,_,w)}},s=function(l){let c=null,h=null,d=t.length;const p=function(_,w){const R=d-_,T=d;d-=_;const E=i(R+1,T),I=t[R],x=n?n(I):I;y(new dt(x,I.node,w,null,E))},y=function(_){c?(c.left=_,c=_):(h=_,c=_)};for(let _=0;_<l.count;++_){const w=l.nextBitIsOne(),R=Math.pow(2,l.count-(_+1));w?p(R,dt.BLACK):(p(R,dt.BLACK),p(R,dt.RED))}return h},o=new w8(t.length),a=s(o);return new Jt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am;const io={};class Dr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(io&&qe,"ChildrenNode.ts has not been loaded"),Am=Am||new Dr({".priority":io},{".priority":qe}),Am}get(e){const n=qo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Jt?n:null}hasIndex(e){return Zr(this.indexSet_,e.toString())}addIndex(e,n){z(e!==Fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ie.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Cd(r,e.getCompare()):a=io;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Dr(h,c)}addToIndexes(e,n){const r=Zh(this.indexes_,(i,s)=>{const o=qo(this.indexSet_,s);if(z(o,"Missing index implementation for "+s),i===io)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ie.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Cd(a,o.getCompare())}else return io;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ie(e.name,a))),l.insert(e,e.node)}});return new Dr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Zh(this.indexes_,i=>{if(i===io)return i;{const s=n.get(e.name);return s?i.remove(new ie(e.name,s)):i}});return new Dr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el;class Y{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ab(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return el||(el=new Y(new Jt(u0),null,Dr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||el}updatePriority(e){return this.children_.isEmpty()?this:new Y(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?el:n}}getChild(e){const n=ue(e);return n===null?this:this.getImmediateChild(n).getChild(Re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ie(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?el:this.priorityNode_;return new Y(i,o,s)}}updateChild(e,n){const r=ue(e);if(r===null)return n;{z(ue(e)!==".priority"||Wi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Re(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(qe,(o,a)=>{n[o]=a.val(e),r++,s&&Y.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Rb(this.getPriority().val())+":"),this.forEachChild(qe,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":JP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ie(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ie(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ie.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ie.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ec?-1:0}withIndex(e){if(e===Fo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Y(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Fo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(qe),i=n.getIterator(qe);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Fo?null:this.indexMap_.get(e.toString())}}Y.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class E8 extends Y{constructor(){super(new Jt(u0),Y.EMPTY_NODE,Dr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Y.EMPTY_NODE}isEmpty(){return!1}}const ec=new E8;Object.defineProperties(ie,{MIN:{value:new ie(ia,Y.EMPTY_NODE)},MAX:{value:new ie(Vs,ec)}});Ib.__EMPTY_NODE=Y.EMPTY_NODE;ut.__childrenNodeConstructor=Y;m8(ec);_8(ec);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=!0;function yt(t,e=null){if(t===null)return Y.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ut(n,yt(e))}if(!(t instanceof Array)&&T8){const n=[];let r=!1;if(on(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=yt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ie(o,l)))}}),n.length===0)return Y.EMPTY_NODE;const s=Cd(n,p8,o=>o.name,u0);if(r){const o=Cd(n,qe.getCompare());return new Y(s,yt(e),new Dr({".priority":o},{".priority":qe}))}else return new Y(s,yt(e),Dr.Default)}else{let n=Y.EMPTY_NODE;return on(t,(r,i)=>{if(Zr(t,r)&&r.substring(0,1)!=="."){const s=yt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(yt(e))}}g8(yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8 extends Zf{constructor(e){super(),this.indexPath_=e,z(!se(e)&&ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}makePost(e,n){const r=yt(e),i=Y.EMPTY_NODE.updateChild(this.indexPath_,r);return new ie(n,i)}maxPost(){const e=Y.EMPTY_NODE.updateChild(this.indexPath_,ec);return new ie(Vs,e)}toString(){return Eb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8 extends Zf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ca(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ie.MIN}maxPost(){return ie.MAX}makePost(e,n){const r=yt(e);return new ie(n,r)}toString(){return".value"}}const I8=new C8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){return{type:"value",snapshotNode:t}}function sa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function yu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function vu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function R8(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(yu(n,a)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(sa(n,r)):o.trackChildChange(vu(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(qe,(i,s)=>{n.hasChild(i)||r.trackChildChange(yu(i,s))}),n.isLeafNode()||n.forEachChild(qe,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(vu(i,s,o))}else r.trackChildChange(sa(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Y.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.indexedFilter_=new c0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wu.getStartPost_(e),this.endPost_=wu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ie(n,r))||(r=Y.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Y.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Y.EMPTY_NODE);const s=this;return n.forEachChild(qe,(o,a)=>{s.matches(new ie(o,a))||(i=i.updateImmediateChild(o,Y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new wu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ie(n,r))||(r=Y.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Y.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Y.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Y.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,y)=>d(y,p)}else o=this.index_.getCompare();const a=e;z(a.numChildren()===this.limit_,"");const l=new ie(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=i.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);const y=p==null?1:o(p,l);if(h&&!r.isEmpty()&&y>=0)return s?.trackChildChange(vu(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(yu(n,d));const w=a.updateImmediateChild(n,Y.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s?.trackChildChange(sa(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return r.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(yu(c.name,c.node)),s.trackChildChange(sa(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Y.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ia}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qe}copy(){const e=new h0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function k8(t){return t.loadsAllData()?new c0(t.getIndex()):t.hasLimit()?new A8(t):new wu(t)}function vS(t){const e={};if(t.isDefault())return e;let n;if(t.index_===qe?n="$priority":t.index_===I8?n="$value":t.index_===Fo?n="$key":(z(t.index_ instanceof S8,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=st(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=st(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+st(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=st(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+st(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wS(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==qe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends yb{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ju("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Id.getListenId_(e,r),a={};this.listens_[o]=a;const l=vS(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),qo(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=Id.getListenId_(e,n);delete this.listens_[r]}get(e){const n=vS(e._queryParams),r=e._path.toString(),i=new xy;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pa(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=eu(a.responseText)}catch{_n("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&_n("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this.rootNode_=Y.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(){return{value:null,children:new Map}}function xb(t,e,n){if(se(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ue(e);t.children.has(r)||t.children.set(r,Rd());const i=t.children.get(r);e=Re(e),xb(i,e,n)}}function S_(t,e,n){t.value!==null?n(e,t.value):b8(t,(r,i)=>{const s=new Ie(e.toString()+"/"+r);S_(i,s,n)})}function b8(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&on(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=10*1e3,N8=30*1e3,O8=5*60*1e3;class D8{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new x8(e);const r=ES+(N8-ES)*Math.random();xl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;on(e,(i,s)=>{s>0&&Zr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),xl(this.reportStats_.bind(this),Math.floor(Math.random()*2*O8))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bn||(Bn={}));function Nb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function d0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function f0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Bn.ACK_USER_WRITE,this.source=Nb()}operationForChild(e){if(se(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ie(e));return new Ad(pe(),n,this.revert)}}else return z(ue(this.path)===e,"operationForChild called for unrelated child."),new Ad(Re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.source=e,this.path=n,this.type=Bn.LISTEN_COMPLETE}operationForChild(e){return se(this.path)?new Eu(this.source,pe()):new Eu(this.source,Re(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Bn.OVERWRITE}operationForChild(e){return se(this.path)?new Fs(this.source,pe(),this.snap.getImmediateChild(e)):new Fs(this.source,Re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Bn.MERGE}operationForChild(e){if(se(this.path)){const n=this.children.subtree(new Ie(e));return n.isEmpty()?null:n.value?new Fs(this.source,pe(),n.value):new Tu(this.source,pe(),n)}else return z(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tu(this.source,Re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(se(e))return this.isFullyInitialized()&&!this.filtered_;const n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function M8(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(R8(o.childName,o.snapshotNode))}),tl(t,i,"child_removed",e,r,n),tl(t,i,"child_added",e,r,n),tl(t,i,"child_moved",s,r,n),tl(t,i,"child_changed",e,r,n),tl(t,i,"value",e,r,n),i}function tl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>F8(t,a,l)),o.forEach(a=>{const l=V8(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function V8(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function F8(t,e,n){if(e.childName==null||n.childName==null)throw fa("Should only compare child_ events.");const r=new ie(e.childName,e.snapshotNode),i=new ie(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){return{eventCache:t,serverCache:e}}function Nl(t,e,n,r){return ep(new Hi(e,n,r),t.serverCache)}function Ob(t,e,n,r){return ep(t.eventCache,new Hi(e,n,r))}function kd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Us(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km;const U8=()=>(km||(km=new Jt(Cz)),km);class xe{constructor(e,n=U8()){this.value=e,this.children=n}static fromObject(e){let n=new xe(null);return on(e,(r,i)=>{n=n.set(new Ie(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pe(),value:this.value};if(se(e))return null;{const r=ue(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Re(e),n);return s!=null?{path:ot(new Ie(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(se(e))return this;{const n=ue(e),r=this.children.get(n);return r!==null?r.subtree(Re(e)):new xe(null)}}set(e,n){if(se(e))return new xe(n,this.children);{const r=ue(e),s=(this.children.get(r)||new xe(null)).set(Re(e),n),o=this.children.insert(r,s);return new xe(this.value,o)}}remove(e){if(se(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=ue(e),r=this.children.get(n);if(r){const i=r.remove(Re(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new xe(null):new xe(this.value,s)}else return this}}get(e){if(se(e))return this.value;{const n=ue(e),r=this.children.get(n);return r?r.get(Re(e)):null}}setTree(e,n){if(se(e))return n;{const r=ue(e),s=(this.children.get(r)||new xe(null)).setTree(Re(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new xe(this.value,o)}}fold(e){return this.fold_(pe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ot(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(se(e))return null;{const s=ue(e),o=this.children.get(s);return o?o.findOnPath_(Re(e),ot(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pe(),n)}foreachOnPath_(e,n,r){if(se(e))return this;{this.value&&r(n,this.value);const i=ue(e),s=this.children.get(i);return s?s.foreachOnPath_(Re(e),ot(n,i),r):new xe(null)}}foreach(e){this.foreach_(pe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ot(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.writeTree_=e}static empty(){return new Wn(new xe(null))}}function Ol(t,e,n){if(se(e))return new Wn(new xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=zt(i,e);return s=s.updateChild(o,n),new Wn(t.writeTree_.set(i,s))}else{const i=new xe(n),s=t.writeTree_.setTree(e,i);return new Wn(s)}}}function TS(t,e,n){let r=t;return on(n,(i,s)=>{r=Ol(r,ot(e,i),s)}),r}function SS(t,e){if(se(e))return Wn.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new Wn(n)}}function C_(t,e){return qs(t,e)!=null}function qs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(zt(n.path,e)):null}function CS(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(qe,(r,i)=>{e.push(new ie(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ie(r,i.value))}),e}function Li(t,e){if(se(e))return t;{const n=qs(t,e);return n!=null?new Wn(new xe(n)):new Wn(t.writeTree_.subtree(e))}}function I_(t){return t.writeTree_.isEmpty()}function oa(t,e){return Db(pe(),t.writeTree_,e)}function Db(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(z(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Db(ot(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ot(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t,e){return Fb(e,t)}function j8(t,e,n,r,i){z(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ol(t.visibleWrites,e,n)),t.lastWriteId=r}function B8(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function $8(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&z8(a,r.path)?i=!1:jn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return W8(t),!0;if(r.snap)t.visibleWrites=SS(t.visibleWrites,r.path);else{const a=r.children;on(a,l=>{t.visibleWrites=SS(t.visibleWrites,ot(r.path,l))})}return!0}else return!1}function z8(t,e){if(t.snap)return jn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jn(ot(t.path,n),e))return!0;return!1}function W8(t){t.visibleWrites=Lb(t.allWrites,H8,pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function H8(t){return t.visible}function Lb(t,e,n){let r=Wn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)jn(n,o)?(a=zt(n,o),r=Ol(r,a,s.snap)):jn(o,n)&&(a=zt(o,n),r=Ol(r,pe(),s.snap.getChild(a)));else if(s.children){if(jn(n,o))a=zt(n,o),r=TS(r,a,s.children);else if(jn(o,n))if(a=zt(o,n),se(a))r=TS(r,pe(),s.children);else{const l=qo(s.children,ue(a));if(l){const c=l.getChild(Re(a));r=Ol(r,pe(),c)}}}else throw fa("WriteRecord should have .snap or .children")}}return r}function Mb(t,e,n,r,i){if(!r&&!i){const s=qs(t.visibleWrites,e);if(s!=null)return s;{const o=Li(t.visibleWrites,e);if(I_(o))return n;if(n==null&&!C_(o,pe()))return null;{const a=n||Y.EMPTY_NODE;return oa(o,a)}}}else{const s=Li(t.visibleWrites,e);if(!i&&I_(s))return n;if(!i&&n==null&&!C_(s,pe()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(jn(c.path,e)||jn(e,c.path))},a=Lb(t.allWrites,o,e),l=n||Y.EMPTY_NODE;return oa(a,l)}}}function q8(t,e,n){let r=Y.EMPTY_NODE;const i=qs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(qe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Li(t.visibleWrites,e);return n.forEachChild(qe,(o,a)=>{const l=oa(Li(s,new Ie(o)),a);r=r.updateImmediateChild(o,l)}),CS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Li(t.visibleWrites,e);return CS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function G8(t,e,n,r,i){z(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ot(e,n);if(C_(t.visibleWrites,s))return null;{const o=Li(t.visibleWrites,s);return I_(o)?i.getChild(n):oa(o,i.getChild(n))}}function K8(t,e,n,r){const i=ot(e,n),s=qs(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Li(t.visibleWrites,i);return oa(o,r.getNode().getImmediateChild(n))}else return null}function Q8(t,e){return qs(t.visibleWrites,e)}function Y8(t,e,n,r,i,s,o){let a;const l=Li(t.visibleWrites,e),c=qs(l,pe());if(c!=null)a=c;else if(n!=null)a=oa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=p.getNext();for(;y&&h.length<i;)d(y,r)!==0&&h.push(y),y=p.getNext();return h}else return[]}function X8(){return{visibleWrites:Wn.empty(),allWrites:[],lastWriteId:-1}}function Pd(t,e,n,r){return Mb(t.writeTree,t.treePath,e,n,r)}function p0(t,e){return q8(t.writeTree,t.treePath,e)}function IS(t,e,n,r){return G8(t.writeTree,t.treePath,e,n,r)}function bd(t,e){return Q8(t.writeTree,ot(t.treePath,e))}function J8(t,e,n,r,i,s){return Y8(t.writeTree,t.treePath,e,n,r,i,s)}function m0(t,e,n){return K8(t.writeTree,t.treePath,e,n)}function Vb(t,e){return Fb(ot(t.treePath,e),t.writeTree)}function Fb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,vu(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,yu(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,sa(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,vu(r,e.snapshotNode,i.oldSnap));else throw fa("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Ub=new e7;class g0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Hi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return m0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Us(this.viewCache_),s=J8(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(t){return{filter:t}}function n7(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function r7(t,e,n,r,i){const s=new Z8;let o,a;if(n.type===Bn.OVERWRITE){const c=n;c.source.fromUser?o=R_(t,e,c.path,c.snap,r,i,s):(z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!se(c.path),o=xd(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Bn.MERGE){const c=n;c.source.fromUser?o=s7(t,e,c.path,c.children,r,i,s):(z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=A_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Bn.ACK_USER_WRITE){const c=n;c.revert?o=l7(t,e,c.path,r,i,s):o=o7(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Bn.LISTEN_COMPLETE)o=a7(t,e,n.path,r,s);else throw fa("Unknown operation type: "+n.type);const l=s.getChanges();return i7(e,o,l),{viewCache:o,changes:l}}function i7(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=kd(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(bb(kd(e)))}}function jb(t,e,n,r,i,s){const o=e.eventCache;if(bd(r,n)!=null)return e;{let a,l;if(se(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Us(e),h=c instanceof Y?c:Y.EMPTY_NODE,d=p0(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Pd(r,Us(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ue(n);if(c===".priority"){z(Wi(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=IS(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Re(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=IS(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=m0(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return Nl(e,a,o.isFullyInitialized()||se(n),t.filter.filtersNodes())}}function xd(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(se(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),y,null)}else{const y=ue(n);if(!l.isCompleteForPath(n)&&Wi(n)>1)return e;const _=Re(n),R=l.getNode().getImmediateChild(y).updateChild(_,r);y===".priority"?c=h.updatePriority(l.getNode(),R):c=h.updateChild(l.getNode(),y,R,_,Ub,null)}const d=Ob(e,c,l.isFullyInitialized()||se(n),h.filtersNodes()),p=new g0(i,d,s);return jb(t,d,n,i,p,a)}function R_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new g0(i,e,s);if(se(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Nl(e,c,!0,t.filter.filtersNodes());else{const d=ue(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Nl(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=Re(n),y=a.getNode().getImmediateChild(d);let _;if(se(p))_=r;else{const w=h.getCompleteChild(d);w!=null?wb(p)===".priority"&&w.getChild(Tb(p)).isEmpty()?_=w:_=w.updateChild(p,r):_=Y.EMPTY_NODE}if(y.equals(_))l=e;else{const w=t.filter.updateChild(a.getNode(),d,_,p,h,o);l=Nl(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function RS(t,e){return t.eventCache.isCompleteForChild(e)}function s7(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=ot(n,l);RS(e,ue(h))&&(a=R_(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=ot(n,l);RS(e,ue(h))||(a=R_(t,a,h,c,i,s,o))}),a}function AS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function A_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;se(n)?c=r:c=new xe(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),_=AS(t,y,p);l=xd(t,l,new Ie(d),_,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const y=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!y){const _=e.serverCache.getNode().getImmediateChild(d),w=AS(t,_,p);l=xd(t,l,new Ie(d),w,i,s,o,a)}}),l}function o7(t,e,n,r,i,s,o){if(bd(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(se(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return xd(t,e,n,l.getNode().getChild(n),i,s,a,o);if(se(n)){let c=new xe(null);return l.getNode().forEachChild(Fo,(h,d)=>{c=c.set(new Ie(h),d)}),A_(t,e,n,c,i,s,a,o)}else return e}else{let c=new xe(null);return r.foreach((h,d)=>{const p=ot(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),A_(t,e,n,c,i,s,a,o)}}function a7(t,e,n,r,i){const s=e.serverCache,o=Ob(e,s.getNode(),s.isFullyInitialized()||se(n),s.isFiltered());return jb(t,o,n,r,Ub,i)}function l7(t,e,n,r,i,s){let o;if(bd(r,n)!=null)return e;{const a=new g0(r,e,i),l=e.eventCache.getNode();let c;if(se(n)||ue(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Pd(r,Us(e));else{const d=e.serverCache.getNode();z(d instanceof Y,"serverChildren would be complete if leaf node"),h=p0(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=ue(n);let d=m0(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Re(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,Y.EMPTY_NODE,Re(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Pd(r,Us(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||bd(r,pe())!=null,Nl(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new c0(r.getIndex()),s=k8(r);this.processor_=t7(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(Y.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Y.EMPTY_NODE,a.getNode(),null),h=new Hi(l,o.isFullyInitialized(),i.filtersNodes()),d=new Hi(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=ep(d,h),this.eventGenerator_=new L8(this.query_)}get query(){return this.query_}}function c7(t){return t.viewCache_.serverCache.getNode()}function h7(t){return kd(t.viewCache_)}function d7(t,e){const n=Us(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!se(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function kS(t){return t.eventRegistrations_.length===0}function f7(t,e){t.eventRegistrations_.push(e)}function PS(t,e,n){const r=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function bS(t,e,n,r){e.type===Bn.MERGE&&e.source.queryId!==null&&(z(Us(t.viewCache_),"We should always have a full cache before handling merges"),z(kd(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=r7(t.processor_,i,e,n,r);return n7(t.processor_,s.viewCache),z(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Bb(t,s.changes,s.viewCache.eventCache.getNode(),null)}function p7(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qe,(s,o)=>{r.push(sa(s,o))}),n.isFullyInitialized()&&r.push(bb(n.getNode())),Bb(t,r,n.getNode(),e)}function Bb(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return M8(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd;class $b{constructor(){this.views=new Map}}function m7(t){z(!Nd,"__referenceConstructor has already been defined"),Nd=t}function g7(){return z(Nd,"Reference.ts has not been loaded"),Nd}function _7(t){return t.views.size===0}function _0(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return z(s!=null,"SyncTree gave us an op for an invalid query."),bS(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(bS(o,e,n,r));return s}}function zb(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Pd(n,i?r:null),l=!1;a?l=!0:r instanceof Y?(a=p0(n,r),l=!1):(a=Y.EMPTY_NODE,l=!1);const c=ep(new Hi(a,l,!1),new Hi(r,i,!1));return new u7(e,c)}return o}function y7(t,e,n,r,i,s){const o=zb(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),f7(o,n),p7(o,n)}function v7(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=qi(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(PS(c,n,r)),kS(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(PS(l,n,r)),kS(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!qi(t)&&s.push(new(g7())(e._repo,e._path)),{removed:s,events:o}}function Wb(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Mi(t,e){let n=null;for(const r of t.views.values())n=n||d7(r,e);return n}function Hb(t,e){if(e._queryParams.loadsAllData())return np(t);{const r=e._queryIdentifier;return t.views.get(r)}}function qb(t,e){return Hb(t,e)!=null}function qi(t){return np(t)!=null}function np(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od;function w7(t){z(!Od,"__referenceConstructor has already been defined"),Od=t}function E7(){return z(Od,"Reference.ts has not been loaded"),Od}let T7=1;class xS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=X8(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function S7(t,e,n,r,i){return j8(t.pendingWriteTree_,e,n,r,i),i?nc(t,new Fs(Nb(),e,n)):[]}function Co(t,e,n=!1){const r=B8(t.pendingWriteTree_,e);if($8(t.pendingWriteTree_,e)){let s=new xe(null);return r.snap!=null?s=s.set(pe(),!0):on(r.children,o=>{s=s.set(new Ie(o),!0)}),nc(t,new Ad(r.path,s,n))}else return[]}function tc(t,e,n){return nc(t,new Fs(d0(),e,n))}function C7(t,e,n){const r=xe.fromObject(n);return nc(t,new Tu(d0(),e,r))}function I7(t,e){return nc(t,new Eu(d0(),e))}function R7(t,e,n){const r=y0(t,n);if(r){const i=v0(r),s=i.path,o=i.queryId,a=zt(s,e),l=new Eu(f0(o),a);return w0(t,s,l)}else return[]}function Gb(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||qb(o,e))){const l=v7(o,e,n,r);_7(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(p,y)=>qi(y));if(h&&!d){const p=t.syncPointTree_.subtree(s);if(!p.isEmpty()){const y=b7(p);for(let _=0;_<y.length;++_){const w=y[_],R=w.query,T=Jb(t,w);t.listenProvider_.startListening(Dl(R),Su(t,R),T.hashFn,T.onComplete)}}}!d&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(Dl(e),null):c.forEach(p=>{const y=t.queryToTagMap.get(rp(p));t.listenProvider_.stopListening(Dl(p),y)}))}x7(t,c)}return a}function Kb(t,e,n,r){const i=y0(t,r);if(i!=null){const s=v0(i),o=s.path,a=s.queryId,l=zt(o,e),c=new Fs(f0(a),l,n);return w0(t,o,c)}else return[]}function A7(t,e,n,r){const i=y0(t,r);if(i){const s=v0(i),o=s.path,a=s.queryId,l=zt(o,e),c=xe.fromObject(n),h=new Tu(f0(a),l,c);return w0(t,o,h)}else return[]}function k7(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(p,y)=>{const _=zt(p,i);s=s||Mi(y,_),o=o||qi(y)});let a=t.syncPointTree_.get(i);a?(o=o||qi(a),s=s||Mi(a,pe())):(a=new $b,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=Y.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,_)=>{const w=Mi(_,pe());w&&(s=s.updateImmediateChild(y,w))}));const c=qb(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=rp(e);z(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const y=N7();t.queryToTagMap.set(p,y),t.tagToQueryMap.set(y,p)}const h=tp(t.pendingWriteTree_,i);let d=y7(a,e,n,h,s,l);if(!c&&!o&&!r){const p=Hb(a,e);d=d.concat(O7(t,e,p))}return d}function Qb(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=zt(o,e),c=Mi(a,l);if(c)return c});return Mb(i,e,s,n,!0)}function P7(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=zt(c,n);r=r||Mi(h,d)});let i=t.syncPointTree_.get(n);i?r=r||Mi(i,pe()):(i=new $b,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Hi(r,!0,!1):null,a=tp(t.pendingWriteTree_,e._path),l=zb(i,e,a,s?o.getNode():Y.EMPTY_NODE,s);return h7(l)}function nc(t,e){return Yb(e,t.syncPointTree_,null,tp(t.pendingWriteTree_,pe()))}function Yb(t,e,n,r){if(se(t.path))return Xb(t,e,n,r);{const i=e.get(pe());n==null&&i!=null&&(n=Mi(i,pe()));let s=[];const o=ue(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=Vb(r,o);s=s.concat(Yb(a,l,c,h))}return i&&(s=s.concat(_0(i,t,r,n))),s}}function Xb(t,e,n,r){const i=e.get(pe());n==null&&i!=null&&(n=Mi(i,pe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=Vb(r,o),h=t.operationForChild(o);h&&(s=s.concat(Xb(h,a,l,c)))}),i&&(s=s.concat(_0(i,t,r,n))),s}function Jb(t,e){const n=e.query,r=Su(t,n);return{hashFn:()=>(c7(e)||Y.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?R7(t,n._path,r):I7(t,n._path);{const s=Az(i,n);return Gb(t,n,null,s)}}}}function Su(t,e){const n=rp(e);return t.queryToTagMap.get(n)}function rp(t){return t._path.toString()+"$"+t._queryIdentifier}function y0(t,e){return t.tagToQueryMap.get(e)}function v0(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ie(t.substr(0,e))}}function w0(t,e,n){const r=t.syncPointTree_.get(e);z(r,"Missing sync point for query tag that we're tracking");const i=tp(t.pendingWriteTree_,e);return _0(r,n,i,null)}function b7(t){return t.fold((e,n,r)=>{if(n&&qi(n))return[np(n)];{let i=[];return n&&(i=Wb(n)),on(r,(s,o)=>{i=i.concat(o)}),i}})}function Dl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(E7())(t._repo,t._path):t}function x7(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=rp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function N7(){return T7++}function O7(t,e,n){const r=e._path,i=Su(t,e),s=Jb(t,n),o=t.listenProvider_.startListening(Dl(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)z(!qi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,d)=>{if(!se(c)&&h&&qi(h))return[np(h).query];{let p=[];return h&&(p=p.concat(Wb(h).map(y=>y.query))),on(d,(y,_)=>{p=p.concat(_)}),p}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Dl(h),Su(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new E0(n)}node(){return this.node_}}class T0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ot(this.path_,e);return new T0(this.syncTree_,n)}node(){return Qb(this.syncTree_,this.path_)}}const D7=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},NS=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return L7(t[".sv"],e,n);if(typeof t[".sv"]=="object")return M7(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},L7=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},M7=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&z(!1,"Unexpected increment value: "+r);const i=e.node();if(z(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},V7=function(t,e,n,r){return S0(e,new T0(n,t),r)},F7=function(t,e,n){return S0(t,new E0(e),n)};function S0(t,e,n){const r=t.getPriority().val(),i=NS(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=NS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ut(a,yt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ut(i))),o.forEachChild(qe,(a,l)=>{const c=S0(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function I0(t,e){let n=e instanceof Ie?e:new Ie(e),r=t,i=ue(n);for(;i!==null;){const s=qo(r.node.children,i)||{children:{},childCount:0};r=new C0(i,r,s),n=Re(n),i=ue(n)}return r}function Ia(t){return t.node.value}function Zb(t,e){t.node.value=e,k_(t)}function ex(t){return t.node.childCount>0}function U7(t){return Ia(t)===void 0&&!ex(t)}function ip(t,e){on(t.node.children,(n,r)=>{e(new C0(n,t,r))})}function tx(t,e,n,r){n&&!r&&e(t),ip(t,i=>{tx(i,e,!0,r)}),n&&r&&e(t)}function j7(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function rc(t){return new Ie(t.parent===null?t.name:rc(t.parent)+"/"+t.name)}function k_(t){t.parent!==null&&B7(t.parent,t.name,t)}function B7(t,e,n){const r=U7(n),i=Zr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,k_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,k_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=/[\[\].#$\/\u0000-\u001F\u007F]/,z7=/[\[\].#$\u0000-\u001F\u007F]/,Pm=10*1024*1024,nx=function(t){return typeof t=="string"&&t.length!==0&&!$7.test(t)},rx=function(t){return typeof t=="string"&&t.length!==0&&!z7.test(t)},W7=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rx(t)},ix=function(t,e,n){const r=n instanceof Ie?new o8(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+hs(r));if(typeof e=="function")throw new Error(t+"contains a function "+hs(r)+" with contents = "+e.toString());if(ZP(e))throw new Error(t+"contains "+e.toString()+" "+hs(r));if(typeof e=="string"&&e.length>Pm/3&&Jd(e)>Pm)throw new Error(t+"contains a string greater than "+Pm+" utf8 bytes "+hs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(on(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!nx(o)))throw new Error(t+" contains an invalid key ("+o+") "+hs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);a8(r,o),ix(t,a,r),l8(r)}),i&&s)throw new Error(t+' contains ".value" child '+hs(r)+" in addition to actual children.")}},sx=function(t,e,n,r){if(!rx(n))throw new Error(pR(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},H7=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sx(t,e,n)},q7=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nx(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!W7(n))throw new Error(pR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function K7(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Sb(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function rs(t,e,n){K7(t,n),Q7(t,r=>jn(r,e)||jn(e,r))}function Q7(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Y7(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Y7(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();bl&&Dt("event: "+n.toString()),Zu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="repo_interrupt",J7=25;class Z7{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new G7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rd(),this.transactionQueueTree_=new C0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function eW(t,e,n){if(t.stats_=o0(t.repoInfo_),t.forceRestClient_||xz())t.server_=new Id(t.repoInfo_,(r,i,s,o)=>{OS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>DS(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{st(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new jr(t.repoInfo_,e,(r,i,s,o)=>{OS(t,r,i,s,o)},r=>{DS(t,r)},r=>{nW(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Mz(t.repoInfo_,()=>new D8(t.stats_,t.server_)),t.infoData_=new P8,t.infoSyncTree_=new xS({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=tc(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),R0(t,"connected",!1),t.serverSyncTree_=new xS({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);rs(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function tW(t){const n=t.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ox(t){return D7({timestamp:tW(t)})}function OS(t,e,n,r,i){t.dataUpdateCount++;const s=new Ie(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Zh(n,c=>yt(c));o=A7(t.serverSyncTree_,s,l,i)}else{const l=yt(n);o=Kb(t.serverSyncTree_,s,l,i)}else if(r){const l=Zh(n,c=>yt(c));o=C7(t.serverSyncTree_,s,l)}else{const l=yt(n);o=tc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=P0(t,s)),rs(t.eventQueue_,a,o)}function DS(t,e){R0(t,"connected",e),e===!1&&sW(t)}function nW(t,e){on(e,(n,r)=>{R0(t,n,r)})}function R0(t,e,n){const r=new Ie("/.info/"+e),i=yt(n);t.infoData_.updateSnapshot(r,i);const s=tc(t.infoSyncTree_,r,i);rs(t.eventQueue_,r,s)}function rW(t){return t.nextWriteId_++}function iW(t,e,n){const r=P7(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=yt(i).withIndex(e._queryParams.getIndex());k7(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=tc(t.serverSyncTree_,e._path,s);else{const a=Su(t.serverSyncTree_,e);o=Kb(t.serverSyncTree_,e._path,s,a)}return rs(t.eventQueue_,e._path,o),Gb(t.serverSyncTree_,e,n,null,!0),s},i=>(A0(t,"get for query "+st(e)+" failed: "+i),Promise.reject(new Error(i))))}function sW(t){A0(t,"onDisconnectEvents");const e=ox(t),n=Rd();S_(t.onDisconnect_,pe(),(i,s)=>{const o=V7(i,s,t.serverSyncTree_,e);xb(n,i,o)});let r=[];S_(n,pe(),(i,s)=>{r=r.concat(tc(t.serverSyncTree_,i,s));const o=uW(t,i);P0(t,o)}),t.onDisconnect_=Rd(),rs(t.eventQueue_,pe(),r)}function oW(t){t.persistentConnection_&&t.persistentConnection_.interrupt(X7)}function A0(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Dt(n,...e)}function ax(t,e,n){return Qb(t.serverSyncTree_,e,n)||Y.EMPTY_NODE}function k0(t,e=t.transactionQueueTree_){if(e||sp(t,e),Ia(e)){const n=ux(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&aW(t,rc(e),n)}else ex(e)&&ip(e,n=>{k0(t,n)})}function aW(t,e,n){const r=n.map(c=>c.currentWriteId),i=ax(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];z(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=zt(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{A0(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(Co(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();sp(t,I0(t.transactionQueueTree_,e)),k0(t,t.transactionQueueTree_),rs(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)Zu(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{_n("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}P0(t,e)}},o)}function P0(t,e){const n=lx(t,e),r=rc(n),i=ux(t,n);return lW(t,i,r),r}function lW(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=zt(n,l.path);let h=!1,d;if(z(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(Co(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=J7)h=!0,d="maxretry",i=i.concat(Co(t.serverSyncTree_,l.currentWriteId,!0));else{const p=ax(t,l.path,o);l.currentInputSnapshot=p;const y=e[a].update(p.val());if(y!==void 0){ix("transaction failed: Data returned ",y,l.path);let _=yt(y);typeof y=="object"&&y!=null&&Zr(y,".priority")||(_=_.updatePriority(p.getPriority()));const R=l.currentWriteId,T=ox(t),E=F7(_,p,T);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=E,l.currentWriteId=rW(t),o.splice(o.indexOf(R),1),i=i.concat(S7(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),i=i.concat(Co(t.serverSyncTree_,R,!0))}else h=!0,d="nodata",i=i.concat(Co(t.serverSyncTree_,l.currentWriteId,!0))}rs(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}sp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Zu(r[a]);k0(t,t.transactionQueueTree_)}function lx(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);n!==null&&Ia(r)===void 0;)r=I0(r,n),e=Re(e),n=ue(e);return r}function ux(t,e){const n=[];return cx(t,e,n),n.sort((r,i)=>r.order-i.order),n}function cx(t,e,n){const r=Ia(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ip(e,i=>{cx(t,i,n)})}function sp(t,e){const n=Ia(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Zb(e,n.length>0?n:void 0)}ip(e,r=>{sp(t,r)})}function uW(t,e){const n=rc(lx(t,e)),r=I0(t.transactionQueueTree_,e);return j7(r,i=>{bm(t,i)}),bm(t,r),tx(r,i=>{bm(t,i)}),n}function bm(t,e){const n=Ia(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(z(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(z(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Co(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Zb(e,void 0):n.length=s+1,rs(t.eventQueue_,rc(e),i);for(let o=0;o<r.length;o++)Zu(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function hW(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_n(`Invalid query segment '${n}' in query '${t}'`)}return e}const LS=function(t,e){const n=dW(t),r=n.namespace;n.domain==="firebase.com"&&Xr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Xr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Tz();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new hb(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ie(n.pathString)}},dW=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=cW(t.substring(h,d)));const p=hW(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+st(this.snapshot.exportVal())}}class pW{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return se(this._path)?null:wb(this._path)}get ref(){return new ti(this._repo,this._path)}get _queryIdentifier(){const e=wS(this._queryParams),n=i0(e);return n==="{}"?"default":n}get _queryObject(){return wS(this._queryParams)}isEqual(e){if(e=Ce(e),!(e instanceof b0))return!1;const n=this._repo===e._repo,r=Sb(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+s8(this._path)}}class ti extends b0{constructor(e,n){super(e,n,new h0,!1)}get parent(){const e=Tb(this._path);return e===null?null:new ti(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Cu{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ie(e),r=P_(this.ref,e);return new Cu(this._node.getChild(n),r,qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Cu(i,P_(this.ref,r),qe)))}hasChild(e){const n=new Ie(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gW(t,e){return t=Ce(t),t._checkNotDeleted("ref"),e!==void 0?P_(t._root,e):t._root}function P_(t,e){return t=Ce(t),ue(t._path)===null?H7("child","path",e):sx("child","path",e),new ti(t._repo,ot(t._path,e))}function _W(t){t=Ce(t);const e=new mW(()=>{}),n=new x0(e);return iW(t._repo,t,n).then(r=>new Cu(r,new ti(t._repo,t._path),t._queryParams.getIndex()))}class x0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new fW("value",this,new Cu(e.snapshotNode,new ti(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new pW(this,e,n):null}matches(e){return e instanceof x0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}m7(ti);w7(ti);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="FIREBASE_DATABASE_EMULATOR_HOST",b_={};let vW=!1;function wW(t,e,n,r){t.repoInfo_=new hb(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function EW(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Xr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Dt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=LS(s,i),a=o.repoInfo,l;typeof process<"u"&&nS&&(l=nS[yW]),l?(s=`http://${l}?ns=${a.namespace}`,o=LS(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new Oz(t.name,t.options,e);q7("Invalid Firebase Database URL",o),se(o.path)||Xr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=SW(a,t,c,new Nz(t.name,n));return new CW(h,t)}function TW(t,e){const n=b_[e];(!n||n[t.key]!==t)&&Xr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),oW(t),delete n[t.key]}function SW(t,e,n,r){let i=b_[e.name];i||(i={},b_[e.name]=i);let s=i[t.toURLString()];return s&&Xr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Z7(t,vW,n,r),i[t.toURLString()]=s,s}class CW{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(eW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ti(this._repo,pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(TW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xr("Cannot call "+e+" on a deleted database.")}}function IW(t=ef(),e){const n=Nu(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=by("database");r&&RW(n,...r)}return n}function RW(t,e,n,r={}){t=Ce(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Xr("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ch(Ch.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Ny(r.mockUserToken,t.app.options.projectId);s=new Ch(o)}wW(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){gz(Ji),Ui(new Hr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return EW(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Pn(rS,iS,t),Pn(rS,iS,"esm2017")}jr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};jr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};AW();const kW=()=>{const{isDarkMode:t}=V.useContext(If),e=da(),n=bu(),[r,i]=V.useState(!1),[s,o]=V.useState(null),a=()=>{i(p=>!p)};V.useEffect(()=>{const p=tA(),y=IW(),_=WR(p,w=>{if(w){const R=gW(y,`users/${w.uid}`);_W(R).then(T=>{T.exists()?o(T.val()):console.log("No data available")}).catch(T=>{console.error("Error fetching user data:",T)})}else o(null)});return()=>_()},[]);const l=!r&&!["/login","/settings","/profile","/history","/about"].includes(e.pathname),c=D5({onSwipedLeft:()=>{l&&h()},onSwipedRight:()=>{l&&d()},preventDefaultTouchmoveEvent:!0,trackMouse:!0,delta:50}),h=()=>{switch(e.pathname){case"/home":n("/upload");break;case"/upload":n("/community");break;case"/community":n("/chatexpert");break;case"/chatexpert":default:n("/home")}},d=()=>{switch(e.pathname){case"/upload":n("/home");break;case"/community":n("/upload");break;case"/chatexpert":n("/community");break;case"/home":default:n("/chatexpert")}};return P.jsxs("div",{className:`container ${t?"dark":"light"}`,...l?c:{},children:[P.jsxs("div",{className:`header ${t?"dark":"light"}`,children:[P.jsx("h1",{className:"app-name",children:"FLamingICE"}),P.jsxs("div",{className:"header-icons",children:[P.jsx(lz,{className:"icon search-icon"}),P.jsx(iz,{className:"icon menu-icon",onClick:a,style:{marginRight:"15px"}})]})]}),r&&P.jsx(hz,{toggleOptions:a}),P.jsxs("div",{className:`content ${t?"dark":"light"}`,children:[s&&P.jsxs("div",{className:"user-details",children:[P.jsx("img",{src:s.photo,alt:"User",className:"user-photo"}),P.jsxs("p",{children:["Name: ",s.name]}),P.jsxs("p",{children:["Phone: ",s.phone]}),P.jsxs("p",{children:["Email: ",s.email]}),P.jsxs("p",{children:["Age: ",s.age]}),P.jsxs("p",{children:["Gender: ",s.gender]})]}),P.jsxs(rR,{children:[P.jsx(Sn,{path:"/home",element:P.jsx(V5,{})}),P.jsx(Sn,{path:"/upload",element:P.jsx(W$,{})}),P.jsx(Sn,{path:"/community",element:P.jsx(H$,{})}),P.jsx(Sn,{path:"/chatexpert",element:P.jsx(K$,{})}),P.jsx(Sn,{path:"/login",element:P.jsx(Gk,{})}),P.jsx(Sn,{path:"/settings",element:P.jsx(dz,{})}),P.jsx(Sn,{path:"/profile",element:P.jsx(fz,{})}),P.jsx(Sn,{path:"/history",element:P.jsx(pz,{})}),P.jsx(Sn,{path:"/about",element:P.jsx(mz,{})})]})]}),P.jsxs("footer",{className:`footer ${t?"dark":"light"}`,children:[P.jsxs(Rr,{to:"/home",className:`footerButton ${e.pathname==="/home"?"active":""}`,children:[P.jsx(sz,{className:"footer-icon"}),"Home"]}),P.jsxs(Rr,{to:"/upload",className:`footerButton ${e.pathname==="/upload"?"active":""}`,children:[P.jsx(uz,{className:"footer-icon"}),"Upload"]}),P.jsxs(Rr,{to:"/community",className:`footerButton ${e.pathname==="/community"?"active":""}`,children:[P.jsx(cz,{className:"footer-icon"}),"Community"]}),P.jsxs(Rr,{to:"/chatexpert",className:`footerButton ${e.pathname==="/chatexpert"?"active":""}`,children:[P.jsx(rz,{className:"footer-icon"}),"ChatExpert"]})]})]})};function PW(){V.useContext(If);const[t,e]=V.useState(null),[n,r]=V.useState(!0);return V.useEffect(()=>{const i=WR(fr,s=>{e(s),r(!1)});return()=>i()},[]),n?P.jsx("div",{children:"Loading..."}):P.jsx(uD,{children:P.jsx("div",{children:P.jsxs(rR,{children:[P.jsx(Sn,{path:"/",element:t?P.jsx(HE,{to:"/home"}):P.jsx(Gk,{})}),P.jsx(Sn,{path:"/*",element:t?P.jsx(kW,{}):P.jsx(HE,{to:"/"})})]})})})}Nm.createRoot(document.getElementById("root")).render(P.jsx(Lr.StrictMode,{children:P.jsxs(L5,{children:[" ",P.jsx(PW,{})]})}));
